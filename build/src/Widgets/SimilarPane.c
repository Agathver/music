/* SimilarPane.c generated by valac 0.11.7, the Vala compiler
 * generated from SimilarPane.vala, do not modify */


#include <glib.h>
#include <glib-object.h>
#include <gtk/gtk.h>
#include <gee.h>
#include <stdlib.h>
#include <string.h>
#include <float.h>
#include <math.h>
#include <gdk/gdk.h>


#define BEAT_BOX_TYPE_SIMILAR_PANE (beat_box_similar_pane_get_type ())
#define BEAT_BOX_SIMILAR_PANE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BEAT_BOX_TYPE_SIMILAR_PANE, BeatBoxSimilarPane))
#define BEAT_BOX_SIMILAR_PANE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BEAT_BOX_TYPE_SIMILAR_PANE, BeatBoxSimilarPaneClass))
#define BEAT_BOX_IS_SIMILAR_PANE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BEAT_BOX_TYPE_SIMILAR_PANE))
#define BEAT_BOX_IS_SIMILAR_PANE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BEAT_BOX_TYPE_SIMILAR_PANE))
#define BEAT_BOX_SIMILAR_PANE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BEAT_BOX_TYPE_SIMILAR_PANE, BeatBoxSimilarPaneClass))

typedef struct _BeatBoxSimilarPane BeatBoxSimilarPane;
typedef struct _BeatBoxSimilarPaneClass BeatBoxSimilarPaneClass;
typedef struct _BeatBoxSimilarPanePrivate BeatBoxSimilarPanePrivate;

#define BEAT_BOX_TYPE_SONG (beat_box_song_get_type ())
#define BEAT_BOX_SONG(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BEAT_BOX_TYPE_SONG, BeatBoxSong))
#define BEAT_BOX_SONG_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BEAT_BOX_TYPE_SONG, BeatBoxSongClass))
#define BEAT_BOX_IS_SONG(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BEAT_BOX_TYPE_SONG))
#define BEAT_BOX_IS_SONG_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BEAT_BOX_TYPE_SONG))
#define BEAT_BOX_SONG_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BEAT_BOX_TYPE_SONG, BeatBoxSongClass))

typedef struct _BeatBoxSong BeatBoxSong;
typedef struct _BeatBoxSongClass BeatBoxSongClass;

#define BEAT_BOX_TYPE_LIBRARY_MANAGER (beat_box_library_manager_get_type ())
#define BEAT_BOX_LIBRARY_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BEAT_BOX_TYPE_LIBRARY_MANAGER, BeatBoxLibraryManager))
#define BEAT_BOX_LIBRARY_MANAGER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BEAT_BOX_TYPE_LIBRARY_MANAGER, BeatBoxLibraryManagerClass))
#define BEAT_BOX_IS_LIBRARY_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BEAT_BOX_TYPE_LIBRARY_MANAGER))
#define BEAT_BOX_IS_LIBRARY_MANAGER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BEAT_BOX_TYPE_LIBRARY_MANAGER))
#define BEAT_BOX_LIBRARY_MANAGER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BEAT_BOX_TYPE_LIBRARY_MANAGER, BeatBoxLibraryManagerClass))

typedef struct _BeatBoxLibraryManager BeatBoxLibraryManager;
typedef struct _BeatBoxLibraryManagerClass BeatBoxLibraryManagerClass;

#define BEAT_BOX_TYPE_LIBRARY_WINDOW (beat_box_library_window_get_type ())
#define BEAT_BOX_LIBRARY_WINDOW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BEAT_BOX_TYPE_LIBRARY_WINDOW, BeatBoxLibraryWindow))
#define BEAT_BOX_LIBRARY_WINDOW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BEAT_BOX_TYPE_LIBRARY_WINDOW, BeatBoxLibraryWindowClass))
#define BEAT_BOX_IS_LIBRARY_WINDOW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BEAT_BOX_TYPE_LIBRARY_WINDOW))
#define BEAT_BOX_IS_LIBRARY_WINDOW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BEAT_BOX_TYPE_LIBRARY_WINDOW))
#define BEAT_BOX_LIBRARY_WINDOW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BEAT_BOX_TYPE_LIBRARY_WINDOW, BeatBoxLibraryWindowClass))

typedef struct _BeatBoxLibraryWindow BeatBoxLibraryWindow;
typedef struct _BeatBoxLibraryWindowClass BeatBoxLibraryWindowClass;

#define BEAT_BOX_TYPE_MUSIC_TREE_VIEW (beat_box_music_tree_view_get_type ())
#define BEAT_BOX_MUSIC_TREE_VIEW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BEAT_BOX_TYPE_MUSIC_TREE_VIEW, BeatBoxMusicTreeView))
#define BEAT_BOX_MUSIC_TREE_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BEAT_BOX_TYPE_MUSIC_TREE_VIEW, BeatBoxMusicTreeViewClass))
#define BEAT_BOX_IS_MUSIC_TREE_VIEW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BEAT_BOX_TYPE_MUSIC_TREE_VIEW))
#define BEAT_BOX_IS_MUSIC_TREE_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BEAT_BOX_TYPE_MUSIC_TREE_VIEW))
#define BEAT_BOX_MUSIC_TREE_VIEW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BEAT_BOX_TYPE_MUSIC_TREE_VIEW, BeatBoxMusicTreeViewClass))

typedef struct _BeatBoxMusicTreeView BeatBoxMusicTreeView;
typedef struct _BeatBoxMusicTreeViewClass BeatBoxMusicTreeViewClass;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
typedef struct _BeatBoxLibraryManagerPrivate BeatBoxLibraryManagerPrivate;

#define BEAT_BOX_TYPE_SETTINGS (beat_box_settings_get_type ())
#define BEAT_BOX_SETTINGS(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BEAT_BOX_TYPE_SETTINGS, BeatBoxSettings))
#define BEAT_BOX_SETTINGS_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BEAT_BOX_TYPE_SETTINGS, BeatBoxSettingsClass))
#define BEAT_BOX_IS_SETTINGS(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BEAT_BOX_TYPE_SETTINGS))
#define BEAT_BOX_IS_SETTINGS_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BEAT_BOX_TYPE_SETTINGS))
#define BEAT_BOX_SETTINGS_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BEAT_BOX_TYPE_SETTINGS, BeatBoxSettingsClass))

typedef struct _BeatBoxSettings BeatBoxSettings;
typedef struct _BeatBoxSettingsClass BeatBoxSettingsClass;

#define BEAT_BOX_TYPE_DATA_BASE_MANAGER (beat_box_data_base_manager_get_type ())
#define BEAT_BOX_DATA_BASE_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BEAT_BOX_TYPE_DATA_BASE_MANAGER, BeatBoxDataBaseManager))
#define BEAT_BOX_DATA_BASE_MANAGER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BEAT_BOX_TYPE_DATA_BASE_MANAGER, BeatBoxDataBaseManagerClass))
#define BEAT_BOX_IS_DATA_BASE_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BEAT_BOX_TYPE_DATA_BASE_MANAGER))
#define BEAT_BOX_IS_DATA_BASE_MANAGER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BEAT_BOX_TYPE_DATA_BASE_MANAGER))
#define BEAT_BOX_DATA_BASE_MANAGER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BEAT_BOX_TYPE_DATA_BASE_MANAGER, BeatBoxDataBaseManagerClass))

typedef struct _BeatBoxDataBaseManager BeatBoxDataBaseManager;
typedef struct _BeatBoxDataBaseManagerClass BeatBoxDataBaseManagerClass;

#define BEAT_BOX_TYPE_DATA_BASE_UPDATER (beat_box_data_base_updater_get_type ())
#define BEAT_BOX_DATA_BASE_UPDATER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BEAT_BOX_TYPE_DATA_BASE_UPDATER, BeatBoxDataBaseUpdater))
#define BEAT_BOX_DATA_BASE_UPDATER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BEAT_BOX_TYPE_DATA_BASE_UPDATER, BeatBoxDataBaseUpdaterClass))
#define BEAT_BOX_IS_DATA_BASE_UPDATER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BEAT_BOX_TYPE_DATA_BASE_UPDATER))
#define BEAT_BOX_IS_DATA_BASE_UPDATER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BEAT_BOX_TYPE_DATA_BASE_UPDATER))
#define BEAT_BOX_DATA_BASE_UPDATER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BEAT_BOX_TYPE_DATA_BASE_UPDATER, BeatBoxDataBaseUpdaterClass))

typedef struct _BeatBoxDataBaseUpdater BeatBoxDataBaseUpdater;
typedef struct _BeatBoxDataBaseUpdaterClass BeatBoxDataBaseUpdaterClass;

#define BEAT_BOX_TYPE_FILE_OPERATOR (beat_box_file_operator_get_type ())
#define BEAT_BOX_FILE_OPERATOR(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BEAT_BOX_TYPE_FILE_OPERATOR, BeatBoxFileOperator))
#define BEAT_BOX_FILE_OPERATOR_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BEAT_BOX_TYPE_FILE_OPERATOR, BeatBoxFileOperatorClass))
#define BEAT_BOX_IS_FILE_OPERATOR(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BEAT_BOX_TYPE_FILE_OPERATOR))
#define BEAT_BOX_IS_FILE_OPERATOR_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BEAT_BOX_TYPE_FILE_OPERATOR))
#define BEAT_BOX_FILE_OPERATOR_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BEAT_BOX_TYPE_FILE_OPERATOR, BeatBoxFileOperatorClass))

typedef struct _BeatBoxFileOperator BeatBoxFileOperator;
typedef struct _BeatBoxFileOperatorClass BeatBoxFileOperatorClass;

#define BEAT_BOX_TYPE_STREAM_PLAYER (beat_box_stream_player_get_type ())
#define BEAT_BOX_STREAM_PLAYER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BEAT_BOX_TYPE_STREAM_PLAYER, BeatBoxStreamPlayer))
#define BEAT_BOX_STREAM_PLAYER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BEAT_BOX_TYPE_STREAM_PLAYER, BeatBoxStreamPlayerClass))
#define BEAT_BOX_IS_STREAM_PLAYER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BEAT_BOX_TYPE_STREAM_PLAYER))
#define BEAT_BOX_IS_STREAM_PLAYER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BEAT_BOX_TYPE_STREAM_PLAYER))
#define BEAT_BOX_STREAM_PLAYER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BEAT_BOX_TYPE_STREAM_PLAYER, BeatBoxStreamPlayerClass))

typedef struct _BeatBoxStreamPlayer BeatBoxStreamPlayer;
typedef struct _BeatBoxStreamPlayerClass BeatBoxStreamPlayerClass;

#define LAST_FM_TYPE_CORE (last_fm_core_get_type ())
#define LAST_FM_CORE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), LAST_FM_TYPE_CORE, LastFMCore))
#define LAST_FM_CORE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), LAST_FM_TYPE_CORE, LastFMCoreClass))
#define LAST_FM_IS_CORE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), LAST_FM_TYPE_CORE))
#define LAST_FM_IS_CORE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), LAST_FM_TYPE_CORE))
#define LAST_FM_CORE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), LAST_FM_TYPE_CORE, LastFMCoreClass))

typedef struct _LastFMCore LastFMCore;
typedef struct _LastFMCoreClass LastFMCoreClass;

#define BEAT_BOX_TYPE_TREE_VIEW_SETUP (beat_box_tree_view_setup_get_type ())
#define BEAT_BOX_TREE_VIEW_SETUP(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BEAT_BOX_TYPE_TREE_VIEW_SETUP, BeatBoxTreeViewSetup))
#define BEAT_BOX_TREE_VIEW_SETUP_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BEAT_BOX_TYPE_TREE_VIEW_SETUP, BeatBoxTreeViewSetupClass))
#define BEAT_BOX_IS_TREE_VIEW_SETUP(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BEAT_BOX_TYPE_TREE_VIEW_SETUP))
#define BEAT_BOX_IS_TREE_VIEW_SETUP_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BEAT_BOX_TYPE_TREE_VIEW_SETUP))
#define BEAT_BOX_TREE_VIEW_SETUP_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BEAT_BOX_TYPE_TREE_VIEW_SETUP, BeatBoxTreeViewSetupClass))

typedef struct _BeatBoxTreeViewSetup BeatBoxTreeViewSetup;
typedef struct _BeatBoxTreeViewSetupClass BeatBoxTreeViewSetupClass;

#define BEAT_BOX_TYPE_SONG_INFO (beat_box_song_info_get_type ())
#define BEAT_BOX_SONG_INFO(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BEAT_BOX_TYPE_SONG_INFO, BeatBoxSongInfo))
#define BEAT_BOX_SONG_INFO_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BEAT_BOX_TYPE_SONG_INFO, BeatBoxSongInfoClass))
#define BEAT_BOX_IS_SONG_INFO(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BEAT_BOX_TYPE_SONG_INFO))
#define BEAT_BOX_IS_SONG_INFO_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BEAT_BOX_TYPE_SONG_INFO))
#define BEAT_BOX_SONG_INFO_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BEAT_BOX_TYPE_SONG_INFO, BeatBoxSongInfoClass))

typedef struct _BeatBoxSongInfo BeatBoxSongInfo;
typedef struct _BeatBoxSongInfoClass BeatBoxSongInfoClass;

#define BEAT_BOX_LIBRARY_MANAGER_TYPE_REPEAT (beat_box_library_manager_repeat_get_type ())

#define BEAT_BOX_LIBRARY_MANAGER_TYPE_SHUFFLE (beat_box_library_manager_shuffle_get_type ())

#define BEAT_BOX_MUSIC_TREE_VIEW_TYPE_HINT (beat_box_music_tree_view_hint_get_type ())
#define _g_free0(var) (var = (g_free (var), NULL))
#define _g_regex_unref0(var) ((var == NULL) ? NULL : (var = (g_regex_unref (var), NULL)))
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))
typedef struct _BeatBoxSongInfoPrivate BeatBoxSongInfoPrivate;

#define LAST_FM_TYPE_ARTIST_INFO (last_fm_artist_info_get_type ())
#define LAST_FM_ARTIST_INFO(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), LAST_FM_TYPE_ARTIST_INFO, LastFMArtistInfo))
#define LAST_FM_ARTIST_INFO_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), LAST_FM_TYPE_ARTIST_INFO, LastFMArtistInfoClass))
#define LAST_FM_IS_ARTIST_INFO(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), LAST_FM_TYPE_ARTIST_INFO))
#define LAST_FM_IS_ARTIST_INFO_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), LAST_FM_TYPE_ARTIST_INFO))
#define LAST_FM_ARTIST_INFO_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), LAST_FM_TYPE_ARTIST_INFO, LastFMArtistInfoClass))

typedef struct _LastFMArtistInfo LastFMArtistInfo;
typedef struct _LastFMArtistInfoClass LastFMArtistInfoClass;

#define LAST_FM_TYPE_TRACK_INFO (last_fm_track_info_get_type ())
#define LAST_FM_TRACK_INFO(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), LAST_FM_TYPE_TRACK_INFO, LastFMTrackInfo))
#define LAST_FM_TRACK_INFO_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), LAST_FM_TYPE_TRACK_INFO, LastFMTrackInfoClass))
#define LAST_FM_IS_TRACK_INFO(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), LAST_FM_TYPE_TRACK_INFO))
#define LAST_FM_IS_TRACK_INFO_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), LAST_FM_TYPE_TRACK_INFO))
#define LAST_FM_TRACK_INFO_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), LAST_FM_TYPE_TRACK_INFO, LastFMTrackInfoClass))

typedef struct _LastFMTrackInfo LastFMTrackInfo;
typedef struct _LastFMTrackInfoClass LastFMTrackInfoClass;

#define LAST_FM_TYPE_ALBUM_INFO (last_fm_album_info_get_type ())
#define LAST_FM_ALBUM_INFO(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), LAST_FM_TYPE_ALBUM_INFO, LastFMAlbumInfo))
#define LAST_FM_ALBUM_INFO_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), LAST_FM_TYPE_ALBUM_INFO, LastFMAlbumInfoClass))
#define LAST_FM_IS_ALBUM_INFO(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), LAST_FM_TYPE_ALBUM_INFO))
#define LAST_FM_IS_ALBUM_INFO_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), LAST_FM_TYPE_ALBUM_INFO))
#define LAST_FM_ALBUM_INFO_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), LAST_FM_TYPE_ALBUM_INFO, LastFMAlbumInfoClass))

typedef struct _LastFMAlbumInfo LastFMAlbumInfo;
typedef struct _LastFMAlbumInfoClass LastFMAlbumInfoClass;

#define BEAT_BOX_TYPE_PLAYLIST (beat_box_playlist_get_type ())
#define BEAT_BOX_PLAYLIST(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BEAT_BOX_TYPE_PLAYLIST, BeatBoxPlaylist))
#define BEAT_BOX_PLAYLIST_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BEAT_BOX_TYPE_PLAYLIST, BeatBoxPlaylistClass))
#define BEAT_BOX_IS_PLAYLIST(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BEAT_BOX_TYPE_PLAYLIST))
#define BEAT_BOX_IS_PLAYLIST_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BEAT_BOX_TYPE_PLAYLIST))
#define BEAT_BOX_PLAYLIST_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BEAT_BOX_TYPE_PLAYLIST, BeatBoxPlaylistClass))

typedef struct _BeatBoxPlaylist BeatBoxPlaylist;
typedef struct _BeatBoxPlaylistClass BeatBoxPlaylistClass;

struct _BeatBoxSimilarPane {
	GtkVBox parent_instance;
	BeatBoxSimilarPanePrivate * priv;
	BeatBoxSong* _base;
	GeeLinkedList* _have;
};

struct _BeatBoxSimilarPaneClass {
	GtkVBoxClass parent_class;
	void (*refreshClicked) (BeatBoxSimilarPane* self);
	void (*transferPlaybackClicked) (BeatBoxSimilarPane* self);
	void (*saveClicked) (BeatBoxSimilarPane* self);
};

struct _BeatBoxSimilarPanePrivate {
	BeatBoxLibraryManager* _lm;
	BeatBoxLibraryWindow* _lw;
	BeatBoxSong* _next;
	GtkHBox* toolbar;
	GtkToolButton* refresh;
	GtkLabel* toolInfo;
	GtkToolButton* transferPlayback;
	GtkToolButton* save;
	BeatBoxMusicTreeView* similars;
	GtkEventBox* errorBox;
	GtkLabel* errorLabel;
};

typedef enum  {
	BEAT_BOX_LIBRARY_MANAGER_REPEAT_OFF,
	BEAT_BOX_LIBRARY_MANAGER_REPEAT_SONG,
	BEAT_BOX_LIBRARY_MANAGER_REPEAT_ALBUM,
	BEAT_BOX_LIBRARY_MANAGER_REPEAT_ARTIST,
	BEAT_BOX_LIBRARY_MANAGER_REPEAT_ALL
} BeatBoxLibraryManagerRepeat;

typedef enum  {
	BEAT_BOX_LIBRARY_MANAGER_SHUFFLE_OFF,
	BEAT_BOX_LIBRARY_MANAGER_SHUFFLE_ALL
} BeatBoxLibraryManagerShuffle;

struct _BeatBoxLibraryManager {
	GObject parent_instance;
	BeatBoxLibraryManagerPrivate * priv;
	BeatBoxLibraryWindow* lw;
	BeatBoxSettings* settings;
	BeatBoxDataBaseManager* dbm;
	BeatBoxDataBaseUpdater* dbu;
	BeatBoxFileOperator* fo;
	BeatBoxStreamPlayer* player;
	LastFMCore* lfm;
	BeatBoxTreeViewSetup* music_setup;
	BeatBoxTreeViewSetup* similar_setup;
	BeatBoxTreeViewSetup* queue_setup;
	BeatBoxTreeViewSetup* history_setup;
	gint _played_index;
	gint _current_index;
	gint _current_shuffled_index;
	BeatBoxSongInfo* song_info;
	gboolean playing;
	BeatBoxLibraryManagerRepeat repeat;
	BeatBoxLibraryManagerShuffle shuffle;
	gboolean doing_file_operations;
};

struct _BeatBoxLibraryManagerClass {
	GObjectClass parent_class;
	void (*dbProgress) (BeatBoxLibraryManager* self, const gchar* message, gdouble progress);
};

typedef enum  {
	BEAT_BOX_MUSIC_TREE_VIEW_HINT_MUSIC,
	BEAT_BOX_MUSIC_TREE_VIEW_HINT_SIMILAR,
	BEAT_BOX_MUSIC_TREE_VIEW_HINT_QUEUE,
	BEAT_BOX_MUSIC_TREE_VIEW_HINT_HISTORY,
	BEAT_BOX_MUSIC_TREE_VIEW_HINT_PLAYLIST,
	BEAT_BOX_MUSIC_TREE_VIEW_HINT_SMART_PLAYLIST
} BeatBoxMusicTreeViewHint;

struct _BeatBoxSongInfo {
	GObject parent_instance;
	BeatBoxSongInfoPrivate * priv;
	BeatBoxSong* song;
	LastFMArtistInfo* artist;
	LastFMTrackInfo* track;
	LastFMAlbumInfo* album;
};

struct _BeatBoxSongInfoClass {
	GObjectClass parent_class;
};


static gpointer beat_box_similar_pane_parent_class = NULL;

GType beat_box_similar_pane_get_type (void) G_GNUC_CONST;
GType beat_box_song_get_type (void) G_GNUC_CONST;
GType beat_box_library_manager_get_type (void) G_GNUC_CONST;
GType beat_box_library_window_get_type (void) G_GNUC_CONST;
GType beat_box_music_tree_view_get_type (void) G_GNUC_CONST;
#define BEAT_BOX_SIMILAR_PANE_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), BEAT_BOX_TYPE_SIMILAR_PANE, BeatBoxSimilarPanePrivate))
enum  {
	BEAT_BOX_SIMILAR_PANE_DUMMY_PROPERTY
};
BeatBoxSimilarPane* beat_box_similar_pane_new (BeatBoxLibraryManager* lm, BeatBoxLibraryWindow* lw);
BeatBoxSimilarPane* beat_box_similar_pane_construct (GType object_type, BeatBoxLibraryManager* lm, BeatBoxLibraryWindow* lw);
GType beat_box_settings_get_type (void) G_GNUC_CONST;
GType beat_box_data_base_manager_get_type (void) G_GNUC_CONST;
GType beat_box_data_base_updater_get_type (void) G_GNUC_CONST;
GType beat_box_file_operator_get_type (void) G_GNUC_CONST;
GType beat_box_stream_player_get_type (void) G_GNUC_CONST;
GType last_fm_core_get_type (void) G_GNUC_CONST;
GType beat_box_tree_view_setup_get_type (void) G_GNUC_CONST;
GType beat_box_song_info_get_type (void) G_GNUC_CONST;
GType beat_box_library_manager_repeat_get_type (void) G_GNUC_CONST;
GType beat_box_library_manager_shuffle_get_type (void) G_GNUC_CONST;
const gchar* beat_box_tree_view_setup_get_sort_column (BeatBoxTreeViewSetup* self);
GtkSortType beat_box_tree_view_setup_get_sort_direction (BeatBoxTreeViewSetup* self);
GType beat_box_music_tree_view_hint_get_type (void) G_GNUC_CONST;
BeatBoxMusicTreeView* beat_box_music_tree_view_new (BeatBoxLibraryManager* lmm, BeatBoxLibraryWindow* lww, const gchar* sort, GtkSortType dir, BeatBoxMusicTreeViewHint the_hint, gint id);
BeatBoxMusicTreeView* beat_box_music_tree_view_construct (GType object_type, BeatBoxLibraryManager* lmm, BeatBoxLibraryWindow* lww, const gchar* sort, GtkSortType dir, BeatBoxMusicTreeViewHint the_hint, gint id);
void beat_box_similar_pane_songPlayed (BeatBoxSimilarPane* self, gint id, gint old);
static void _beat_box_similar_pane_songPlayed_beat_box_library_manager_song_played (BeatBoxLibraryManager* _sender, gint id, gint old_id, gpointer self);
void beat_box_similar_pane_refreshClicked (BeatBoxSimilarPane* self);
static void _beat_box_similar_pane_refreshClicked_gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self);
void beat_box_similar_pane_transferPlaybackClicked (BeatBoxSimilarPane* self);
static void _beat_box_similar_pane_transferPlaybackClicked_gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self);
void beat_box_similar_pane_saveClicked (BeatBoxSimilarPane* self);
static void _beat_box_similar_pane_saveClicked_gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self);
void beat_box_similar_pane_initializeView (BeatBoxSimilarPane* self);
GeeCollection* beat_box_library_manager_current_songs (BeatBoxLibraryManager* self);
GeeSet* beat_box_music_tree_view_get_songs (BeatBoxMusicTreeView* self);
BeatBoxSong* beat_box_library_manager_song_from_id (BeatBoxLibraryManager* self, gint id);
const gchar* beat_box_song_get_title (BeatBoxSong* self);
const gchar* beat_box_song_get_artist (BeatBoxSong* self);
void beat_box_similar_pane_updateSongs (BeatBoxSimilarPane* self, BeatBoxSong* la, GeeLinkedList* have);
void beat_box_similar_pane_updateDisplay (BeatBoxSimilarPane* self);
void beat_box_music_tree_view_populateView (BeatBoxMusicTreeView* self, GeeCollection* songs, gboolean is_search);
GType last_fm_artist_info_get_type (void) G_GNUC_CONST;
GType last_fm_track_info_get_type (void) G_GNUC_CONST;
GType last_fm_album_info_get_type (void) G_GNUC_CONST;
gboolean beat_box_music_tree_view_updateSong (BeatBoxMusicTreeView* self, gint i);
gint beat_box_song_get_rowid (BeatBoxSong* self);
static void beat_box_similar_pane_real_refreshClicked (BeatBoxSimilarPane* self);
static void beat_box_similar_pane_real_transferPlaybackClicked (BeatBoxSimilarPane* self);
void beat_box_music_tree_view_setAsCurrentList (BeatBoxMusicTreeView* self, const gchar* current_song_path);
static void beat_box_similar_pane_real_saveClicked (BeatBoxSimilarPane* self);
BeatBoxPlaylist* beat_box_playlist_new (void);
BeatBoxPlaylist* beat_box_playlist_construct (GType object_type);
GType beat_box_playlist_get_type (void) G_GNUC_CONST;
void beat_box_playlist_set_name (BeatBoxPlaylist* self, const gchar* value);
void beat_box_playlist_addSong (BeatBoxPlaylist* self, BeatBoxSong* s);
gint beat_box_library_manager_add_playlist (BeatBoxLibraryManager* self, BeatBoxPlaylist* p);
void beat_box_library_window_addSideListItem (BeatBoxLibraryWindow* self, GObject* o);
static void beat_box_similar_pane_finalize (GObject* obj);


static gpointer _g_object_ref0 (gpointer self) {
	return self ? g_object_ref (self) : NULL;
}


static void _beat_box_similar_pane_songPlayed_beat_box_library_manager_song_played (BeatBoxLibraryManager* _sender, gint id, gint old_id, gpointer self) {
	beat_box_similar_pane_songPlayed (self, id, old_id);
}


static void _beat_box_similar_pane_refreshClicked_gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self) {
	beat_box_similar_pane_refreshClicked (self);
}


static void _beat_box_similar_pane_transferPlaybackClicked_gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self) {
	beat_box_similar_pane_transferPlaybackClicked (self);
}


static void _beat_box_similar_pane_saveClicked_gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self) {
	beat_box_similar_pane_saveClicked (self);
}


BeatBoxSimilarPane* beat_box_similar_pane_construct (GType object_type, BeatBoxLibraryManager* lm, BeatBoxLibraryWindow* lw) {
	BeatBoxSimilarPane * self = NULL;
	BeatBoxLibraryManager* _tmp0_;
	BeatBoxLibraryWindow* _tmp1_;
	GeeLinkedList* _tmp2_ = NULL;
	GtkLabel* _tmp3_ = NULL;
	GtkHBox* _tmp4_ = NULL;
	GtkToolButton* _tmp5_ = NULL;
	GtkToolButton* _tmp6_ = NULL;
	GtkLabel* _tmp7_ = NULL;
	GtkToolButton* _tmp8_ = NULL;
	const gchar* _tmp9_ = NULL;
	GtkSortType _tmp10_;
	BeatBoxMusicTreeView* _tmp11_ = NULL;
	GtkEventBox* _tmp12_ = NULL;
	GdkColor c = {0};
	GdkColor _tmp13_ = {0};
	GtkToolItem* _tmp14_ = NULL;
	GtkToolItem* toolInfoBin;
	GtkLabel* _tmp15_ = NULL;
	GtkLabel* _tmp16_;
	g_return_val_if_fail (lm != NULL, NULL);
	g_return_val_if_fail (lw != NULL, NULL);
	self = (BeatBoxSimilarPane*) g_object_new (object_type, NULL);
	_tmp0_ = _g_object_ref0 (lm);
	_g_object_unref0 (self->priv->_lm);
	self->priv->_lm = _tmp0_;
	_tmp1_ = _g_object_ref0 (lw);
	_g_object_unref0 (self->priv->_lw);
	self->priv->_lw = _tmp1_;
	_tmp2_ = gee_linked_list_new (G_TYPE_INT, NULL, NULL, NULL);
	_g_object_unref0 (self->_have);
	self->_have = _tmp2_;
	_tmp3_ = (GtkLabel*) gtk_label_new ("");
	_g_object_unref0 (self->priv->errorLabel);
	self->priv->errorLabel = g_object_ref_sink (_tmp3_);
	_tmp4_ = (GtkHBox*) gtk_hbox_new (FALSE, 0);
	_g_object_unref0 (self->priv->toolbar);
	self->priv->toolbar = g_object_ref_sink (_tmp4_);
	_tmp5_ = (GtkToolButton*) gtk_tool_button_new (NULL, "Update to Most Recent Song");
	_g_object_unref0 (self->priv->refresh);
	self->priv->refresh = g_object_ref_sink (_tmp5_);
	_tmp6_ = (GtkToolButton*) gtk_tool_button_new (NULL, "Start Playing These Songs");
	_g_object_unref0 (self->priv->transferPlayback);
	self->priv->transferPlayback = g_object_ref_sink (_tmp6_);
	_tmp7_ = (GtkLabel*) gtk_label_new ("");
	_g_object_unref0 (self->priv->toolInfo);
	self->priv->toolInfo = g_object_ref_sink (_tmp7_);
	_tmp8_ = (GtkToolButton*) gtk_tool_button_new (NULL, "Save as Playlist");
	_g_object_unref0 (self->priv->save);
	self->priv->save = g_object_ref_sink (_tmp8_);
	_tmp9_ = beat_box_tree_view_setup_get_sort_column (self->priv->_lm->similar_setup);
	_tmp10_ = beat_box_tree_view_setup_get_sort_direction (self->priv->_lm->similar_setup);
	_tmp11_ = beat_box_music_tree_view_new (lm, lw, _tmp9_, _tmp10_, BEAT_BOX_MUSIC_TREE_VIEW_HINT_SIMILAR, -1);
	_g_object_unref0 (self->priv->similars);
	self->priv->similars = g_object_ref_sink (_tmp11_);
	_tmp12_ = (GtkEventBox*) gtk_event_box_new ();
	_g_object_unref0 (self->priv->errorBox);
	self->priv->errorBox = g_object_ref_sink (_tmp12_);
	gtk_container_add ((GtkContainer*) self->priv->errorBox, (GtkWidget*) self->priv->errorLabel);
	memset (&c, 0, sizeof (GdkColor));
	gdk_color_parse ("#FFFFFF", &_tmp13_);
	c = _tmp13_;
	gtk_widget_modify_bg ((GtkWidget*) self->priv->errorBox, GTK_STATE_NORMAL, &c);
	g_object_set ((GtkMisc*) self->priv->errorLabel, "xalign", 0.5f, NULL);
	gtk_label_set_justify (self->priv->errorLabel, GTK_JUSTIFY_CENTER);
	gtk_label_set_markup (self->priv->errorLabel, "<span weight=\"bold\" size=\"larger\">Similar Song View</span>\n" \
"In this view, BeatBox will automatically find songs similar to the one" \
" you are playing. You can then start playing those songs, or save them" \
" for later.");
	_tmp14_ = gtk_tool_item_new ();
	toolInfoBin = g_object_ref_sink (_tmp14_);
	gtk_container_add ((GtkContainer*) toolInfoBin, (GtkWidget*) self->priv->toolInfo);
	gtk_tool_item_set_expand (toolInfoBin, TRUE);
	gtk_tool_item_set_tooltip_text ((GtkToolItem*) self->priv->refresh, "Refresh to show the most current song's similar songs");
	gtk_tool_item_set_tooltip_text ((GtkToolItem*) self->priv->transferPlayback, "Transfer playback to continue playing these songs");
	gtk_tool_item_set_tooltip_text ((GtkToolItem*) self->priv->save, "Save as a playlist");
	_tmp15_ = (GtkLabel*) gtk_label_new ("Update to Most Recent Song");
	_tmp16_ = g_object_ref_sink (_tmp15_);
	gtk_tool_button_set_label_widget (self->priv->refresh, (GtkWidget*) _tmp16_);
	_g_object_unref0 (_tmp16_);
	gtk_tool_button_set_label (self->priv->transferPlayback, "Start Playing These Songs");
	gtk_tool_button_set_label (self->priv->save, "Save as Playlist");
	gtk_box_pack_start ((GtkBox*) self->priv->toolbar, (GtkWidget*) self->priv->refresh, FALSE, FALSE, (guint) 0);
	gtk_box_pack_start ((GtkBox*) self->priv->toolbar, (GtkWidget*) self->priv->transferPlayback, FALSE, FALSE, (guint) 0);
	gtk_box_pack_end ((GtkBox*) self->priv->toolbar, (GtkWidget*) self->priv->save, FALSE, FALSE, (guint) 0);
	gtk_box_pack_start ((GtkBox*) self, (GtkWidget*) self->priv->errorBox, TRUE, TRUE, (guint) 0);
	gtk_box_pack_start ((GtkBox*) self, (GtkWidget*) self->priv->toolbar, FALSE, FALSE, (guint) 0);
	gtk_box_pack_start ((GtkBox*) self, (GtkWidget*) self->priv->similars, TRUE, TRUE, (guint) 0);
	gtk_widget_show_all ((GtkWidget*) self);
	g_signal_connect_object (self->priv->_lm, "song-played", (GCallback) _beat_box_similar_pane_songPlayed_beat_box_library_manager_song_played, self, 0);
	g_signal_connect_object (self->priv->refresh, "clicked", (GCallback) _beat_box_similar_pane_refreshClicked_gtk_tool_button_clicked, self, 0);
	g_signal_connect_object (self->priv->transferPlayback, "clicked", (GCallback) _beat_box_similar_pane_transferPlaybackClicked_gtk_tool_button_clicked, self, 0);
	g_signal_connect_object (self->priv->save, "clicked", (GCallback) _beat_box_similar_pane_saveClicked_gtk_tool_button_clicked, self, 0);
	gtk_widget_hide ((GtkWidget*) self->priv->transferPlayback);
	_g_object_unref0 (toolInfoBin);
	return self;
}


BeatBoxSimilarPane* beat_box_similar_pane_new (BeatBoxLibraryManager* lm, BeatBoxLibraryWindow* lw) {
	return beat_box_similar_pane_construct (BEAT_BOX_TYPE_SIMILAR_PANE, lm, lw);
}


void beat_box_similar_pane_initializeView (BeatBoxSimilarPane* self) {
	g_return_if_fail (self != NULL);
	gtk_widget_show ((GtkWidget*) self->priv->errorBox);
	gtk_widget_hide ((GtkWidget*) self->priv->similars);
	gtk_widget_hide ((GtkWidget*) self->priv->toolbar);
}


static gchar* string_replace (const gchar* self, const gchar* old, const gchar* replacement) {
	gchar* result = NULL;
	gchar* _tmp0_ = NULL;
	gchar* _tmp1_;
	GRegex* _tmp2_ = NULL;
	GRegex* _tmp3_;
	GRegex* regex;
	gchar* _tmp4_ = NULL;
	gchar* _tmp5_;
	GError * _inner_error_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (old != NULL, NULL);
	g_return_val_if_fail (replacement != NULL, NULL);
	_tmp0_ = g_regex_escape_string (old, -1);
	_tmp1_ = _tmp0_;
	_tmp2_ = g_regex_new (_tmp1_, 0, 0, &_inner_error_);
	_tmp3_ = _tmp2_;
	_g_free0 (_tmp1_);
	regex = _tmp3_;
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == G_REGEX_ERROR) {
			goto __catch77_g_regex_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return NULL;
	}
	_tmp4_ = g_regex_replace_literal (regex, self, (gssize) (-1), 0, replacement, 0, &_inner_error_);
	_tmp5_ = _tmp4_;
	if (_inner_error_ != NULL) {
		_g_regex_unref0 (regex);
		if (_inner_error_->domain == G_REGEX_ERROR) {
			goto __catch77_g_regex_error;
		}
		_g_regex_unref0 (regex);
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return NULL;
	}
	result = _tmp5_;
	_g_regex_unref0 (regex);
	return result;
	_g_regex_unref0 (regex);
	goto __finally77;
	__catch77_g_regex_error:
	{
		GError * e;
		e = _inner_error_;
		_inner_error_ = NULL;
		g_assert_not_reached ();
		_g_error_free0 (e);
	}
	__finally77:
	if (_inner_error_ != NULL) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return NULL;
	}
}


void beat_box_similar_pane_songPlayed (BeatBoxSimilarPane* self, gint id, gint old) {
	gboolean _tmp0_ = FALSE;
	GeeCollection* _tmp1_ = NULL;
	GeeCollection* _tmp2_;
	gint _tmp3_;
	GeeSet* _tmp4_ = NULL;
	GeeSet* _tmp5_;
	gint _tmp6_;
	gboolean _tmp7_;
	g_return_if_fail (self != NULL);
	_tmp1_ = beat_box_library_manager_current_songs (self->priv->_lm);
	_tmp2_ = _tmp1_;
	_tmp3_ = gee_collection_get_size (_tmp2_);
	_tmp4_ = beat_box_music_tree_view_get_songs (self->priv->similars);
	_tmp5_ = _tmp4_;
	_tmp6_ = gee_collection_get_size ((GeeCollection*) _tmp5_);
	_tmp7_ = _tmp3_ == _tmp6_;
	_g_object_unref0 (_tmp5_);
	_g_object_unref0 (_tmp2_);
	if (_tmp7_) {
		GeeCollection* _tmp8_ = NULL;
		GeeCollection* _tmp9_;
		GeeSet* _tmp10_ = NULL;
		GeeSet* _tmp11_;
		gboolean _tmp12_;
		_tmp8_ = beat_box_library_manager_current_songs (self->priv->_lm);
		_tmp9_ = _tmp8_;
		_tmp10_ = beat_box_music_tree_view_get_songs (self->priv->similars);
		_tmp11_ = _tmp10_;
		_tmp12_ = gee_collection_contains_all (_tmp9_, (GeeCollection*) _tmp11_);
		_tmp0_ = _tmp12_;
		_g_object_unref0 (_tmp11_);
		_g_object_unref0 (_tmp9_);
	} else {
		_tmp0_ = FALSE;
	}
	if (!_tmp0_) {
		BeatBoxSong* _tmp13_ = NULL;
		BeatBoxSong* _tmp14_;
		const gchar* _tmp15_ = NULL;
		gchar* _tmp16_ = NULL;
		gchar* _tmp17_;
		gchar* _tmp18_;
		gchar* _tmp19_;
		gchar* _tmp20_;
		gchar* _tmp21_;
		BeatBoxSong* _tmp22_ = NULL;
		BeatBoxSong* _tmp23_;
		const gchar* _tmp24_ = NULL;
		gchar* _tmp25_ = NULL;
		gchar* _tmp26_;
		gchar* _tmp27_;
		gchar* _tmp28_;
		gchar* _tmp29_;
		gchar* _tmp30_;
		gtk_widget_hide ((GtkWidget*) self->priv->similars);
		gtk_widget_hide ((GtkWidget*) self->priv->toolbar);
		_tmp13_ = beat_box_library_manager_song_from_id (self->priv->_lm, id);
		_tmp14_ = _tmp13_;
		_tmp15_ = beat_box_song_get_title (_tmp14_);
		_tmp16_ = string_replace (_tmp15_, "&", "&amp;");
		_tmp17_ = _tmp16_;
		_tmp18_ = g_strconcat ("<span weight=\"bold\" size=\"larger\">Loading similar songs</span>\n" \
"BeatBox is loading songs similar to ", _tmp17_, NULL);
		_tmp19_ = _tmp18_;
		_tmp20_ = g_strconcat (_tmp19_, " by ", NULL);
		_tmp21_ = _tmp20_;
		_tmp22_ = beat_box_library_manager_song_from_id (self->priv->_lm, id);
		_tmp23_ = _tmp22_;
		_tmp24_ = beat_box_song_get_artist (_tmp23_);
		_tmp25_ = string_replace (_tmp24_, "&", "&amp;");
		_tmp26_ = _tmp25_;
		_tmp27_ = g_strconcat (_tmp21_, _tmp26_, NULL);
		_tmp28_ = _tmp27_;
		_tmp29_ = g_strconcat (_tmp28_, "...", NULL);
		_tmp30_ = _tmp29_;
		gtk_label_set_markup (self->priv->errorLabel, _tmp30_);
		_g_free0 (_tmp30_);
		_g_free0 (_tmp28_);
		_g_free0 (_tmp26_);
		_g_object_unref0 (_tmp23_);
		_g_free0 (_tmp21_);
		_g_free0 (_tmp19_);
		_g_free0 (_tmp17_);
		_g_object_unref0 (_tmp14_);
		gtk_widget_show ((GtkWidget*) self->priv->errorBox);
	}
}


void beat_box_similar_pane_updateSongs (BeatBoxSimilarPane* self, BeatBoxSong* la, GeeLinkedList* have) {
	BeatBoxSong* _tmp0_;
	GeeLinkedList* _tmp1_;
	gint _tmp2_;
	gboolean _tmp17_ = FALSE;
	GeeCollection* _tmp18_ = NULL;
	GeeCollection* _tmp19_;
	gint _tmp20_;
	GeeSet* _tmp21_ = NULL;
	GeeSet* _tmp22_;
	gint _tmp23_;
	gboolean _tmp24_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (la != NULL);
	g_return_if_fail (have != NULL);
	_tmp0_ = _g_object_ref0 (la);
	_g_object_unref0 (self->priv->_next);
	self->priv->_next = _tmp0_;
	_tmp1_ = _g_object_ref0 (have);
	_g_object_unref0 (self->_have);
	self->_have = _tmp1_;
	_tmp2_ = gee_collection_get_size ((GeeCollection*) self->_have);
	if (_tmp2_ < 10) {
		const gchar* _tmp3_ = NULL;
		gchar* _tmp4_ = NULL;
		gchar* _tmp5_;
		gchar* _tmp6_;
		gchar* _tmp7_;
		gchar* _tmp8_;
		gchar* _tmp9_;
		const gchar* _tmp10_ = NULL;
		gchar* _tmp11_ = NULL;
		gchar* _tmp12_;
		gchar* _tmp13_;
		gchar* _tmp14_;
		gchar* _tmp15_;
		gchar* _tmp16_;
		_tmp3_ = beat_box_song_get_title (la);
		_tmp4_ = string_replace (_tmp3_, "&", "&amp;");
		_tmp5_ = _tmp4_;
		_tmp6_ = g_strconcat ("<span weight=\"bold\" size=\"larger\">No Similar Songs</span>\n" \
"BeatBox could not find songs similar to ", _tmp5_, NULL);
		_tmp7_ = _tmp6_;
		_tmp8_ = g_strconcat (_tmp7_, " by ", NULL);
		_tmp9_ = _tmp8_;
		_tmp10_ = beat_box_song_get_artist (la);
		_tmp11_ = string_replace (_tmp10_, "&", "&amp;");
		_tmp12_ = _tmp11_;
		_tmp13_ = g_strconcat (_tmp9_, _tmp12_, NULL);
		_tmp14_ = _tmp13_;
		_tmp15_ = g_strconcat (_tmp14_, ".\n" \
"You could have incorrect data, no internet connection, or non-mainstre" \
"am music.", NULL);
		_tmp16_ = _tmp15_;
		gtk_label_set_markup (self->priv->errorLabel, _tmp16_);
		_g_free0 (_tmp16_);
		_g_free0 (_tmp14_);
		_g_free0 (_tmp12_);
		_g_free0 (_tmp9_);
		_g_free0 (_tmp7_);
		_g_free0 (_tmp5_);
		gtk_widget_show ((GtkWidget*) self->priv->errorBox);
		gtk_widget_hide ((GtkWidget*) self->priv->similars);
		gtk_widget_hide ((GtkWidget*) self->priv->toolbar);
		return;
	} else {
		gtk_widget_hide ((GtkWidget*) self->priv->errorBox);
		gtk_widget_show ((GtkWidget*) self->priv->similars);
		gtk_widget_show ((GtkWidget*) self->priv->toolbar);
	}
	_tmp18_ = beat_box_library_manager_current_songs (self->priv->_lm);
	_tmp19_ = _tmp18_;
	_tmp20_ = gee_collection_get_size (_tmp19_);
	_tmp21_ = beat_box_music_tree_view_get_songs (self->priv->similars);
	_tmp22_ = _tmp21_;
	_tmp23_ = gee_collection_get_size ((GeeCollection*) _tmp22_);
	_tmp24_ = _tmp20_ == _tmp23_;
	_g_object_unref0 (_tmp22_);
	_g_object_unref0 (_tmp19_);
	if (_tmp24_) {
		GeeCollection* _tmp25_ = NULL;
		GeeCollection* _tmp26_;
		GeeSet* _tmp27_ = NULL;
		GeeSet* _tmp28_;
		gboolean _tmp29_;
		_tmp25_ = beat_box_library_manager_current_songs (self->priv->_lm);
		_tmp26_ = _tmp25_;
		_tmp27_ = beat_box_music_tree_view_get_songs (self->priv->similars);
		_tmp28_ = _tmp27_;
		_tmp29_ = gee_collection_contains_all (_tmp26_, (GeeCollection*) _tmp28_);
		_tmp17_ = _tmp29_;
		_g_object_unref0 (_tmp28_);
		_g_object_unref0 (_tmp26_);
	} else {
		_tmp17_ = FALSE;
	}
	if (!_tmp17_) {
		beat_box_similar_pane_updateDisplay (self);
	} else {
		const gchar* _tmp30_ = NULL;
		gchar* _tmp31_ = NULL;
		gchar* _tmp32_;
		gchar* _tmp33_;
		gchar* _tmp34_;
		gchar* _tmp35_;
		gchar* _tmp36_;
		const gchar* _tmp37_ = NULL;
		gchar* _tmp38_ = NULL;
		gchar* _tmp39_;
		gchar* _tmp40_;
		gchar* _tmp41_;
		gchar* _tmp42_;
		gchar* _tmp43_;
		gtk_widget_show ((GtkWidget*) self->priv->refresh);
		_tmp30_ = beat_box_song_get_title (self->priv->_next);
		_tmp31_ = string_replace (_tmp30_, "&", "&amp;");
		_tmp32_ = _tmp31_;
		_tmp33_ = g_strconcat ("Refresh to show songs similar to: <b>", _tmp32_, NULL);
		_tmp34_ = _tmp33_;
		_tmp35_ = g_strconcat (_tmp34_, "</b> by <b>", NULL);
		_tmp36_ = _tmp35_;
		_tmp37_ = beat_box_song_get_artist (self->priv->_next);
		_tmp38_ = string_replace (_tmp37_, "&", "&amp;");
		_tmp39_ = _tmp38_;
		_tmp40_ = g_strconcat (_tmp36_, _tmp39_, NULL);
		_tmp41_ = _tmp40_;
		_tmp42_ = g_strconcat (_tmp41_, "</b>", NULL);
		_tmp43_ = _tmp42_;
		gtk_tool_item_set_tooltip_markup ((GtkToolItem*) self->priv->refresh, _tmp43_);
		_g_free0 (_tmp43_);
		_g_free0 (_tmp41_);
		_g_free0 (_tmp39_);
		_g_free0 (_tmp36_);
		_g_free0 (_tmp34_);
		_g_free0 (_tmp32_);
		gtk_widget_hide ((GtkWidget*) self->priv->transferPlayback);
	}
}


void beat_box_similar_pane_updateDisplay (BeatBoxSimilarPane* self) {
	gboolean do_transfer;
	gboolean _tmp0_ = FALSE;
	GeeCollection* _tmp1_ = NULL;
	GeeCollection* _tmp2_;
	gint _tmp3_;
	GeeSet* _tmp4_ = NULL;
	GeeSet* _tmp5_;
	gint _tmp6_;
	gboolean _tmp7_;
	BeatBoxSong* _tmp13_;
	const gchar* _tmp14_ = NULL;
	gchar* _tmp15_ = NULL;
	gchar* _tmp16_;
	gchar* _tmp17_;
	gchar* _tmp18_;
	gchar* _tmp19_;
	gchar* _tmp20_;
	const gchar* _tmp21_ = NULL;
	gchar* _tmp22_ = NULL;
	gchar* _tmp23_;
	gchar* _tmp24_;
	gchar* _tmp25_;
	gchar* _tmp26_;
	gchar* _tmp27_;
	g_return_if_fail (self != NULL);
	do_transfer = FALSE;
	_tmp1_ = beat_box_library_manager_current_songs (self->priv->_lm);
	_tmp2_ = _tmp1_;
	_tmp3_ = gee_collection_get_size (_tmp2_);
	_tmp4_ = beat_box_music_tree_view_get_songs (self->priv->similars);
	_tmp5_ = _tmp4_;
	_tmp6_ = gee_collection_get_size ((GeeCollection*) _tmp5_);
	_tmp7_ = _tmp3_ == _tmp6_;
	_g_object_unref0 (_tmp5_);
	_g_object_unref0 (_tmp2_);
	if (_tmp7_) {
		GeeCollection* _tmp8_ = NULL;
		GeeCollection* _tmp9_;
		GeeSet* _tmp10_ = NULL;
		GeeSet* _tmp11_;
		gboolean _tmp12_;
		_tmp8_ = beat_box_library_manager_current_songs (self->priv->_lm);
		_tmp9_ = _tmp8_;
		_tmp10_ = beat_box_music_tree_view_get_songs (self->priv->similars);
		_tmp11_ = _tmp10_;
		_tmp12_ = gee_collection_contains_all (_tmp9_, (GeeCollection*) _tmp11_);
		_tmp0_ = _tmp12_;
		_g_object_unref0 (_tmp11_);
		_g_object_unref0 (_tmp9_);
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		do_transfer = TRUE;
	}
	beat_box_music_tree_view_populateView (self->priv->similars, (GeeCollection*) self->_have, FALSE);
	_tmp13_ = _g_object_ref0 (self->priv->_next);
	_g_object_unref0 (self->_base);
	self->_base = _tmp13_;
	_tmp14_ = beat_box_song_get_title (self->_base);
	_tmp15_ = string_replace (_tmp14_, "&", "&amp;");
	_tmp16_ = _tmp15_;
	_tmp17_ = g_strconcat ("Songs similar to <b>", _tmp16_, NULL);
	_tmp18_ = _tmp17_;
	_tmp19_ = g_strconcat (_tmp18_, "</b> by <b>", NULL);
	_tmp20_ = _tmp19_;
	_tmp21_ = beat_box_song_get_artist (self->_base);
	_tmp22_ = string_replace (_tmp21_, "&", "&amp;");
	_tmp23_ = _tmp22_;
	_tmp24_ = g_strconcat (_tmp20_, _tmp23_, NULL);
	_tmp25_ = _tmp24_;
	_tmp26_ = g_strconcat (_tmp25_, "</b>", NULL);
	_tmp27_ = _tmp26_;
	gtk_label_set_markup (self->priv->toolInfo, _tmp27_);
	_g_free0 (_tmp27_);
	_g_free0 (_tmp25_);
	_g_free0 (_tmp23_);
	_g_free0 (_tmp20_);
	_g_free0 (_tmp18_);
	_g_free0 (_tmp16_);
	gtk_widget_show ((GtkWidget*) self->priv->toolbar);
	gtk_widget_hide ((GtkWidget*) self->priv->refresh);
	gtk_widget_show ((GtkWidget*) self->priv->transferPlayback);
	gtk_widget_show ((GtkWidget*) self->priv->save);
	if (do_transfer) {
		beat_box_similar_pane_transferPlaybackClicked (self);
	}
	if (self->priv->_lm->song_info->song != NULL) {
		gint _tmp28_;
		_tmp28_ = beat_box_song_get_rowid (self->priv->_lm->song_info->song);
		beat_box_music_tree_view_updateSong (self->priv->similars, _tmp28_);
	}
}


static void beat_box_similar_pane_real_refreshClicked (BeatBoxSimilarPane* self) {
	g_return_if_fail (self != NULL);
	beat_box_similar_pane_updateDisplay (self);
}


void beat_box_similar_pane_refreshClicked (BeatBoxSimilarPane* self) {
	BEAT_BOX_SIMILAR_PANE_GET_CLASS (self)->refreshClicked (self);
}


static void beat_box_similar_pane_real_transferPlaybackClicked (BeatBoxSimilarPane* self) {
	g_return_if_fail (self != NULL);
	beat_box_music_tree_view_setAsCurrentList (self->priv->similars, NULL);
	gtk_widget_hide ((GtkWidget*) self->priv->transferPlayback);
}


void beat_box_similar_pane_transferPlaybackClicked (BeatBoxSimilarPane* self) {
	BEAT_BOX_SIMILAR_PANE_GET_CLASS (self)->transferPlaybackClicked (self);
}


static void beat_box_similar_pane_real_saveClicked (BeatBoxSimilarPane* self) {
	BeatBoxPlaylist* _tmp0_ = NULL;
	BeatBoxPlaylist* p;
	const gchar* _tmp1_ = NULL;
	gchar* _tmp2_;
	gchar* _tmp3_;
	gboolean _tmp12_ = FALSE;
	gboolean _tmp13_;
	g_return_if_fail (self != NULL);
	_tmp0_ = beat_box_playlist_new ();
	p = _tmp0_;
	_tmp1_ = beat_box_song_get_title (self->_base);
	_tmp2_ = g_strconcat ("Similar to ", _tmp1_, NULL);
	_tmp3_ = _tmp2_;
	beat_box_playlist_set_name (p, _tmp3_);
	_g_free0 (_tmp3_);
	{
		GeeSet* _tmp4_ = NULL;
		GeeSet* _tmp5_;
		GeeIterator* _tmp6_ = NULL;
		GeeIterator* _tmp7_;
		GeeIterator* _id_it;
		_tmp4_ = beat_box_music_tree_view_get_songs (self->priv->similars);
		_tmp5_ = _tmp4_;
		_tmp6_ = gee_iterable_iterator ((GeeIterable*) _tmp5_);
		_tmp7_ = _tmp6_;
		_g_object_unref0 (_tmp5_);
		_id_it = _tmp7_;
		while (TRUE) {
			gboolean _tmp8_;
			gpointer _tmp9_ = NULL;
			gint id;
			BeatBoxSong* _tmp10_ = NULL;
			BeatBoxSong* _tmp11_;
			_tmp8_ = gee_iterator_next (_id_it);
			if (!_tmp8_) {
				break;
			}
			_tmp9_ = gee_iterator_get (_id_it);
			id = GPOINTER_TO_INT (_tmp9_);
			_tmp10_ = beat_box_library_manager_song_from_id (self->priv->_lm, id);
			_tmp11_ = _tmp10_;
			beat_box_playlist_addSong (p, _tmp11_);
			_g_object_unref0 (_tmp11_);
		}
		_g_object_unref0 (_id_it);
	}
	beat_box_library_manager_add_playlist (self->priv->_lm, p);
	beat_box_library_window_addSideListItem (self->priv->_lw, (GObject*) p);
	gtk_widget_hide ((GtkWidget*) self->priv->save);
	_tmp13_ = gtk_widget_get_visible ((GtkWidget*) self->priv->refresh);
	if (_tmp13_ == FALSE) {
		gboolean _tmp14_;
		_tmp14_ = gtk_widget_get_visible ((GtkWidget*) self->priv->transferPlayback);
		_tmp12_ = _tmp14_ == FALSE;
	} else {
		_tmp12_ = FALSE;
	}
	if (_tmp12_) {
		gtk_widget_hide ((GtkWidget*) self->priv->toolbar);
	}
	_g_object_unref0 (p);
}


void beat_box_similar_pane_saveClicked (BeatBoxSimilarPane* self) {
	BEAT_BOX_SIMILAR_PANE_GET_CLASS (self)->saveClicked (self);
}


static void beat_box_similar_pane_class_init (BeatBoxSimilarPaneClass * klass) {
	beat_box_similar_pane_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (BeatBoxSimilarPanePrivate));
	BEAT_BOX_SIMILAR_PANE_CLASS (klass)->refreshClicked = beat_box_similar_pane_real_refreshClicked;
	BEAT_BOX_SIMILAR_PANE_CLASS (klass)->transferPlaybackClicked = beat_box_similar_pane_real_transferPlaybackClicked;
	BEAT_BOX_SIMILAR_PANE_CLASS (klass)->saveClicked = beat_box_similar_pane_real_saveClicked;
	G_OBJECT_CLASS (klass)->finalize = beat_box_similar_pane_finalize;
	g_signal_new ("playlist_saved", BEAT_BOX_TYPE_SIMILAR_PANE, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__OBJECT, G_TYPE_NONE, 1, BEAT_BOX_TYPE_PLAYLIST);
}


static void beat_box_similar_pane_instance_init (BeatBoxSimilarPane * self) {
	self->priv = BEAT_BOX_SIMILAR_PANE_GET_PRIVATE (self);
}


static void beat_box_similar_pane_finalize (GObject* obj) {
	BeatBoxSimilarPane * self;
	self = BEAT_BOX_SIMILAR_PANE (obj);
	_g_object_unref0 (self->priv->_lm);
	_g_object_unref0 (self->priv->_lw);
	_g_object_unref0 (self->_base);
	_g_object_unref0 (self->priv->_next);
	_g_object_unref0 (self->_have);
	_g_object_unref0 (self->priv->toolbar);
	_g_object_unref0 (self->priv->refresh);
	_g_object_unref0 (self->priv->toolInfo);
	_g_object_unref0 (self->priv->transferPlayback);
	_g_object_unref0 (self->priv->save);
	_g_object_unref0 (self->priv->similars);
	_g_object_unref0 (self->priv->errorBox);
	_g_object_unref0 (self->priv->errorLabel);
	G_OBJECT_CLASS (beat_box_similar_pane_parent_class)->finalize (obj);
}


GType beat_box_similar_pane_get_type (void) {
	static volatile gsize beat_box_similar_pane_type_id__volatile = 0;
	if (g_once_init_enter (&beat_box_similar_pane_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (BeatBoxSimilarPaneClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) beat_box_similar_pane_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (BeatBoxSimilarPane), 0, (GInstanceInitFunc) beat_box_similar_pane_instance_init, NULL };
		GType beat_box_similar_pane_type_id;
		beat_box_similar_pane_type_id = g_type_register_static (GTK_TYPE_VBOX, "BeatBoxSimilarPane", &g_define_type_info, 0);
		g_once_init_leave (&beat_box_similar_pane_type_id__volatile, beat_box_similar_pane_type_id);
	}
	return beat_box_similar_pane_type_id__volatile;
}



