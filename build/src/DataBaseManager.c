/* DataBaseManager.c generated by valac 0.11.5, the Vala compiler
 * generated from DataBaseManager.vala, do not modify */


#include <glib.h>
#include <glib-object.h>
#include <SQLHeavy.h>
#include <stdio.h>
#include <gio/gio.h>
#include <stdlib.h>
#include <string.h>
#include <gee.h>
#include <gtk/gtk.h>
#include <float.h>
#include <math.h>


#define BEAT_BOX_TYPE_DATA_BASE_MANAGER (beat_box_data_base_manager_get_type ())
#define BEAT_BOX_DATA_BASE_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BEAT_BOX_TYPE_DATA_BASE_MANAGER, BeatBoxDataBaseManager))
#define BEAT_BOX_DATA_BASE_MANAGER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BEAT_BOX_TYPE_DATA_BASE_MANAGER, BeatBoxDataBaseManagerClass))
#define BEAT_BOX_IS_DATA_BASE_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BEAT_BOX_TYPE_DATA_BASE_MANAGER))
#define BEAT_BOX_IS_DATA_BASE_MANAGER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BEAT_BOX_TYPE_DATA_BASE_MANAGER))
#define BEAT_BOX_DATA_BASE_MANAGER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BEAT_BOX_TYPE_DATA_BASE_MANAGER, BeatBoxDataBaseManagerClass))

typedef struct _BeatBoxDataBaseManager BeatBoxDataBaseManager;
typedef struct _BeatBoxDataBaseManagerClass BeatBoxDataBaseManagerClass;
typedef struct _BeatBoxDataBaseManagerPrivate BeatBoxDataBaseManagerPrivate;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))

#define BEAT_BOX_TYPE_SONG (beat_box_song_get_type ())
#define BEAT_BOX_SONG(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BEAT_BOX_TYPE_SONG, BeatBoxSong))
#define BEAT_BOX_SONG_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BEAT_BOX_TYPE_SONG, BeatBoxSongClass))
#define BEAT_BOX_IS_SONG(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BEAT_BOX_TYPE_SONG))
#define BEAT_BOX_IS_SONG_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BEAT_BOX_TYPE_SONG))
#define BEAT_BOX_SONG_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BEAT_BOX_TYPE_SONG, BeatBoxSongClass))

typedef struct _BeatBoxSong BeatBoxSong;
typedef struct _BeatBoxSongClass BeatBoxSongClass;

#define BEAT_BOX_TYPE_PLAYLIST (beat_box_playlist_get_type ())
#define BEAT_BOX_PLAYLIST(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BEAT_BOX_TYPE_PLAYLIST, BeatBoxPlaylist))
#define BEAT_BOX_PLAYLIST_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BEAT_BOX_TYPE_PLAYLIST, BeatBoxPlaylistClass))
#define BEAT_BOX_IS_PLAYLIST(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BEAT_BOX_TYPE_PLAYLIST))
#define BEAT_BOX_IS_PLAYLIST_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BEAT_BOX_TYPE_PLAYLIST))
#define BEAT_BOX_PLAYLIST_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BEAT_BOX_TYPE_PLAYLIST, BeatBoxPlaylistClass))

typedef struct _BeatBoxPlaylist BeatBoxPlaylist;
typedef struct _BeatBoxPlaylistClass BeatBoxPlaylistClass;

#define BEAT_BOX_TYPE_SMART_PLAYLIST (beat_box_smart_playlist_get_type ())
#define BEAT_BOX_SMART_PLAYLIST(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BEAT_BOX_TYPE_SMART_PLAYLIST, BeatBoxSmartPlaylist))
#define BEAT_BOX_SMART_PLAYLIST_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BEAT_BOX_TYPE_SMART_PLAYLIST, BeatBoxSmartPlaylistClass))
#define BEAT_BOX_IS_SMART_PLAYLIST(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BEAT_BOX_TYPE_SMART_PLAYLIST))
#define BEAT_BOX_IS_SMART_PLAYLIST_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BEAT_BOX_TYPE_SMART_PLAYLIST))
#define BEAT_BOX_SMART_PLAYLIST_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BEAT_BOX_TYPE_SMART_PLAYLIST, BeatBoxSmartPlaylistClass))

typedef struct _BeatBoxSmartPlaylist BeatBoxSmartPlaylist;
typedef struct _BeatBoxSmartPlaylistClass BeatBoxSmartPlaylistClass;

#define LAST_FM_TYPE_ALBUM_INFO (last_fm_album_info_get_type ())
#define LAST_FM_ALBUM_INFO(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), LAST_FM_TYPE_ALBUM_INFO, LastFMAlbumInfo))
#define LAST_FM_ALBUM_INFO_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), LAST_FM_TYPE_ALBUM_INFO, LastFMAlbumInfoClass))
#define LAST_FM_IS_ALBUM_INFO(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), LAST_FM_TYPE_ALBUM_INFO))
#define LAST_FM_IS_ALBUM_INFO_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), LAST_FM_TYPE_ALBUM_INFO))
#define LAST_FM_ALBUM_INFO_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), LAST_FM_TYPE_ALBUM_INFO, LastFMAlbumInfoClass))

typedef struct _LastFMAlbumInfo LastFMAlbumInfo;
typedef struct _LastFMAlbumInfoClass LastFMAlbumInfoClass;

#define LAST_FM_TYPE_TAG (last_fm_tag_get_type ())
#define LAST_FM_TAG(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), LAST_FM_TYPE_TAG, LastFMTag))
#define LAST_FM_TAG_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), LAST_FM_TYPE_TAG, LastFMTagClass))
#define LAST_FM_IS_TAG(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), LAST_FM_TYPE_TAG))
#define LAST_FM_IS_TAG_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), LAST_FM_TYPE_TAG))
#define LAST_FM_TAG_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), LAST_FM_TYPE_TAG, LastFMTagClass))

typedef struct _LastFMTag LastFMTag;
typedef struct _LastFMTagClass LastFMTagClass;

#define LAST_FM_TYPE_IMAGE (last_fm_image_get_type ())
#define LAST_FM_IMAGE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), LAST_FM_TYPE_IMAGE, LastFMImage))
#define LAST_FM_IMAGE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), LAST_FM_TYPE_IMAGE, LastFMImageClass))
#define LAST_FM_IS_IMAGE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), LAST_FM_TYPE_IMAGE))
#define LAST_FM_IS_IMAGE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), LAST_FM_TYPE_IMAGE))
#define LAST_FM_IMAGE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), LAST_FM_TYPE_IMAGE, LastFMImageClass))

typedef struct _LastFMImage LastFMImage;
typedef struct _LastFMImageClass LastFMImageClass;

#define LAST_FM_TYPE_ARTIST_INFO (last_fm_artist_info_get_type ())
#define LAST_FM_ARTIST_INFO(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), LAST_FM_TYPE_ARTIST_INFO, LastFMArtistInfo))
#define LAST_FM_ARTIST_INFO_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), LAST_FM_TYPE_ARTIST_INFO, LastFMArtistInfoClass))
#define LAST_FM_IS_ARTIST_INFO(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), LAST_FM_TYPE_ARTIST_INFO))
#define LAST_FM_IS_ARTIST_INFO_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), LAST_FM_TYPE_ARTIST_INFO))
#define LAST_FM_ARTIST_INFO_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), LAST_FM_TYPE_ARTIST_INFO, LastFMArtistInfoClass))

typedef struct _LastFMArtistInfo LastFMArtistInfo;
typedef struct _LastFMArtistInfoClass LastFMArtistInfoClass;

#define LAST_FM_TYPE_TRACK_INFO (last_fm_track_info_get_type ())
#define LAST_FM_TRACK_INFO(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), LAST_FM_TYPE_TRACK_INFO, LastFMTrackInfo))
#define LAST_FM_TRACK_INFO_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), LAST_FM_TYPE_TRACK_INFO, LastFMTrackInfoClass))
#define LAST_FM_IS_TRACK_INFO(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), LAST_FM_TYPE_TRACK_INFO))
#define LAST_FM_IS_TRACK_INFO_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), LAST_FM_TYPE_TRACK_INFO))
#define LAST_FM_TRACK_INFO_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), LAST_FM_TYPE_TRACK_INFO, LastFMTrackInfoClass))

typedef struct _LastFMTrackInfo LastFMTrackInfo;
typedef struct _LastFMTrackInfoClass LastFMTrackInfoClass;

struct _BeatBoxDataBaseManager {
	GObject parent_instance;
	BeatBoxDataBaseManagerPrivate * priv;
};

struct _BeatBoxDataBaseManagerClass {
	GObjectClass parent_class;
};

struct _BeatBoxDataBaseManagerPrivate {
	SQLHeavyDatabase* _db;
	SQLHeavyTransaction* transaction;
	SQLHeavyQuery* query;
	gboolean write;
	gboolean create;
	gint index;
	gint item_count;
};


static gpointer beat_box_data_base_manager_parent_class = NULL;

GType beat_box_data_base_manager_get_type (void) G_GNUC_CONST;
#define BEAT_BOX_DATA_BASE_MANAGER_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), BEAT_BOX_TYPE_DATA_BASE_MANAGER, BeatBoxDataBaseManagerPrivate))
enum  {
	BEAT_BOX_DATA_BASE_MANAGER_DUMMY_PROPERTY
};
BeatBoxDataBaseManager* beat_box_data_base_manager_new (gboolean write, gboolean create);
BeatBoxDataBaseManager* beat_box_data_base_manager_construct (GType object_type, gboolean write, gboolean create);
void beat_box_data_base_manager_create_db (BeatBoxDataBaseManager* self);
void beat_box_data_base_manager_initialize_columns (BeatBoxDataBaseManager* self);
void beat_box_data_base_manager_load_db (BeatBoxDataBaseManager* self);
void beat_box_data_base_manager_resetProgress (BeatBoxDataBaseManager* self, gint items);
gchar* beat_box_data_base_manager_db_location (BeatBoxDataBaseManager* self);
void beat_box_data_base_manager_begin_transaction (BeatBoxDataBaseManager* self, const gchar* script);
void beat_box_data_base_manager_commit_transaction (BeatBoxDataBaseManager* self);
void beat_box_data_base_manager_drop_table (BeatBoxDataBaseManager* self, const gchar* table);
GeeArrayList* beat_box_data_base_manager_load_song_list_columns (BeatBoxDataBaseManager* self);
void beat_box_data_base_manager_save_song_list_columns (BeatBoxDataBaseManager* self, GeeArrayList* columns);
GType beat_box_song_get_type (void) G_GNUC_CONST;
GeeArrayList* beat_box_data_base_manager_load_songs (BeatBoxDataBaseManager* self);
BeatBoxSong* beat_box_song_new (const gchar* file);
BeatBoxSong* beat_box_song_construct (GType object_type, const gchar* file);
void beat_box_song_set_rowid (BeatBoxSong* self, gint value);
void beat_box_song_set_title (BeatBoxSong* self, const gchar* value);
void beat_box_song_set_artist (BeatBoxSong* self, const gchar* value);
void beat_box_song_set_album (BeatBoxSong* self, const gchar* value);
void beat_box_song_set_genre (BeatBoxSong* self, const gchar* value);
void beat_box_song_set_comment (BeatBoxSong* self, const gchar* value);
void beat_box_song_set_year (BeatBoxSong* self, gint value);
void beat_box_song_set_track (BeatBoxSong* self, gint value);
void beat_box_song_set_bitrate (BeatBoxSong* self, gint value);
void beat_box_song_set_length (BeatBoxSong* self, gint value);
void beat_box_song_set_samplerate (BeatBoxSong* self, gint value);
void beat_box_song_set_rating (BeatBoxSong* self, gint value);
void beat_box_song_set_play_count (BeatBoxSong* self, gint value);
void beat_box_song_set_date_added (BeatBoxSong* self, gint value);
void beat_box_song_set_last_played (BeatBoxSong* self, gint value);
void beat_box_data_base_manager_save_songs (BeatBoxDataBaseManager* self, GeeCollection* songs);
const gchar* beat_box_song_get_file (BeatBoxSong* self);
const gchar* beat_box_song_get_title (BeatBoxSong* self);
const gchar* beat_box_song_get_artist (BeatBoxSong* self);
const gchar* beat_box_song_get_album (BeatBoxSong* self);
const gchar* beat_box_song_get_genre (BeatBoxSong* self);
const gchar* beat_box_song_get_comment (BeatBoxSong* self);
gint beat_box_song_get_year (BeatBoxSong* self);
gint beat_box_song_get_track (BeatBoxSong* self);
gint beat_box_song_get_bitrate (BeatBoxSong* self);
gint beat_box_song_get_length (BeatBoxSong* self);
gint beat_box_song_get_samplerate (BeatBoxSong* self);
gint beat_box_song_get_rating (BeatBoxSong* self);
gint beat_box_song_get_play_count (BeatBoxSong* self);
gint beat_box_song_get_date_added (BeatBoxSong* self);
gint beat_box_song_get_last_played (BeatBoxSong* self);
void beat_box_data_base_manager_add_song_mass (BeatBoxDataBaseManager* self, BeatBoxSong* s, gboolean saving);
gint beat_box_song_get_rowid (BeatBoxSong* self);
void beat_box_data_base_manager_remove_songs (BeatBoxDataBaseManager* self, GeeCollection* songs);
GType beat_box_playlist_get_type (void) G_GNUC_CONST;
GeeArrayList* beat_box_data_base_manager_load_playlists (BeatBoxDataBaseManager* self);
BeatBoxPlaylist* beat_box_playlist_new_with_info (gint rowid, const gchar* name);
BeatBoxPlaylist* beat_box_playlist_construct_with_info (GType object_type, gint rowid, const gchar* name);
void beat_box_playlist_songs_from_string (BeatBoxPlaylist* self, const gchar* songs);
void beat_box_data_base_manager_save_playlists (BeatBoxDataBaseManager* self, GeeCollection* playlists);
const gchar* beat_box_playlist_get_name (BeatBoxPlaylist* self);
gchar* beat_box_playlist_songs_to_string (BeatBoxPlaylist* self);
GType beat_box_smart_playlist_get_type (void) G_GNUC_CONST;
GeeArrayList* beat_box_data_base_manager_load_smart_playlists (BeatBoxDataBaseManager* self);
BeatBoxSmartPlaylist* beat_box_smart_playlist_new (void);
BeatBoxSmartPlaylist* beat_box_smart_playlist_construct (GType object_type);
void beat_box_smart_playlist_set_rowid (BeatBoxSmartPlaylist* self, gint value);
void beat_box_smart_playlist_set_name (BeatBoxSmartPlaylist* self, const gchar* value);
void beat_box_smart_playlist_set_conditional (BeatBoxSmartPlaylist* self, const gchar* value);
void beat_box_smart_playlist_queries_from_string (BeatBoxSmartPlaylist* self, const gchar* q);
void beat_box_data_base_manager_save_smart_playlists (BeatBoxDataBaseManager* self, GeeCollection* smarts);
const gchar* beat_box_smart_playlist_get_name (BeatBoxSmartPlaylist* self);
const gchar* beat_box_smart_playlist_get_conditional (BeatBoxSmartPlaylist* self);
gchar* beat_box_smart_playlist_queries_to_string (BeatBoxSmartPlaylist* self);
GType last_fm_album_info_get_type (void) G_GNUC_CONST;
void beat_box_data_base_manager_save_albums (BeatBoxDataBaseManager* self, GeeCollection* albums);
const gchar* last_fm_album_info_get_name (LastFMAlbumInfo* self);
const gchar* last_fm_album_info_get_artist (LastFMAlbumInfo* self);
const gchar* last_fm_album_info_get_mbid (LastFMAlbumInfo* self);
const gchar* last_fm_album_info_get_url (LastFMAlbumInfo* self);
const gchar* last_fm_album_info_get_releasedate (LastFMAlbumInfo* self);
gint last_fm_album_info_get_listeners (LastFMAlbumInfo* self);
gint last_fm_album_info_get_playcount (LastFMAlbumInfo* self);
GType last_fm_tag_get_type (void) G_GNUC_CONST;
GeeArrayList* last_fm_album_info_tags (LastFMAlbumInfo* self);
const gchar* last_fm_tag_get_tag (LastFMTag* self);
const gchar* last_fm_tag_get_url (LastFMTag* self);
GType last_fm_image_get_type (void) G_GNUC_CONST;
LastFMImage* last_fm_album_info_get_url_image (LastFMAlbumInfo* self);
gchar* last_fm_image_to_string (LastFMImage* self);
GeeCollection* beat_box_data_base_manager_load_albums (BeatBoxDataBaseManager* self);
LastFMAlbumInfo* last_fm_album_info_new_basic (void);
LastFMAlbumInfo* last_fm_album_info_construct_basic (GType object_type);
void last_fm_album_info_set_name (LastFMAlbumInfo* self, const gchar* value);
void last_fm_album_info_set_artist (LastFMAlbumInfo* self, const gchar* value);
void last_fm_album_info_set_mbid (LastFMAlbumInfo* self, const gchar* value);
void last_fm_album_info_set_url (LastFMAlbumInfo* self, const gchar* value);
void last_fm_album_info_set_releasedate (LastFMAlbumInfo* self, const gchar* value);
void last_fm_album_info_set_listeners (LastFMAlbumInfo* self, gint value);
void last_fm_album_info_set_playcount (LastFMAlbumInfo* self, gint value);
LastFMTag* last_fm_tag_new_with_string_and_url (const gchar* tag, const gchar* url);
LastFMTag* last_fm_tag_construct_with_string_and_url (GType object_type, const gchar* tag, const gchar* url);
void last_fm_album_info_addTag (LastFMAlbumInfo* self, LastFMTag* t);
LastFMImage* last_fm_image_new_with_import_string (const gchar* s);
LastFMImage* last_fm_image_construct_with_import_string (GType object_type, const gchar* s);
void last_fm_album_info_set_url_image (LastFMAlbumInfo* self, LastFMImage* value);
LastFMImage* last_fm_image_new_basic (void);
LastFMImage* last_fm_image_construct_basic (GType object_type);
GType last_fm_artist_info_get_type (void) G_GNUC_CONST;
GeeCollection* beat_box_data_base_manager_load_artists (BeatBoxDataBaseManager* self);
LastFMArtistInfo* last_fm_artist_info_new_basic (void);
LastFMArtistInfo* last_fm_artist_info_construct_basic (GType object_type);
void last_fm_artist_info_set_name (LastFMArtistInfo* self, const gchar* value);
void last_fm_artist_info_set_mbid (LastFMArtistInfo* self, const gchar* value);
void last_fm_artist_info_set_url (LastFMArtistInfo* self, const gchar* value);
void last_fm_artist_info_set_streamable (LastFMArtistInfo* self, gint value);
void last_fm_artist_info_set_listeners (LastFMArtistInfo* self, gint value);
void last_fm_artist_info_set_playcount (LastFMArtistInfo* self, gint value);
void last_fm_artist_info_set_published (LastFMArtistInfo* self, const gchar* value);
void last_fm_artist_info_set_summary (LastFMArtistInfo* self, const gchar* value);
void last_fm_artist_info_set_content (LastFMArtistInfo* self, const gchar* value);
void last_fm_artist_info_addTag (LastFMArtistInfo* self, LastFMTag* t);
LastFMArtistInfo* last_fm_artist_info_new_with_artist_and_url (const gchar* name, const gchar* url);
LastFMArtistInfo* last_fm_artist_info_construct_with_artist_and_url (GType object_type, const gchar* name, const gchar* url);
void last_fm_artist_info_addSimilarArtist (LastFMArtistInfo* self, LastFMArtistInfo* artist);
void last_fm_artist_info_set_url_image (LastFMArtistInfo* self, LastFMImage* value);
void beat_box_data_base_manager_save_artists (BeatBoxDataBaseManager* self, GeeCollection* artists);
const gchar* last_fm_artist_info_get_name (LastFMArtistInfo* self);
const gchar* last_fm_artist_info_get_mbid (LastFMArtistInfo* self);
const gchar* last_fm_artist_info_get_url (LastFMArtistInfo* self);
gint last_fm_artist_info_get_streamable (LastFMArtistInfo* self);
gint last_fm_artist_info_get_listeners (LastFMArtistInfo* self);
gint last_fm_artist_info_get_playcount (LastFMArtistInfo* self);
const gchar* last_fm_artist_info_get_published (LastFMArtistInfo* self);
const gchar* last_fm_artist_info_get_summary (LastFMArtistInfo* self);
const gchar* last_fm_artist_info_get_content (LastFMArtistInfo* self);
GeeArrayList* last_fm_artist_info_tags (LastFMArtistInfo* self);
GeeArrayList* last_fm_artist_info_similarArtists (LastFMArtistInfo* self);
LastFMImage* last_fm_artist_info_get_url_image (LastFMArtistInfo* self);
GType last_fm_track_info_get_type (void) G_GNUC_CONST;
GeeCollection* beat_box_data_base_manager_load_tracks (BeatBoxDataBaseManager* self);
LastFMTrackInfo* last_fm_track_info_new_basic (void);
LastFMTrackInfo* last_fm_track_info_construct_basic (GType object_type);
void last_fm_track_info_set_id (LastFMTrackInfo* self, gint value);
void last_fm_track_info_set_name (LastFMTrackInfo* self, const gchar* value);
void last_fm_track_info_set_artist (LastFMTrackInfo* self, const gchar* value);
void last_fm_track_info_set_url (LastFMTrackInfo* self, const gchar* value);
void last_fm_track_info_set_duration (LastFMTrackInfo* self, gint value);
void last_fm_track_info_set_streamable (LastFMTrackInfo* self, gint value);
void last_fm_track_info_set_listeners (LastFMTrackInfo* self, gint value);
void last_fm_track_info_set_playcount (LastFMTrackInfo* self, gint value);
void last_fm_track_info_set_summary (LastFMTrackInfo* self, const gchar* value);
void last_fm_track_info_set_content (LastFMTrackInfo* self, const gchar* value);
void last_fm_track_info_addTag (LastFMTrackInfo* self, LastFMTag* t);
void beat_box_data_base_manager_save_tracks (BeatBoxDataBaseManager* self, GeeCollection* tracks);
gint last_fm_track_info_get_id (LastFMTrackInfo* self);
const gchar* last_fm_track_info_get_name (LastFMTrackInfo* self);
const gchar* last_fm_track_info_get_artist (LastFMTrackInfo* self);
const gchar* last_fm_track_info_get_url (LastFMTrackInfo* self);
gint last_fm_track_info_get_duration (LastFMTrackInfo* self);
gint last_fm_track_info_get_streamable (LastFMTrackInfo* self);
gint last_fm_track_info_get_listeners (LastFMTrackInfo* self);
gint last_fm_track_info_get_playcount (LastFMTrackInfo* self);
const gchar* last_fm_track_info_get_summary (LastFMTrackInfo* self);
const gchar* last_fm_track_info_get_content (LastFMTrackInfo* self);
GeeArrayList* last_fm_track_info_tags (LastFMTrackInfo* self);
static void g_cclosure_user_marshal_VOID__STRING_DOUBLE (GClosure * closure, GValue * return_value, guint n_param_values, const GValue * param_values, gpointer invocation_hint, gpointer marshal_data);
static void beat_box_data_base_manager_finalize (GObject* obj);
static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func);
static gint _vala_array_length (gpointer array);


/** Creates a new DatabaseManager
 * @param write True if has write access
 * @param create True to have create access
 */
BeatBoxDataBaseManager* beat_box_data_base_manager_construct (GType object_type, gboolean write, gboolean create) {
	BeatBoxDataBaseManager * self = NULL;
	self = (BeatBoxDataBaseManager*) g_object_new (object_type, NULL);
	self->priv->write = write;
	self->priv->create = create;
	return self;
}


BeatBoxDataBaseManager* beat_box_data_base_manager_new (gboolean write, gboolean create) {
	return beat_box_data_base_manager_construct (BEAT_BOX_TYPE_DATA_BASE_MANAGER, write, create);
}


/** Used on the first run. Creates all the tables and initializes them
 */
void beat_box_data_base_manager_create_db (BeatBoxDataBaseManager* self) {
	GError * _inner_error_ = NULL;
	g_return_if_fail (self != NULL);
	sql_heavy_queryable_execute ((SQLHeavyQueryable*) self->priv->_db, "CREATE TABLE song_list_columns (`title` TEXT,`visible` INT,`width` INT" \
")", (gssize) (-1), &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch0_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	beat_box_data_base_manager_initialize_columns (self);
	sql_heavy_queryable_execute ((SQLHeavyQueryable*) self->priv->_db, "CREATE TABLE playlists (`name` TEXT, `songs` TEXT)", (gssize) (-1), &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch0_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_queryable_execute ((SQLHeavyQueryable*) self->priv->_db, "CREATE TABLE smart_playlists (`name` TEXT, `and_or` TEXT, `queries` TE" \
"XT)", (gssize) (-1), &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch0_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_queryable_execute ((SQLHeavyQueryable*) self->priv->_db, "CREATE TABLE songs (`file` TEXT,`title` TEXT,`artist` TEXT,`album` TEX" \
"T,`genre` TEXT,`comment` TEXT, `year` INT, `track` INT, `bitrate` INT," \
" `length` INT, `samplerate` INT, `rating` INT, `playcount` INT, `datea" \
"dded` INT, `lastplayed` INT)", (gssize) (-1), &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch0_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_queryable_execute ((SQLHeavyQueryable*) self->priv->_db, "CREATE TABLE artists ('name' TEXT, 'mbid' TEXT, 'url' TEXT, 'streamabl" \
"e' INT, 'listeners' INT, 'playcount' INT, 'published' TEXT, 'summary' " \
"TEXT, 'content' TEXT, 'tags' TEXT, 'similar' TEXT, 'url_image' TEXT)", (gssize) (-1), &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch0_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_queryable_execute ((SQLHeavyQueryable*) self->priv->_db, "CREATE TABLE albums ('name' TEXT, 'artist' TEXT, 'mbid' TEXT, 'url' TE" \
"XT, 'release_date' TEXT, 'listeners' INT, 'playcount' INT, 'tags' TEXT" \
",  'url_image' TEXT)", (gssize) (-1), &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch0_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_queryable_execute ((SQLHeavyQueryable*) self->priv->_db, "CREATE TABLE tracks ('id' INT, 'name' TEXT, 'artist' TEXT, 'url' TEXT," \
" 'duration' INT, 'streamable' INT, 'listeners' INT, 'playcount' INT, '" \
"summary' TEXT, 'content' TEXT, 'tags' TEXT)", (gssize) (-1), &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch0_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	goto __finally0;
	__catch0_sql_heavy_error:
	{
		GError * err;
		err = _inner_error_;
		_inner_error_ = NULL;
		fprintf (stdout, "Bad news: could not create tables. Please report this. Message: %s\n", err->message);
		_g_error_free0 (err);
	}
	__finally0:
	if (_inner_error_ != NULL) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
}


/** Loads the db into memory, creates it if need be, adds music if need be
 * 
 */
void beat_box_data_base_manager_load_db (BeatBoxDataBaseManager* self) {
	const gchar* _tmp0_ = NULL;
	gchar* _tmp1_;
	GFile* _tmp2_ = NULL;
	GFile* _tmp3_;
	GFile* beatbox_folder;
	const gchar* _tmp4_ = NULL;
	gchar* _tmp5_;
	GFile* _tmp6_ = NULL;
	GFile* _tmp7_;
	GFile* db_file;
	gboolean _tmp8_;
	gboolean need_create;
	gboolean _tmp11_;
	gboolean _tmp12_ = FALSE;
	GError * _inner_error_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = g_get_home_dir ();
	_tmp1_ = g_strconcat (_tmp0_, "/.beatbox/", NULL);
	_tmp2_ = g_file_new_for_path (_tmp1_);
	beatbox_folder = (_tmp3_ = _tmp2_, _g_free0 (_tmp1_), _tmp3_);
	_tmp4_ = g_get_home_dir ();
	_tmp5_ = g_strconcat (_tmp4_, "/.beatbox/data.db", NULL);
	_tmp6_ = g_file_new_for_path (_tmp5_);
	db_file = (_tmp7_ = _tmp6_, _g_free0 (_tmp5_), _tmp7_);
	_tmp8_ = g_file_query_exists (beatbox_folder, NULL);
	if (!_tmp8_) {
		GFileOutputStream* _tmp9_ = NULL;
		GFileOutputStream* _tmp10_;
		_tmp9_ = g_file_create (beatbox_folder, G_FILE_CREATE_NONE, NULL, &_inner_error_);
		_tmp10_ = _tmp9_;
		_g_object_unref0 (_tmp10_);
		if (_inner_error_ != NULL) {
			_g_object_unref0 (db_file);
			_g_object_unref0 (beatbox_folder);
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return;
		}
	}
	need_create = FALSE;
	_tmp11_ = g_file_query_exists (db_file, NULL);
	if (!_tmp11_) {
		need_create = TRUE;
	}
	if (self->priv->write) {
		_tmp12_ = !self->priv->create;
	} else {
		_tmp12_ = FALSE;
	}
	if (_tmp12_) {
		const gchar* _tmp13_ = NULL;
		gchar* _tmp14_;
		SQLHeavyDatabase* _tmp15_ = NULL;
		SQLHeavyDatabase* _tmp16_;
		SQLHeavyDatabase* _tmp17_;
		SQLHeavyDatabase* _tmp18_;
		_tmp13_ = g_get_home_dir ();
		_tmp14_ = g_strconcat (_tmp13_, "/.beatbox/data.db", NULL);
		_tmp15_ = sql_heavy_database_new (_tmp14_, SQL_HEAVY_FILE_MODE_READ | SQL_HEAVY_FILE_MODE_WRITE, &_inner_error_);
		_tmp17_ = (_tmp16_ = _tmp15_, _g_free0 (_tmp14_), _tmp16_);
		if (_inner_error_ != NULL) {
			if (_inner_error_->domain == SQL_HEAVY_ERROR) {
				goto __catch1_sql_heavy_error;
			}
			_g_object_unref0 (db_file);
			_g_object_unref0 (beatbox_folder);
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return;
		}
		_tmp18_ = _tmp17_;
		_g_object_unref0 (self->priv->_db);
		self->priv->_db = _tmp18_;
	} else {
		gboolean _tmp19_ = FALSE;
		if (!self->priv->write) {
			_tmp19_ = self->priv->create;
		} else {
			_tmp19_ = FALSE;
		}
		if (_tmp19_) {
			const gchar* _tmp20_ = NULL;
			gchar* _tmp21_;
			SQLHeavyDatabase* _tmp22_ = NULL;
			SQLHeavyDatabase* _tmp23_;
			SQLHeavyDatabase* _tmp24_;
			SQLHeavyDatabase* _tmp25_;
			_tmp20_ = g_get_home_dir ();
			_tmp21_ = g_strconcat (_tmp20_, "/.beatbox/data.db", NULL);
			_tmp22_ = sql_heavy_database_new (_tmp21_, SQL_HEAVY_FILE_MODE_READ | SQL_HEAVY_FILE_MODE_CREATE, &_inner_error_);
			_tmp24_ = (_tmp23_ = _tmp22_, _g_free0 (_tmp21_), _tmp23_);
			if (_inner_error_ != NULL) {
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch1_sql_heavy_error;
				}
				_g_object_unref0 (db_file);
				_g_object_unref0 (beatbox_folder);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp25_ = _tmp24_;
			_g_object_unref0 (self->priv->_db);
			self->priv->_db = _tmp25_;
		} else {
			gboolean _tmp26_ = FALSE;
			if (self->priv->write) {
				_tmp26_ = self->priv->create;
			} else {
				_tmp26_ = FALSE;
			}
			if (_tmp26_) {
				const gchar* _tmp27_ = NULL;
				gchar* _tmp28_;
				SQLHeavyDatabase* _tmp29_ = NULL;
				SQLHeavyDatabase* _tmp30_;
				SQLHeavyDatabase* _tmp31_;
				SQLHeavyDatabase* _tmp32_;
				_tmp27_ = g_get_home_dir ();
				_tmp28_ = g_strconcat (_tmp27_, "/.beatbox/data.db", NULL);
				_tmp29_ = sql_heavy_database_new (_tmp28_, (SQL_HEAVY_FILE_MODE_READ | SQL_HEAVY_FILE_MODE_WRITE) | SQL_HEAVY_FILE_MODE_CREATE, &_inner_error_);
				_tmp31_ = (_tmp30_ = _tmp29_, _g_free0 (_tmp28_), _tmp30_);
				if (_inner_error_ != NULL) {
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch1_sql_heavy_error;
					}
					_g_object_unref0 (db_file);
					_g_object_unref0 (beatbox_folder);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return;
				}
				_tmp32_ = _tmp31_;
				_g_object_unref0 (self->priv->_db);
				self->priv->_db = _tmp32_;
			} else {
				const gchar* _tmp33_ = NULL;
				gchar* _tmp34_;
				SQLHeavyDatabase* _tmp35_ = NULL;
				SQLHeavyDatabase* _tmp36_;
				SQLHeavyDatabase* _tmp37_;
				SQLHeavyDatabase* _tmp38_;
				_tmp33_ = g_get_home_dir ();
				_tmp34_ = g_strconcat (_tmp33_, "/.beatbox/data.db", NULL);
				_tmp35_ = sql_heavy_database_new (_tmp34_, SQL_HEAVY_FILE_MODE_READ, &_inner_error_);
				_tmp37_ = (_tmp36_ = _tmp35_, _g_free0 (_tmp34_), _tmp36_);
				if (_inner_error_ != NULL) {
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch1_sql_heavy_error;
					}
					_g_object_unref0 (db_file);
					_g_object_unref0 (beatbox_folder);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return;
				}
				_tmp38_ = _tmp37_;
				_g_object_unref0 (self->priv->_db);
				self->priv->_db = _tmp38_;
			}
		}
	}
	goto __finally1;
	__catch1_sql_heavy_error:
	{
		GError * err;
		err = _inner_error_;
		_inner_error_ = NULL;
		fprintf (stdout, "This is terrible. Could not even make db file. Please report this. Mes" \
"sage: %s", err->message);
		_g_error_free0 (err);
	}
	__finally1:
	if (_inner_error_ != NULL) {
		_g_object_unref0 (db_file);
		_g_object_unref0 (beatbox_folder);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	if (need_create) {
		beat_box_data_base_manager_create_db (self);
	}
	_g_object_unref0 (db_file);
	_g_object_unref0 (beatbox_folder);
}


void beat_box_data_base_manager_resetProgress (BeatBoxDataBaseManager* self, gint items) {
	g_return_if_fail (self != NULL);
	self->priv->index = 0;
	self->priv->item_count = items;
}


/** simply returns the db location on file
 */
gchar* beat_box_data_base_manager_db_location (BeatBoxDataBaseManager* self) {
	gchar* result = NULL;
	const gchar* _tmp0_ = NULL;
	gchar* _tmp1_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = sql_heavy_database_get_filename (self->priv->_db);
	_tmp1_ = g_strdup (_tmp0_);
	result = _tmp1_;
	return result;
}


void beat_box_data_base_manager_begin_transaction (BeatBoxDataBaseManager* self, const gchar* script) {
	SQLHeavyTransaction* _tmp0_ = NULL;
	SQLHeavyTransaction* _tmp1_;
	SQLHeavyTransaction* _tmp2_;
	SQLHeavyQuery* _tmp3_ = NULL;
	SQLHeavyQuery* _tmp4_;
	SQLHeavyQuery* _tmp5_;
	GError * _inner_error_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (script != NULL);
	_tmp0_ = sql_heavy_queryable_begin_transaction ((SQLHeavyQueryable*) self->priv->_db, &_inner_error_);
	_tmp1_ = _tmp0_;
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch2_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp2_ = _tmp1_;
	_g_object_unref0 (self->priv->transaction);
	self->priv->transaction = _tmp2_;
	_tmp3_ = sql_heavy_queryable_prepare ((SQLHeavyQueryable*) self->priv->transaction, script, &_inner_error_);
	_tmp4_ = _tmp3_;
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch2_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp5_ = _tmp4_;
	_g_object_unref0 (self->priv->query);
	self->priv->query = _tmp5_;
	goto __finally2;
	__catch2_sql_heavy_error:
	{
		GError * err;
		err = _inner_error_;
		_inner_error_ = NULL;
		fprintf (stdout, "could not begin transaction: %s \n", err->message);
		_g_error_free0 (err);
	}
	__finally2:
	if (_inner_error_ != NULL) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
}


void beat_box_data_base_manager_commit_transaction (BeatBoxDataBaseManager* self) {
	GError * _inner_error_ = NULL;
	g_return_if_fail (self != NULL);
	sql_heavy_transaction_commit (self->priv->transaction, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch3_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	goto __finally3;
	__catch3_sql_heavy_error:
	{
		GError * err;
		err = _inner_error_;
		_inner_error_ = NULL;
		fprintf (stdout, "could not commit transaction: %s \n", err->message);
		_g_error_free0 (err);
	}
	__finally3:
	if (_inner_error_ != NULL) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
}


/** This is rather unsafe and should only be done if you know what you're doing **/
void beat_box_data_base_manager_drop_table (BeatBoxDataBaseManager* self, const gchar* table) {
	gchar* _tmp0_;
	gchar* _tmp1_;
	GError * _inner_error_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (table != NULL);
	_tmp0_ = g_strconcat ("DELETE FROM `", table, NULL);
	_tmp1_ = g_strconcat (_tmp0_, "`", NULL);
	sql_heavy_queryable_execute ((SQLHeavyQueryable*) self->priv->_db, _tmp1_, (gssize) (-1), &_inner_error_);
	_g_free0 (_tmp1_);
	_g_free0 (_tmp0_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch4_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	goto __finally4;
	__catch4_sql_heavy_error:
	{
		GError * err;
		err = _inner_error_;
		_inner_error_ = NULL;
		fprintf (stdout, "Could not delete table %s: %s\n", table, err->message);
		_g_error_free0 (err);
	}
	__finally4:
	if (_inner_error_ != NULL) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
}


/** SONG LIST COLUMNS **
 * song_list_columns() loads song list columns from db
 * 
 * initialize_columns() sets columns to initial widths
 * 
 * save_song_list_columns() saves the columns to db
 */
GeeArrayList* beat_box_data_base_manager_load_song_list_columns (BeatBoxDataBaseManager* self) {
	GeeArrayList* result = NULL;
	GeeArrayList* _tmp0_ = NULL;
	GeeArrayList* rv;
	SQLHeavyQuery* _tmp1_ = NULL;
	SQLHeavyQuery* query;
	GError * _inner_error_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = gee_array_list_new (GTK_TYPE_TREE_VIEW_COLUMN, (GBoxedCopyFunc) g_object_ref, g_object_unref, NULL);
	rv = _tmp0_;
	_tmp1_ = sql_heavy_query_new ((SQLHeavyQueryable*) self->priv->_db, "SELECT * FROM `song_list_columns`", &_inner_error_);
	query = _tmp1_;
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch5_sql_heavy_error;
		}
		_g_object_unref0 (rv);
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return NULL;
	}
	self->priv->index = 0;
	{
		SQLHeavyQueryResult* _tmp2_ = NULL;
		SQLHeavyQueryResult* results;
		_tmp2_ = sql_heavy_query_execute (query, NULL, &_inner_error_, NULL);
		results = _tmp2_;
		if (_inner_error_ != NULL) {
			_g_object_unref0 (query);
			if (_inner_error_->domain == SQL_HEAVY_ERROR) {
				goto __catch5_sql_heavy_error;
			}
			_g_object_unref0 (query);
			_g_object_unref0 (rv);
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return NULL;
		}
		{
			gboolean _tmp3_;
			_tmp3_ = TRUE;
			while (TRUE) {
				gboolean _tmp4_;
				GtkTreeViewColumn* tvc = NULL;
				gchar* _tmp5_ = NULL;
				gchar* _tmp6_;
				gchar* _tmp7_;
				gboolean _tmp8_;
				gint _tmp23_;
				gint _tmp24_;
				gint _tmp25_;
				gint _tmp26_;
				if (!_tmp3_) {
					sql_heavy_record_set_next ((SQLHeavyRecordSet*) results, &_inner_error_);
					if (_inner_error_ != NULL) {
						_g_object_unref0 (results);
						_g_object_unref0 (query);
						if (_inner_error_->domain == SQL_HEAVY_ERROR) {
							goto __catch5_sql_heavy_error;
						}
						_g_object_unref0 (results);
						_g_object_unref0 (query);
						_g_object_unref0 (rv);
						g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
						g_clear_error (&_inner_error_);
						return NULL;
					}
				}
				_tmp3_ = FALSE;
				_tmp4_ = sql_heavy_query_result_get_finished (results);
				if (!(!_tmp4_)) {
					break;
				}
				_tmp5_ = sql_heavy_record_fetch_string ((SQLHeavyRecord*) results, 0, &_inner_error_);
				_tmp6_ = _tmp5_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (tvc);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch5_sql_heavy_error;
					}
					_g_object_unref0 (tvc);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				_tmp7_ = _tmp6_;
				if ((_tmp8_ = g_strcmp0 (_tmp7_, " ") != 0, _g_free0 (_tmp7_), _tmp8_)) {
					gchar* _tmp9_ = NULL;
					gchar* _tmp10_;
					gchar* _tmp11_;
					GtkCellRendererText* _tmp12_ = NULL;
					GtkCellRendererText* _tmp13_;
					GtkTreeViewColumn* _tmp14_ = NULL;
					GtkTreeViewColumn* _tmp15_;
					_tmp9_ = sql_heavy_record_fetch_string ((SQLHeavyRecord*) results, 0, &_inner_error_);
					_tmp10_ = _tmp9_;
					if (_inner_error_ != NULL) {
						_g_object_unref0 (tvc);
						_g_object_unref0 (results);
						_g_object_unref0 (query);
						if (_inner_error_->domain == SQL_HEAVY_ERROR) {
							goto __catch5_sql_heavy_error;
						}
						_g_object_unref0 (tvc);
						_g_object_unref0 (results);
						_g_object_unref0 (query);
						_g_object_unref0 (rv);
						g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
						g_clear_error (&_inner_error_);
						return NULL;
					}
					_tmp11_ = _tmp10_;
					_tmp12_ = (GtkCellRendererText*) gtk_cell_renderer_text_new ();
					_tmp13_ = g_object_ref_sink (_tmp12_);
					_tmp14_ = gtk_tree_view_column_new_with_attributes (_tmp11_, (GtkCellRenderer*) _tmp13_, "text", self->priv->index, NULL, NULL);
					_tmp15_ = g_object_ref_sink (_tmp14_);
					_g_object_unref0 (tvc);
					tvc = _tmp15_;
					_g_object_unref0 (_tmp13_);
					_g_free0 (_tmp11_);
				} else {
					gchar* _tmp16_ = NULL;
					gchar* _tmp17_;
					gchar* _tmp18_;
					GtkCellRendererPixbuf* _tmp19_ = NULL;
					GtkCellRendererPixbuf* _tmp20_;
					GtkTreeViewColumn* _tmp21_ = NULL;
					GtkTreeViewColumn* _tmp22_;
					_tmp16_ = sql_heavy_record_fetch_string ((SQLHeavyRecord*) results, 0, &_inner_error_);
					_tmp17_ = _tmp16_;
					if (_inner_error_ != NULL) {
						_g_object_unref0 (tvc);
						_g_object_unref0 (results);
						_g_object_unref0 (query);
						if (_inner_error_->domain == SQL_HEAVY_ERROR) {
							goto __catch5_sql_heavy_error;
						}
						_g_object_unref0 (tvc);
						_g_object_unref0 (results);
						_g_object_unref0 (query);
						_g_object_unref0 (rv);
						g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
						g_clear_error (&_inner_error_);
						return NULL;
					}
					_tmp18_ = _tmp17_;
					_tmp19_ = (GtkCellRendererPixbuf*) gtk_cell_renderer_pixbuf_new ();
					_tmp20_ = g_object_ref_sink (_tmp19_);
					_tmp21_ = gtk_tree_view_column_new_with_attributes (_tmp18_, (GtkCellRenderer*) _tmp20_, "pixbuf", self->priv->index, NULL, NULL);
					_tmp22_ = g_object_ref_sink (_tmp21_);
					_g_object_unref0 (tvc);
					tvc = _tmp22_;
					_g_object_unref0 (_tmp20_);
					_g_free0 (_tmp18_);
				}
				gtk_tree_view_column_set_resizable (tvc, TRUE);
				gtk_tree_view_column_set_reorderable (tvc, TRUE);
				gtk_tree_view_column_set_clickable (tvc, TRUE);
				gtk_tree_view_column_set_sort_column_id (tvc, self->priv->index);
				gtk_tree_view_column_set_sort_indicator (tvc, FALSE);
				_tmp23_ = sql_heavy_record_fetch_int ((SQLHeavyRecord*) results, 1, &_inner_error_);
				_tmp24_ = _tmp23_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (tvc);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch5_sql_heavy_error;
					}
					_g_object_unref0 (tvc);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				gtk_tree_view_column_set_visible (tvc, _tmp24_ == 1);
				gtk_tree_view_column_set_sizing (tvc, GTK_TREE_VIEW_COLUMN_FIXED);
				_tmp25_ = sql_heavy_record_fetch_int ((SQLHeavyRecord*) results, 2, &_inner_error_);
				_tmp26_ = _tmp25_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (tvc);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch5_sql_heavy_error;
					}
					_g_object_unref0 (tvc);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				gtk_tree_view_column_set_fixed_width (tvc, _tmp26_);
				gee_abstract_collection_add ((GeeAbstractCollection*) rv, tvc);
				self->priv->index = self->priv->index + 1;
				_g_object_unref0 (tvc);
			}
		}
		_g_object_unref0 (results);
	}
	_g_object_unref0 (query);
	goto __finally5;
	__catch5_sql_heavy_error:
	{
		GError * err;
		err = _inner_error_;
		_inner_error_ = NULL;
		fprintf (stdout, "Could not load song list columns: %s\n", err->message);
		_g_error_free0 (err);
	}
	__finally5:
	if (_inner_error_ != NULL) {
		_g_object_unref0 (rv);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return NULL;
	}
	result = rv;
	return result;
}


void beat_box_data_base_manager_initialize_columns (BeatBoxDataBaseManager* self) {
	SQLHeavyTransaction* _tmp0_ = NULL;
	SQLHeavyTransaction* _tmp1_;
	SQLHeavyTransaction* _tmp2_;
	SQLHeavyQuery* _tmp3_ = NULL;
	SQLHeavyQuery* _tmp4_;
	SQLHeavyQuery* _tmp5_;
	SQLHeavyQueryResult* _tmp6_ = NULL;
	SQLHeavyQueryResult* _tmp7_;
	SQLHeavyQueryResult* _tmp8_ = NULL;
	SQLHeavyQueryResult* _tmp9_;
	SQLHeavyQueryResult* _tmp10_ = NULL;
	SQLHeavyQueryResult* _tmp11_;
	SQLHeavyQueryResult* _tmp12_ = NULL;
	SQLHeavyQueryResult* _tmp13_;
	SQLHeavyQueryResult* _tmp14_ = NULL;
	SQLHeavyQueryResult* _tmp15_;
	SQLHeavyQueryResult* _tmp16_ = NULL;
	SQLHeavyQueryResult* _tmp17_;
	SQLHeavyQueryResult* _tmp18_ = NULL;
	SQLHeavyQueryResult* _tmp19_;
	SQLHeavyQueryResult* _tmp20_ = NULL;
	SQLHeavyQueryResult* _tmp21_;
	SQLHeavyQueryResult* _tmp22_ = NULL;
	SQLHeavyQueryResult* _tmp23_;
	SQLHeavyQueryResult* _tmp24_ = NULL;
	SQLHeavyQueryResult* _tmp25_;
	SQLHeavyQueryResult* _tmp26_ = NULL;
	SQLHeavyQueryResult* _tmp27_;
	SQLHeavyQueryResult* _tmp28_ = NULL;
	SQLHeavyQueryResult* _tmp29_;
	SQLHeavyQueryResult* _tmp30_ = NULL;
	SQLHeavyQueryResult* _tmp31_;
	SQLHeavyQueryResult* _tmp32_ = NULL;
	SQLHeavyQueryResult* _tmp33_;
	SQLHeavyQueryResult* _tmp34_ = NULL;
	SQLHeavyQueryResult* _tmp35_;
	SQLHeavyQueryResult* _tmp36_ = NULL;
	SQLHeavyQueryResult* _tmp37_;
	SQLHeavyQueryResult* _tmp38_ = NULL;
	SQLHeavyQueryResult* _tmp39_;
	SQLHeavyQueryResult* _tmp40_ = NULL;
	SQLHeavyQueryResult* _tmp41_;
	SQLHeavyQueryResult* _tmp42_ = NULL;
	SQLHeavyQueryResult* _tmp43_;
	GError * _inner_error_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = sql_heavy_queryable_begin_transaction ((SQLHeavyQueryable*) self->priv->_db, &_inner_error_);
	_tmp1_ = _tmp0_;
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp2_ = _tmp1_;
	_g_object_unref0 (self->priv->transaction);
	self->priv->transaction = _tmp2_;
	_tmp3_ = sql_heavy_queryable_prepare ((SQLHeavyQueryable*) self->priv->transaction, "INSERT INTO `song_list_columns` (`title`, `visible`, `width`) VALUES (" \
":title, :visible, :width);", &_inner_error_);
	_tmp4_ = _tmp3_;
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp5_ = _tmp4_;
	_g_object_unref0 (self->priv->query);
	self->priv->query = _tmp5_;
	sql_heavy_query_set_string (self->priv->query, ":title", "id", &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_int (self->priv->query, ":visible", 0, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_int (self->priv->query, ":width", 10, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp6_ = sql_heavy_query_execute (self->priv->query, NULL, &_inner_error_, NULL);
	_tmp7_ = _tmp6_;
	_g_object_unref0 (_tmp7_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_string (self->priv->query, ":title", " ", &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_int (self->priv->query, ":visible", 1, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_int (self->priv->query, ":width", 30, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp8_ = sql_heavy_query_execute (self->priv->query, NULL, &_inner_error_, NULL);
	_tmp9_ = _tmp8_;
	_g_object_unref0 (_tmp9_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_string (self->priv->query, ":title", "#", &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_int (self->priv->query, ":visible", 0, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_int (self->priv->query, ":width", 60, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp10_ = sql_heavy_query_execute (self->priv->query, NULL, &_inner_error_, NULL);
	_tmp11_ = _tmp10_;
	_g_object_unref0 (_tmp11_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_string (self->priv->query, ":title", "Track", &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_int (self->priv->query, ":visible", 1, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_int (self->priv->query, ":width", 60, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp12_ = sql_heavy_query_execute (self->priv->query, NULL, &_inner_error_, NULL);
	_tmp13_ = _tmp12_;
	_g_object_unref0 (_tmp13_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_string (self->priv->query, ":title", "Title", &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_int (self->priv->query, ":visible", 1, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_int (self->priv->query, ":width", 220, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp14_ = sql_heavy_query_execute (self->priv->query, NULL, &_inner_error_, NULL);
	_tmp15_ = _tmp14_;
	_g_object_unref0 (_tmp15_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_string (self->priv->query, ":title", "Length", &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_int (self->priv->query, ":visible", 1, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_int (self->priv->query, ":width", 75, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp16_ = sql_heavy_query_execute (self->priv->query, NULL, &_inner_error_, NULL);
	_tmp17_ = _tmp16_;
	_g_object_unref0 (_tmp17_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_string (self->priv->query, ":title", "Artist", &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_int (self->priv->query, ":visible", 1, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_int (self->priv->query, ":width", 110, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp18_ = sql_heavy_query_execute (self->priv->query, NULL, &_inner_error_, NULL);
	_tmp19_ = _tmp18_;
	_g_object_unref0 (_tmp19_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_string (self->priv->query, ":title", "Album", &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_int (self->priv->query, ":visible", 1, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_int (self->priv->query, ":width", 200, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp20_ = sql_heavy_query_execute (self->priv->query, NULL, &_inner_error_, NULL);
	_tmp21_ = _tmp20_;
	_g_object_unref0 (_tmp21_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_string (self->priv->query, ":title", "Genre", &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_int (self->priv->query, ":visible", 1, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_int (self->priv->query, ":width", 70, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp22_ = sql_heavy_query_execute (self->priv->query, NULL, &_inner_error_, NULL);
	_tmp23_ = _tmp22_;
	_g_object_unref0 (_tmp23_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_string (self->priv->query, ":title", "Comment", &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_int (self->priv->query, ":visible", 0, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_int (self->priv->query, ":width", 70, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp24_ = sql_heavy_query_execute (self->priv->query, NULL, &_inner_error_, NULL);
	_tmp25_ = _tmp24_;
	_g_object_unref0 (_tmp25_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_string (self->priv->query, ":title", "Year", &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_int (self->priv->query, ":visible", 0, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_int (self->priv->query, ":width", 30, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp26_ = sql_heavy_query_execute (self->priv->query, NULL, &_inner_error_, NULL);
	_tmp27_ = _tmp26_;
	_g_object_unref0 (_tmp27_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_string (self->priv->query, ":title", "Bitrate", &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_int (self->priv->query, ":visible", 0, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_int (self->priv->query, ":width", 20, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp28_ = sql_heavy_query_execute (self->priv->query, NULL, &_inner_error_, NULL);
	_tmp29_ = _tmp28_;
	_g_object_unref0 (_tmp29_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_string (self->priv->query, ":title", "Rating", &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_int (self->priv->query, ":visible", 0, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_int (self->priv->query, ":width", 30, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp30_ = sql_heavy_query_execute (self->priv->query, NULL, &_inner_error_, NULL);
	_tmp31_ = _tmp30_;
	_g_object_unref0 (_tmp31_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_string (self->priv->query, ":title", "Playcount", &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_int (self->priv->query, ":visible", 0, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_int (self->priv->query, ":width", 15, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp32_ = sql_heavy_query_execute (self->priv->query, NULL, &_inner_error_, NULL);
	_tmp33_ = _tmp32_;
	_g_object_unref0 (_tmp33_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_string (self->priv->query, ":title", "Date Added", &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_int (self->priv->query, ":visible", 0, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_int (self->priv->query, ":width", 40, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp34_ = sql_heavy_query_execute (self->priv->query, NULL, &_inner_error_, NULL);
	_tmp35_ = _tmp34_;
	_g_object_unref0 (_tmp35_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_string (self->priv->query, ":title", "Last Played", &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_int (self->priv->query, ":visible", 0, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_int (self->priv->query, ":width", 40, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp36_ = sql_heavy_query_execute (self->priv->query, NULL, &_inner_error_, NULL);
	_tmp37_ = _tmp36_;
	_g_object_unref0 (_tmp37_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_string (self->priv->query, ":title", "BPM", &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_int (self->priv->query, ":visible", 0, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_int (self->priv->query, ":width", 30, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp38_ = sql_heavy_query_execute (self->priv->query, NULL, &_inner_error_, NULL);
	_tmp39_ = _tmp38_;
	_g_object_unref0 (_tmp39_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_string (self->priv->query, ":title", "File Path", &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_int (self->priv->query, ":visible", 0, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_int (self->priv->query, ":width", 120, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp40_ = sql_heavy_query_execute (self->priv->query, NULL, &_inner_error_, NULL);
	_tmp41_ = _tmp40_;
	_g_object_unref0 (_tmp41_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_string (self->priv->query, ":title", "File Size", &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_int (self->priv->query, ":visible", 0, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_query_set_int (self->priv->query, ":width", 70, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp42_ = sql_heavy_query_execute (self->priv->query, NULL, &_inner_error_, NULL);
	_tmp43_ = _tmp42_;
	_g_object_unref0 (_tmp43_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	sql_heavy_transaction_commit (self->priv->transaction, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch6_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	goto __finally6;
	__catch6_sql_heavy_error:
	{
		GError * err;
		err = _inner_error_;
		_inner_error_ = NULL;
		fprintf (stdout, "Could not initialize values for song list columns: %s\n", err->message);
		_g_error_free0 (err);
	}
	__finally6:
	if (_inner_error_ != NULL) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
}


static gpointer _g_object_ref0 (gpointer self) {
	return self ? g_object_ref (self) : NULL;
}


void beat_box_data_base_manager_save_song_list_columns (BeatBoxDataBaseManager* self, GeeArrayList* columns) {
	SQLHeavyTransaction* _tmp0_ = NULL;
	SQLHeavyTransaction* _tmp1_;
	SQLHeavyTransaction* _tmp2_;
	SQLHeavyQuery* _tmp3_ = NULL;
	SQLHeavyQuery* _tmp4_;
	SQLHeavyQuery* _tmp5_;
	gint _tmp6_;
	GError * _inner_error_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (columns != NULL);
	sql_heavy_queryable_execute ((SQLHeavyQueryable*) self->priv->_db, "DELETE FROM `song_list_columns`", (gssize) (-1), &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch7_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp0_ = sql_heavy_queryable_begin_transaction ((SQLHeavyQueryable*) self->priv->_db, &_inner_error_);
	_tmp1_ = _tmp0_;
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch7_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp2_ = _tmp1_;
	_g_object_unref0 (self->priv->transaction);
	self->priv->transaction = _tmp2_;
	_tmp3_ = sql_heavy_queryable_prepare ((SQLHeavyQueryable*) self->priv->transaction, "INSERT INTO `song_list_columns` (`title`, `visible`, `width`) VALUES (" \
":title, :visible, :width);", &_inner_error_);
	_tmp4_ = _tmp3_;
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch7_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp5_ = _tmp4_;
	_g_object_unref0 (self->priv->query);
	self->priv->query = _tmp5_;
	self->priv->index = 0;
	_tmp6_ = gee_collection_get_size ((GeeCollection*) columns);
	self->priv->item_count = _tmp6_;
	{
		GeeArrayList* _tmp7_;
		GeeArrayList* _tvc_list;
		gint _tmp8_;
		gint _tvc_size;
		gint _tvc_index;
		_tmp7_ = _g_object_ref0 (columns);
		_tvc_list = _tmp7_;
		_tmp8_ = gee_collection_get_size ((GeeCollection*) _tvc_list);
		_tvc_size = _tmp8_;
		_tvc_index = -1;
		while (TRUE) {
			gpointer _tmp9_ = NULL;
			GtkTreeViewColumn* tvc;
			const gchar* _tmp10_ = NULL;
			gint _tmp11_;
			const gchar* _tmp12_ = NULL;
			gint _tmp13_ = 0;
			gboolean _tmp14_;
			gint _tmp15_ = 0;
			gint _tmp16_;
			SQLHeavyQueryResult* _tmp18_ = NULL;
			SQLHeavyQueryResult* _tmp19_;
			_tvc_index = _tvc_index + 1;
			if (!(_tvc_index < _tvc_size)) {
				break;
			}
			_tmp9_ = gee_abstract_list_get ((GeeAbstractList*) _tvc_list, _tvc_index);
			tvc = (GtkTreeViewColumn*) _tmp9_;
			_tmp10_ = gtk_tree_view_column_get_title (tvc);
			fprintf (stdout, "saving column %s\n", _tmp10_);
			_tmp11_ = self->priv->index;
			self->priv->index = _tmp11_ + 1;
			g_signal_emit_by_name (self, "db-progress", NULL, ((gdouble) _tmp11_) / ((gdouble) self->priv->item_count));
			_tmp12_ = gtk_tree_view_column_get_title (tvc);
			sql_heavy_query_set_string (self->priv->query, ":title", _tmp12_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (tvc);
				_g_object_unref0 (_tvc_list);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch7_sql_heavy_error;
				}
				_g_object_unref0 (tvc);
				_g_object_unref0 (_tvc_list);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp14_ = gtk_tree_view_column_get_visible (tvc);
			if (_tmp14_) {
				_tmp13_ = 1;
			} else {
				_tmp13_ = 0;
			}
			sql_heavy_query_set_int (self->priv->query, ":visible", _tmp13_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (tvc);
				_g_object_unref0 (_tvc_list);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch7_sql_heavy_error;
				}
				_g_object_unref0 (tvc);
				_g_object_unref0 (_tvc_list);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp16_ = gtk_tree_view_column_get_width (tvc);
			if (_tmp16_ == 0) {
				_tmp15_ = 50;
			} else {
				gint _tmp17_;
				_tmp17_ = gtk_tree_view_column_get_width (tvc);
				_tmp15_ = _tmp17_;
			}
			sql_heavy_query_set_int (self->priv->query, ":width", _tmp15_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (tvc);
				_g_object_unref0 (_tvc_list);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch7_sql_heavy_error;
				}
				_g_object_unref0 (tvc);
				_g_object_unref0 (_tvc_list);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp18_ = sql_heavy_query_execute (self->priv->query, NULL, &_inner_error_, NULL);
			_tmp19_ = _tmp18_;
			_g_object_unref0 (_tmp19_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (tvc);
				_g_object_unref0 (_tvc_list);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch7_sql_heavy_error;
				}
				_g_object_unref0 (tvc);
				_g_object_unref0 (_tvc_list);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_g_object_unref0 (tvc);
		}
		_g_object_unref0 (_tvc_list);
	}
	sql_heavy_transaction_commit (self->priv->transaction, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch7_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	goto __finally7;
	__catch7_sql_heavy_error:
	{
		GError * err;
		err = _inner_error_;
		_inner_error_ = NULL;
		fprintf (stdout, "Could not save columns: %s\n", err->message);
		_g_error_free0 (err);
	}
	__finally7:
	if (_inner_error_ != NULL) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
}


/** SONGS **
 * load_songs() loads songs from db
 * 
 * songs_from_search() loads songs from db using a simple LIKE %search%
 * search. It compares the search to artist, album, title and genre.
 * If it matches either, it will be included in the search
 * 
 * songs_from_artist() loads all songs given an artist name
 */
GeeArrayList* beat_box_data_base_manager_load_songs (BeatBoxDataBaseManager* self) {
	GeeArrayList* result = NULL;
	GeeArrayList* _tmp0_ = NULL;
	GeeArrayList* rv;
	gchar* _tmp1_;
	gchar* script;
	SQLHeavyQuery* _tmp2_ = NULL;
	SQLHeavyQuery* query;
	GError * _inner_error_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = gee_array_list_new (BEAT_BOX_TYPE_SONG, (GBoxedCopyFunc) g_object_ref, g_object_unref, NULL);
	rv = _tmp0_;
	_tmp1_ = g_strdup ("SELECT rowid,* FROM `songs`");
	script = _tmp1_;
	_tmp2_ = sql_heavy_query_new ((SQLHeavyQueryable*) self->priv->_db, script, &_inner_error_);
	query = _tmp2_;
	if (_inner_error_ != NULL) {
		_g_free0 (script);
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch8_sql_heavy_error;
		}
		_g_free0 (script);
		_g_object_unref0 (rv);
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return NULL;
	}
	{
		SQLHeavyQueryResult* _tmp3_ = NULL;
		SQLHeavyQueryResult* results;
		_tmp3_ = sql_heavy_query_execute (query, NULL, &_inner_error_, NULL);
		results = _tmp3_;
		if (_inner_error_ != NULL) {
			_g_object_unref0 (query);
			_g_free0 (script);
			if (_inner_error_->domain == SQL_HEAVY_ERROR) {
				goto __catch8_sql_heavy_error;
			}
			_g_object_unref0 (query);
			_g_free0 (script);
			_g_object_unref0 (rv);
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return NULL;
		}
		{
			gboolean _tmp4_;
			_tmp4_ = TRUE;
			while (TRUE) {
				gboolean _tmp5_;
				gchar* _tmp6_ = NULL;
				gchar* _tmp7_;
				gchar* _tmp8_;
				BeatBoxSong* _tmp9_ = NULL;
				BeatBoxSong* _tmp10_;
				BeatBoxSong* s;
				gint _tmp11_;
				gint _tmp12_;
				gchar* _tmp13_ = NULL;
				gchar* _tmp14_;
				gchar* _tmp15_;
				gchar* _tmp16_ = NULL;
				gchar* _tmp17_;
				gchar* _tmp18_;
				gchar* _tmp19_ = NULL;
				gchar* _tmp20_;
				gchar* _tmp21_;
				gchar* _tmp22_ = NULL;
				gchar* _tmp23_;
				gchar* _tmp24_;
				gchar* _tmp25_ = NULL;
				gchar* _tmp26_;
				gchar* _tmp27_;
				gint _tmp28_;
				gint _tmp29_;
				gint _tmp30_;
				gint _tmp31_;
				gint _tmp32_;
				gint _tmp33_;
				gint _tmp34_;
				gint _tmp35_;
				gint _tmp36_;
				gint _tmp37_;
				gint _tmp38_;
				gint _tmp39_;
				gint _tmp40_;
				gint _tmp41_;
				gint _tmp42_;
				gint _tmp43_;
				gint _tmp44_;
				gint _tmp45_;
				if (!_tmp4_) {
					sql_heavy_record_set_next ((SQLHeavyRecordSet*) results, &_inner_error_);
					if (_inner_error_ != NULL) {
						_g_object_unref0 (results);
						_g_object_unref0 (query);
						_g_free0 (script);
						if (_inner_error_->domain == SQL_HEAVY_ERROR) {
							goto __catch8_sql_heavy_error;
						}
						_g_object_unref0 (results);
						_g_object_unref0 (query);
						_g_free0 (script);
						_g_object_unref0 (rv);
						g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
						g_clear_error (&_inner_error_);
						return NULL;
					}
				}
				_tmp4_ = FALSE;
				_tmp5_ = sql_heavy_query_result_get_finished (results);
				if (!(!_tmp5_)) {
					break;
				}
				_tmp6_ = sql_heavy_record_fetch_string ((SQLHeavyRecord*) results, 1, &_inner_error_);
				_tmp7_ = _tmp6_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch8_sql_heavy_error;
					}
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				_tmp8_ = _tmp7_;
				_tmp9_ = beat_box_song_new (_tmp8_);
				s = (_tmp10_ = _tmp9_, _g_free0 (_tmp8_), _tmp10_);
				_tmp11_ = sql_heavy_record_fetch_int ((SQLHeavyRecord*) results, 0, &_inner_error_);
				_tmp12_ = _tmp11_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (s);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch8_sql_heavy_error;
					}
					_g_object_unref0 (s);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				beat_box_song_set_rowid (s, _tmp12_);
				_tmp13_ = sql_heavy_record_fetch_string ((SQLHeavyRecord*) results, 2, &_inner_error_);
				_tmp14_ = _tmp13_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (s);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch8_sql_heavy_error;
					}
					_g_object_unref0 (s);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				_tmp15_ = _tmp14_;
				beat_box_song_set_title (s, _tmp15_);
				_g_free0 (_tmp15_);
				_tmp16_ = sql_heavy_record_fetch_string ((SQLHeavyRecord*) results, 3, &_inner_error_);
				_tmp17_ = _tmp16_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (s);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch8_sql_heavy_error;
					}
					_g_object_unref0 (s);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				_tmp18_ = _tmp17_;
				beat_box_song_set_artist (s, _tmp18_);
				_g_free0 (_tmp18_);
				_tmp19_ = sql_heavy_record_fetch_string ((SQLHeavyRecord*) results, 4, &_inner_error_);
				_tmp20_ = _tmp19_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (s);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch8_sql_heavy_error;
					}
					_g_object_unref0 (s);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				_tmp21_ = _tmp20_;
				beat_box_song_set_album (s, _tmp21_);
				_g_free0 (_tmp21_);
				_tmp22_ = sql_heavy_record_fetch_string ((SQLHeavyRecord*) results, 5, &_inner_error_);
				_tmp23_ = _tmp22_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (s);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch8_sql_heavy_error;
					}
					_g_object_unref0 (s);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				_tmp24_ = _tmp23_;
				beat_box_song_set_genre (s, _tmp24_);
				_g_free0 (_tmp24_);
				_tmp25_ = sql_heavy_record_fetch_string ((SQLHeavyRecord*) results, 6, &_inner_error_);
				_tmp26_ = _tmp25_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (s);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch8_sql_heavy_error;
					}
					_g_object_unref0 (s);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				_tmp27_ = _tmp26_;
				beat_box_song_set_comment (s, _tmp27_);
				_g_free0 (_tmp27_);
				_tmp28_ = sql_heavy_record_fetch_int ((SQLHeavyRecord*) results, 7, &_inner_error_);
				_tmp29_ = _tmp28_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (s);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch8_sql_heavy_error;
					}
					_g_object_unref0 (s);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				beat_box_song_set_year (s, _tmp29_);
				_tmp30_ = sql_heavy_record_fetch_int ((SQLHeavyRecord*) results, 8, &_inner_error_);
				_tmp31_ = _tmp30_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (s);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch8_sql_heavy_error;
					}
					_g_object_unref0 (s);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				beat_box_song_set_track (s, _tmp31_);
				_tmp32_ = sql_heavy_record_fetch_int ((SQLHeavyRecord*) results, 9, &_inner_error_);
				_tmp33_ = _tmp32_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (s);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch8_sql_heavy_error;
					}
					_g_object_unref0 (s);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				beat_box_song_set_bitrate (s, _tmp33_);
				_tmp34_ = sql_heavy_record_fetch_int ((SQLHeavyRecord*) results, 10, &_inner_error_);
				_tmp35_ = _tmp34_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (s);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch8_sql_heavy_error;
					}
					_g_object_unref0 (s);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				beat_box_song_set_length (s, _tmp35_);
				_tmp36_ = sql_heavy_record_fetch_int ((SQLHeavyRecord*) results, 11, &_inner_error_);
				_tmp37_ = _tmp36_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (s);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch8_sql_heavy_error;
					}
					_g_object_unref0 (s);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				beat_box_song_set_samplerate (s, _tmp37_);
				_tmp38_ = sql_heavy_record_fetch_int ((SQLHeavyRecord*) results, 12, &_inner_error_);
				_tmp39_ = _tmp38_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (s);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch8_sql_heavy_error;
					}
					_g_object_unref0 (s);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				beat_box_song_set_rating (s, _tmp39_);
				_tmp40_ = sql_heavy_record_fetch_int ((SQLHeavyRecord*) results, 13, &_inner_error_);
				_tmp41_ = _tmp40_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (s);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch8_sql_heavy_error;
					}
					_g_object_unref0 (s);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				beat_box_song_set_play_count (s, _tmp41_);
				_tmp42_ = sql_heavy_record_fetch_int ((SQLHeavyRecord*) results, 14, &_inner_error_);
				_tmp43_ = _tmp42_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (s);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch8_sql_heavy_error;
					}
					_g_object_unref0 (s);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				beat_box_song_set_date_added (s, _tmp43_);
				_tmp44_ = sql_heavy_record_fetch_int ((SQLHeavyRecord*) results, 15, &_inner_error_);
				_tmp45_ = _tmp44_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (s);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch8_sql_heavy_error;
					}
					_g_object_unref0 (s);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				beat_box_song_set_last_played (s, _tmp45_);
				gee_abstract_collection_add ((GeeAbstractCollection*) rv, s);
				_g_object_unref0 (s);
			}
		}
		_g_object_unref0 (results);
	}
	_g_object_unref0 (query);
	_g_free0 (script);
	goto __finally8;
	__catch8_sql_heavy_error:
	{
		GError * err;
		err = _inner_error_;
		_inner_error_ = NULL;
		fprintf (stdout, "Could not load song from db: %s\n", err->message);
		_g_error_free0 (err);
	}
	__finally8:
	if (_inner_error_ != NULL) {
		_g_object_unref0 (rv);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return NULL;
	}
	result = rv;
	return result;
}


void beat_box_data_base_manager_save_songs (BeatBoxDataBaseManager* self, GeeCollection* songs) {
	SQLHeavyTransaction* _tmp0_ = NULL;
	SQLHeavyTransaction* _tmp1_;
	SQLHeavyTransaction* _tmp2_;
	SQLHeavyQuery* _tmp3_ = NULL;
	SQLHeavyQuery* _tmp4_;
	SQLHeavyQuery* _tmp5_;
	gint _tmp6_;
	GError * _inner_error_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (songs != NULL);
	sql_heavy_queryable_execute ((SQLHeavyQueryable*) self->priv->_db, "DELETE FROM `songs`", (gssize) (-1), &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch9_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp0_ = sql_heavy_queryable_begin_transaction ((SQLHeavyQueryable*) self->priv->_db, &_inner_error_);
	_tmp1_ = _tmp0_;
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch9_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp2_ = _tmp1_;
	_g_object_unref0 (self->priv->transaction);
	self->priv->transaction = _tmp2_;
	_tmp3_ = sql_heavy_queryable_prepare ((SQLHeavyQueryable*) self->priv->transaction, "INSERT INTO `songs` (`file`, `title`, `artist`, `album`, `genre`, `com" \
"ment`, `year`, `track`, `bitrate`, `length`, `samplerate`, `rating`, `" \
"playcount`, `dateadded`, `lastplayed`) VALUES (:file, :title, :artist," \
" :album, :genre, :comment, :year, :track, :bitrate, :length, :samplera" \
"te, :rating, :playcount, :dateadded, :lastplayed);", &_inner_error_);
	_tmp4_ = _tmp3_;
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch9_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp5_ = _tmp4_;
	_g_object_unref0 (self->priv->query);
	self->priv->query = _tmp5_;
	self->priv->index = 0;
	_tmp6_ = gee_collection_get_size (songs);
	self->priv->item_count = _tmp6_;
	{
		GeeIterator* _tmp7_ = NULL;
		GeeIterator* _s_it;
		_tmp7_ = gee_iterable_iterator ((GeeIterable*) songs);
		_s_it = _tmp7_;
		while (TRUE) {
			gboolean _tmp8_;
			gpointer _tmp9_ = NULL;
			BeatBoxSong* s;
			gint _tmp10_;
			const gchar* _tmp11_ = NULL;
			const gchar* _tmp12_ = NULL;
			const gchar* _tmp13_ = NULL;
			const gchar* _tmp14_ = NULL;
			const gchar* _tmp15_ = NULL;
			const gchar* _tmp16_ = NULL;
			gint _tmp17_;
			gint _tmp18_;
			gint _tmp19_;
			gint _tmp20_;
			gint _tmp21_;
			gint _tmp22_;
			gint _tmp23_;
			gint _tmp24_;
			gint _tmp25_;
			SQLHeavyQueryResult* _tmp26_ = NULL;
			SQLHeavyQueryResult* _tmp27_;
			_tmp8_ = gee_iterator_next (_s_it);
			if (!_tmp8_) {
				break;
			}
			_tmp9_ = gee_iterator_get (_s_it);
			s = (BeatBoxSong*) _tmp9_;
			_tmp10_ = self->priv->index;
			self->priv->index = _tmp10_ + 1;
			g_signal_emit_by_name (self, "db-progress", NULL, ((gdouble) _tmp10_) / ((gdouble) self->priv->item_count));
			_tmp11_ = beat_box_song_get_file (s);
			sql_heavy_query_set_string (self->priv->query, ":file", _tmp11_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (s);
				_g_object_unref0 (_s_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch9_sql_heavy_error;
				}
				_g_object_unref0 (s);
				_g_object_unref0 (_s_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp12_ = beat_box_song_get_title (s);
			sql_heavy_query_set_string (self->priv->query, ":title", _tmp12_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (s);
				_g_object_unref0 (_s_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch9_sql_heavy_error;
				}
				_g_object_unref0 (s);
				_g_object_unref0 (_s_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp13_ = beat_box_song_get_artist (s);
			sql_heavy_query_set_string (self->priv->query, ":artist", _tmp13_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (s);
				_g_object_unref0 (_s_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch9_sql_heavy_error;
				}
				_g_object_unref0 (s);
				_g_object_unref0 (_s_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp14_ = beat_box_song_get_album (s);
			sql_heavy_query_set_string (self->priv->query, ":album", _tmp14_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (s);
				_g_object_unref0 (_s_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch9_sql_heavy_error;
				}
				_g_object_unref0 (s);
				_g_object_unref0 (_s_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp15_ = beat_box_song_get_genre (s);
			sql_heavy_query_set_string (self->priv->query, ":genre", _tmp15_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (s);
				_g_object_unref0 (_s_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch9_sql_heavy_error;
				}
				_g_object_unref0 (s);
				_g_object_unref0 (_s_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp16_ = beat_box_song_get_comment (s);
			sql_heavy_query_set_string (self->priv->query, ":comment", _tmp16_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (s);
				_g_object_unref0 (_s_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch9_sql_heavy_error;
				}
				_g_object_unref0 (s);
				_g_object_unref0 (_s_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp17_ = beat_box_song_get_year (s);
			sql_heavy_query_set_int (self->priv->query, ":year", _tmp17_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (s);
				_g_object_unref0 (_s_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch9_sql_heavy_error;
				}
				_g_object_unref0 (s);
				_g_object_unref0 (_s_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp18_ = beat_box_song_get_track (s);
			sql_heavy_query_set_int (self->priv->query, ":track", _tmp18_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (s);
				_g_object_unref0 (_s_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch9_sql_heavy_error;
				}
				_g_object_unref0 (s);
				_g_object_unref0 (_s_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp19_ = beat_box_song_get_bitrate (s);
			sql_heavy_query_set_int (self->priv->query, ":bitrate", _tmp19_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (s);
				_g_object_unref0 (_s_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch9_sql_heavy_error;
				}
				_g_object_unref0 (s);
				_g_object_unref0 (_s_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp20_ = beat_box_song_get_length (s);
			sql_heavy_query_set_int (self->priv->query, ":length", _tmp20_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (s);
				_g_object_unref0 (_s_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch9_sql_heavy_error;
				}
				_g_object_unref0 (s);
				_g_object_unref0 (_s_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp21_ = beat_box_song_get_samplerate (s);
			sql_heavy_query_set_int (self->priv->query, ":samplerate", _tmp21_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (s);
				_g_object_unref0 (_s_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch9_sql_heavy_error;
				}
				_g_object_unref0 (s);
				_g_object_unref0 (_s_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp22_ = beat_box_song_get_rating (s);
			sql_heavy_query_set_int (self->priv->query, ":rating", _tmp22_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (s);
				_g_object_unref0 (_s_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch9_sql_heavy_error;
				}
				_g_object_unref0 (s);
				_g_object_unref0 (_s_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp23_ = beat_box_song_get_play_count (s);
			sql_heavy_query_set_int (self->priv->query, ":playcount", _tmp23_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (s);
				_g_object_unref0 (_s_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch9_sql_heavy_error;
				}
				_g_object_unref0 (s);
				_g_object_unref0 (_s_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp24_ = beat_box_song_get_date_added (s);
			sql_heavy_query_set_int (self->priv->query, ":dateadded", _tmp24_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (s);
				_g_object_unref0 (_s_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch9_sql_heavy_error;
				}
				_g_object_unref0 (s);
				_g_object_unref0 (_s_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp25_ = beat_box_song_get_last_played (s);
			sql_heavy_query_set_int (self->priv->query, ":lastplayed", _tmp25_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (s);
				_g_object_unref0 (_s_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch9_sql_heavy_error;
				}
				_g_object_unref0 (s);
				_g_object_unref0 (_s_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp26_ = sql_heavy_query_execute (self->priv->query, NULL, &_inner_error_, NULL);
			_tmp27_ = _tmp26_;
			_g_object_unref0 (_tmp27_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (s);
				_g_object_unref0 (_s_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch9_sql_heavy_error;
				}
				_g_object_unref0 (s);
				_g_object_unref0 (_s_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_g_object_unref0 (s);
		}
		_g_object_unref0 (_s_it);
	}
	sql_heavy_transaction_commit (self->priv->transaction, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch9_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	goto __finally9;
	__catch9_sql_heavy_error:
	{
		GError * err;
		err = _inner_error_;
		_inner_error_ = NULL;
		fprintf (stdout, "Could not save songs: %s \n", err->message);
		_g_error_free0 (err);
	}
	__finally9:
	if (_inner_error_ != NULL) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
}


/** Saves a song in the database during finding music to add. Only use with add_music. if id == 0, create new entry. Else
 * update its information
 * @param id The rowid to update
 * @param s The song to save
 */
void beat_box_data_base_manager_add_song_mass (BeatBoxDataBaseManager* self, BeatBoxSong* s, gboolean saving) {
	const gchar* _tmp0_ = NULL;
	const gchar* _tmp1_ = NULL;
	const gchar* _tmp2_ = NULL;
	const gchar* _tmp3_ = NULL;
	const gchar* _tmp4_ = NULL;
	const gchar* _tmp5_ = NULL;
	gint _tmp6_;
	gint _tmp7_;
	gint _tmp8_;
	gint _tmp9_;
	gint _tmp10_;
	gint _tmp11_;
	gint _tmp12_;
	gint _tmp13_;
	gint _tmp14_;
	SQLHeavyQueryResult* _tmp16_ = NULL;
	SQLHeavyQueryResult* _tmp17_;
	GError * _inner_error_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (s != NULL);
	_tmp0_ = beat_box_song_get_file (s);
	sql_heavy_query_set_string (self->priv->query, ":file", _tmp0_, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch10_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp1_ = beat_box_song_get_title (s);
	sql_heavy_query_set_string (self->priv->query, ":title", _tmp1_, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch10_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp2_ = beat_box_song_get_artist (s);
	sql_heavy_query_set_string (self->priv->query, ":artist", _tmp2_, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch10_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp3_ = beat_box_song_get_album (s);
	sql_heavy_query_set_string (self->priv->query, ":album", _tmp3_, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch10_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp4_ = beat_box_song_get_genre (s);
	sql_heavy_query_set_string (self->priv->query, ":genre", _tmp4_, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch10_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp5_ = beat_box_song_get_comment (s);
	sql_heavy_query_set_string (self->priv->query, ":comment", _tmp5_, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch10_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp6_ = beat_box_song_get_year (s);
	sql_heavy_query_set_int (self->priv->query, ":year", _tmp6_, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch10_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp7_ = beat_box_song_get_track (s);
	sql_heavy_query_set_int (self->priv->query, ":track", _tmp7_, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch10_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp8_ = beat_box_song_get_bitrate (s);
	sql_heavy_query_set_int (self->priv->query, ":bitrate", _tmp8_, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch10_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp9_ = beat_box_song_get_length (s);
	sql_heavy_query_set_int (self->priv->query, ":length", _tmp9_, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch10_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp10_ = beat_box_song_get_samplerate (s);
	sql_heavy_query_set_int (self->priv->query, ":samplerate", _tmp10_, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch10_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp11_ = beat_box_song_get_rating (s);
	sql_heavy_query_set_int (self->priv->query, ":rating", _tmp11_, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch10_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp12_ = beat_box_song_get_play_count (s);
	sql_heavy_query_set_int (self->priv->query, ":playcount", _tmp12_, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch10_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp13_ = beat_box_song_get_date_added (s);
	sql_heavy_query_set_int (self->priv->query, ":dateadded", _tmp13_, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch10_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp14_ = beat_box_song_get_last_played (s);
	sql_heavy_query_set_int (self->priv->query, ":lastplayed", _tmp14_, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch10_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	if (saving) {
		gint _tmp15_;
		_tmp15_ = beat_box_song_get_rowid (s);
		sql_heavy_query_set_int (self->priv->query, ":rowid", _tmp15_, &_inner_error_);
		if (_inner_error_ != NULL) {
			if (_inner_error_->domain == SQL_HEAVY_ERROR) {
				goto __catch10_sql_heavy_error;
			}
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return;
		}
	}
	_tmp16_ = sql_heavy_query_execute (self->priv->query, NULL, &_inner_error_, NULL);
	_tmp17_ = _tmp16_;
	_g_object_unref0 (_tmp17_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch10_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	goto __finally10;
	__catch10_sql_heavy_error:
	{
		GError * err;
		gint _tmp18_;
		err = _inner_error_;
		_inner_error_ = NULL;
		_tmp18_ = beat_box_song_get_rowid (s);
		fprintf (stdout, "Could not set query to save song %d: %s \n", _tmp18_, err->message);
		_g_error_free0 (err);
	}
	__finally10:
	if (_inner_error_ != NULL) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
}


void beat_box_data_base_manager_remove_songs (BeatBoxDataBaseManager* self, GeeCollection* songs) {
	SQLHeavyTransaction* _tmp0_ = NULL;
	SQLHeavyTransaction* _tmp1_;
	SQLHeavyTransaction* _tmp2_;
	SQLHeavyQuery* _tmp3_ = NULL;
	SQLHeavyQuery* query;
	gint _tmp4_;
	GError * _inner_error_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (songs != NULL);
	_tmp0_ = sql_heavy_queryable_begin_transaction ((SQLHeavyQueryable*) self->priv->_db, &_inner_error_);
	_tmp1_ = _tmp0_;
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch11_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp2_ = _tmp1_;
	_g_object_unref0 (self->priv->transaction);
	self->priv->transaction = _tmp2_;
	_tmp3_ = sql_heavy_queryable_prepare ((SQLHeavyQueryable*) self->priv->transaction, "DELETE FROM `songs` WHERE file=:file", &_inner_error_);
	query = _tmp3_;
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch11_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	self->priv->index = 0;
	_tmp4_ = gee_collection_get_size (songs);
	self->priv->item_count = _tmp4_;
	{
		GeeIterator* _tmp5_ = NULL;
		GeeIterator* _s_it;
		_tmp5_ = gee_iterable_iterator ((GeeIterable*) songs);
		_s_it = _tmp5_;
		while (TRUE) {
			gboolean _tmp6_;
			gpointer _tmp7_ = NULL;
			gchar* s;
			gint _tmp8_;
			SQLHeavyQueryResult* _tmp9_ = NULL;
			SQLHeavyQueryResult* _tmp10_;
			_tmp6_ = gee_iterator_next (_s_it);
			if (!_tmp6_) {
				break;
			}
			_tmp7_ = gee_iterator_get (_s_it);
			s = (gchar*) _tmp7_;
			_tmp8_ = self->priv->index;
			self->priv->index = _tmp8_ + 1;
			g_signal_emit_by_name (self, "db-progress", NULL, ((gdouble) _tmp8_) / ((gdouble) self->priv->item_count));
			sql_heavy_query_set_string (query, ":file", s, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_free0 (s);
				_g_object_unref0 (_s_it);
				_g_object_unref0 (query);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch11_sql_heavy_error;
				}
				_g_free0 (s);
				_g_object_unref0 (_s_it);
				_g_object_unref0 (query);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp9_ = sql_heavy_query_execute (query, NULL, &_inner_error_, NULL);
			_tmp10_ = _tmp9_;
			_g_object_unref0 (_tmp10_);
			if (_inner_error_ != NULL) {
				_g_free0 (s);
				_g_object_unref0 (_s_it);
				_g_object_unref0 (query);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch11_sql_heavy_error;
				}
				_g_free0 (s);
				_g_object_unref0 (_s_it);
				_g_object_unref0 (query);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_g_free0 (s);
		}
		_g_object_unref0 (_s_it);
	}
	sql_heavy_transaction_commit (self->priv->transaction, &_inner_error_);
	if (_inner_error_ != NULL) {
		_g_object_unref0 (query);
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch11_sql_heavy_error;
		}
		_g_object_unref0 (query);
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_g_object_unref0 (query);
	goto __finally11;
	__catch11_sql_heavy_error:
	{
		GError * err;
		err = _inner_error_;
		_inner_error_ = NULL;
		fprintf (stdout, "Could not load song from db: %s\n", err->message);
		_g_error_free0 (err);
	}
	__finally11:
	if (_inner_error_ != NULL) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
}


/** PLAYLISTS **
 * load_playlists() loads playlists from db
 * 
 * playlist_from_id loads playlist of given rowid
 * 
 * playlist_from_name() loads playlsit given a name
 */
GeeArrayList* beat_box_data_base_manager_load_playlists (BeatBoxDataBaseManager* self) {
	GeeArrayList* result = NULL;
	GeeArrayList* _tmp0_ = NULL;
	GeeArrayList* rv;
	gchar* _tmp1_;
	gchar* script;
	SQLHeavyQuery* _tmp2_ = NULL;
	SQLHeavyQuery* query;
	GError * _inner_error_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = gee_array_list_new (BEAT_BOX_TYPE_PLAYLIST, (GBoxedCopyFunc) g_object_ref, g_object_unref, NULL);
	rv = _tmp0_;
	_tmp1_ = g_strdup ("SELECT rowid,* FROM `playlists`");
	script = _tmp1_;
	_tmp2_ = sql_heavy_query_new ((SQLHeavyQueryable*) self->priv->_db, script, &_inner_error_);
	query = _tmp2_;
	if (_inner_error_ != NULL) {
		_g_free0 (script);
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch12_sql_heavy_error;
		}
		_g_free0 (script);
		_g_object_unref0 (rv);
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return NULL;
	}
	{
		SQLHeavyQueryResult* _tmp3_ = NULL;
		SQLHeavyQueryResult* results;
		_tmp3_ = sql_heavy_query_execute (query, NULL, &_inner_error_, NULL);
		results = _tmp3_;
		if (_inner_error_ != NULL) {
			_g_object_unref0 (query);
			_g_free0 (script);
			if (_inner_error_->domain == SQL_HEAVY_ERROR) {
				goto __catch12_sql_heavy_error;
			}
			_g_object_unref0 (query);
			_g_free0 (script);
			_g_object_unref0 (rv);
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return NULL;
		}
		{
			gboolean _tmp4_;
			_tmp4_ = TRUE;
			while (TRUE) {
				gboolean _tmp5_;
				gint _tmp6_;
				gint _tmp7_;
				gchar* _tmp8_ = NULL;
				gchar* _tmp9_;
				gchar* _tmp10_;
				BeatBoxPlaylist* _tmp11_ = NULL;
				BeatBoxPlaylist* _tmp12_;
				BeatBoxPlaylist* p;
				gchar* _tmp13_ = NULL;
				gchar* _tmp14_;
				gchar* _tmp15_;
				if (!_tmp4_) {
					sql_heavy_record_set_next ((SQLHeavyRecordSet*) results, &_inner_error_);
					if (_inner_error_ != NULL) {
						_g_object_unref0 (results);
						_g_object_unref0 (query);
						_g_free0 (script);
						if (_inner_error_->domain == SQL_HEAVY_ERROR) {
							goto __catch12_sql_heavy_error;
						}
						_g_object_unref0 (results);
						_g_object_unref0 (query);
						_g_free0 (script);
						_g_object_unref0 (rv);
						g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
						g_clear_error (&_inner_error_);
						return NULL;
					}
				}
				_tmp4_ = FALSE;
				_tmp5_ = sql_heavy_query_result_get_finished (results);
				if (!(!_tmp5_)) {
					break;
				}
				_tmp6_ = sql_heavy_record_fetch_int ((SQLHeavyRecord*) results, 0, &_inner_error_);
				_tmp7_ = _tmp6_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch12_sql_heavy_error;
					}
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				_tmp8_ = sql_heavy_record_fetch_string ((SQLHeavyRecord*) results, 1, &_inner_error_);
				_tmp9_ = _tmp8_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch12_sql_heavy_error;
					}
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				_tmp10_ = _tmp9_;
				_tmp11_ = beat_box_playlist_new_with_info (_tmp7_, _tmp10_);
				p = (_tmp12_ = _tmp11_, _g_free0 (_tmp10_), _tmp12_);
				_tmp13_ = sql_heavy_record_fetch_string ((SQLHeavyRecord*) results, 2, &_inner_error_);
				_tmp14_ = _tmp13_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (p);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch12_sql_heavy_error;
					}
					_g_object_unref0 (p);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				_tmp15_ = _tmp14_;
				beat_box_playlist_songs_from_string (p, _tmp15_);
				_g_free0 (_tmp15_);
				gee_abstract_collection_add ((GeeAbstractCollection*) rv, p);
				_g_object_unref0 (p);
			}
		}
		_g_object_unref0 (results);
	}
	_g_object_unref0 (query);
	_g_free0 (script);
	goto __finally12;
	__catch12_sql_heavy_error:
	{
		GError * err;
		err = _inner_error_;
		_inner_error_ = NULL;
		fprintf (stdout, "Could not load song from db: %s\n", err->message);
		_g_error_free0 (err);
	}
	__finally12:
	if (_inner_error_ != NULL) {
		_g_object_unref0 (rv);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return NULL;
	}
	result = rv;
	return result;
}


void beat_box_data_base_manager_save_playlists (BeatBoxDataBaseManager* self, GeeCollection* playlists) {
	SQLHeavyTransaction* _tmp0_ = NULL;
	SQLHeavyTransaction* _tmp1_;
	SQLHeavyTransaction* _tmp2_;
	SQLHeavyQuery* _tmp3_ = NULL;
	SQLHeavyQuery* _tmp4_;
	SQLHeavyQuery* _tmp5_;
	gint _tmp6_;
	GError * _inner_error_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (playlists != NULL);
	sql_heavy_queryable_execute ((SQLHeavyQueryable*) self->priv->_db, "DELETE FROM `playlists`", (gssize) (-1), &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch13_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp0_ = sql_heavy_queryable_begin_transaction ((SQLHeavyQueryable*) self->priv->_db, &_inner_error_);
	_tmp1_ = _tmp0_;
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch13_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp2_ = _tmp1_;
	_g_object_unref0 (self->priv->transaction);
	self->priv->transaction = _tmp2_;
	_tmp3_ = sql_heavy_queryable_prepare ((SQLHeavyQueryable*) self->priv->transaction, "INSERT INTO `playlists` (`name`, `songs`) VALUES (:name, :songs);", &_inner_error_);
	_tmp4_ = _tmp3_;
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch13_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp5_ = _tmp4_;
	_g_object_unref0 (self->priv->query);
	self->priv->query = _tmp5_;
	self->priv->index = 0;
	_tmp6_ = gee_collection_get_size (playlists);
	self->priv->item_count = _tmp6_;
	{
		GeeIterator* _tmp7_ = NULL;
		GeeIterator* _p_it;
		_tmp7_ = gee_iterable_iterator ((GeeIterable*) playlists);
		_p_it = _tmp7_;
		while (TRUE) {
			gboolean _tmp8_;
			gpointer _tmp9_ = NULL;
			BeatBoxPlaylist* p;
			gint _tmp10_;
			const gchar* _tmp11_ = NULL;
			gchar* _tmp12_ = NULL;
			gchar* _tmp13_;
			SQLHeavyQueryResult* _tmp14_ = NULL;
			SQLHeavyQueryResult* _tmp15_;
			_tmp8_ = gee_iterator_next (_p_it);
			if (!_tmp8_) {
				break;
			}
			_tmp9_ = gee_iterator_get (_p_it);
			p = (BeatBoxPlaylist*) _tmp9_;
			_tmp10_ = self->priv->index;
			self->priv->index = _tmp10_ + 1;
			g_signal_emit_by_name (self, "db-progress", NULL, ((gdouble) _tmp10_) / ((gdouble) self->priv->item_count));
			_tmp11_ = beat_box_playlist_get_name (p);
			sql_heavy_query_set_string (self->priv->query, ":name", _tmp11_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (p);
				_g_object_unref0 (_p_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch13_sql_heavy_error;
				}
				_g_object_unref0 (p);
				_g_object_unref0 (_p_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp12_ = beat_box_playlist_songs_to_string (p);
			_tmp13_ = _tmp12_;
			sql_heavy_query_set_string (self->priv->query, ":songs", _tmp13_, &_inner_error_);
			_g_free0 (_tmp13_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (p);
				_g_object_unref0 (_p_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch13_sql_heavy_error;
				}
				_g_object_unref0 (p);
				_g_object_unref0 (_p_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp14_ = sql_heavy_query_execute (self->priv->query, NULL, &_inner_error_, NULL);
			_tmp15_ = _tmp14_;
			_g_object_unref0 (_tmp15_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (p);
				_g_object_unref0 (_p_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch13_sql_heavy_error;
				}
				_g_object_unref0 (p);
				_g_object_unref0 (_p_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_g_object_unref0 (p);
		}
		_g_object_unref0 (_p_it);
	}
	sql_heavy_transaction_commit (self->priv->transaction, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch13_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	goto __finally13;
	__catch13_sql_heavy_error:
	{
		GError * err;
		err = _inner_error_;
		_inner_error_ = NULL;
		fprintf (stdout, "Could not save playlists: %s \n", err->message);
		_g_error_free0 (err);
	}
	__finally13:
	if (_inner_error_ != NULL) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
}


/** SMART PLAYLISTS **
 * load_smart_playlists() loads smart playlists from db
 * 
 * smart_playlist_from_id() loads smart playlist by rowid
 * 
 * smart_playlist_from_name() searches db for smart playlist with given name
 */
GeeArrayList* beat_box_data_base_manager_load_smart_playlists (BeatBoxDataBaseManager* self) {
	GeeArrayList* result = NULL;
	GeeArrayList* _tmp0_ = NULL;
	GeeArrayList* rv;
	gchar* _tmp1_;
	gchar* script;
	SQLHeavyQuery* _tmp2_ = NULL;
	SQLHeavyQuery* query;
	GError * _inner_error_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = gee_array_list_new (BEAT_BOX_TYPE_SMART_PLAYLIST, (GBoxedCopyFunc) g_object_ref, g_object_unref, NULL);
	rv = _tmp0_;
	_tmp1_ = g_strdup ("SELECT rowid,* FROM `smart_playlists`");
	script = _tmp1_;
	_tmp2_ = sql_heavy_query_new ((SQLHeavyQueryable*) self->priv->_db, script, &_inner_error_);
	query = _tmp2_;
	if (_inner_error_ != NULL) {
		_g_free0 (script);
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch14_sql_heavy_error;
		}
		_g_free0 (script);
		_g_object_unref0 (rv);
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return NULL;
	}
	{
		SQLHeavyQueryResult* _tmp3_ = NULL;
		SQLHeavyQueryResult* results;
		_tmp3_ = sql_heavy_query_execute (query, NULL, &_inner_error_, NULL);
		results = _tmp3_;
		if (_inner_error_ != NULL) {
			_g_object_unref0 (query);
			_g_free0 (script);
			if (_inner_error_->domain == SQL_HEAVY_ERROR) {
				goto __catch14_sql_heavy_error;
			}
			_g_object_unref0 (query);
			_g_free0 (script);
			_g_object_unref0 (rv);
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return NULL;
		}
		{
			gboolean _tmp4_;
			_tmp4_ = TRUE;
			while (TRUE) {
				gboolean _tmp5_;
				BeatBoxSmartPlaylist* _tmp6_ = NULL;
				BeatBoxSmartPlaylist* p;
				gint _tmp7_;
				gint _tmp8_;
				gchar* _tmp9_ = NULL;
				gchar* _tmp10_;
				gchar* _tmp11_;
				gchar* _tmp12_ = NULL;
				gchar* _tmp13_;
				gchar* _tmp14_;
				gchar* _tmp15_ = NULL;
				gchar* _tmp16_;
				gchar* _tmp17_;
				if (!_tmp4_) {
					sql_heavy_record_set_next ((SQLHeavyRecordSet*) results, &_inner_error_);
					if (_inner_error_ != NULL) {
						_g_object_unref0 (results);
						_g_object_unref0 (query);
						_g_free0 (script);
						if (_inner_error_->domain == SQL_HEAVY_ERROR) {
							goto __catch14_sql_heavy_error;
						}
						_g_object_unref0 (results);
						_g_object_unref0 (query);
						_g_free0 (script);
						_g_object_unref0 (rv);
						g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
						g_clear_error (&_inner_error_);
						return NULL;
					}
				}
				_tmp4_ = FALSE;
				_tmp5_ = sql_heavy_query_result_get_finished (results);
				if (!(!_tmp5_)) {
					break;
				}
				_tmp6_ = beat_box_smart_playlist_new ();
				p = _tmp6_;
				_tmp7_ = sql_heavy_record_fetch_int ((SQLHeavyRecord*) results, 0, &_inner_error_);
				_tmp8_ = _tmp7_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (p);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch14_sql_heavy_error;
					}
					_g_object_unref0 (p);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				beat_box_smart_playlist_set_rowid (p, _tmp8_);
				_tmp9_ = sql_heavy_record_fetch_string ((SQLHeavyRecord*) results, 1, &_inner_error_);
				_tmp10_ = _tmp9_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (p);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch14_sql_heavy_error;
					}
					_g_object_unref0 (p);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				_tmp11_ = _tmp10_;
				beat_box_smart_playlist_set_name (p, _tmp11_);
				_g_free0 (_tmp11_);
				_tmp12_ = sql_heavy_record_fetch_string ((SQLHeavyRecord*) results, 2, &_inner_error_);
				_tmp13_ = _tmp12_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (p);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch14_sql_heavy_error;
					}
					_g_object_unref0 (p);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				_tmp14_ = _tmp13_;
				beat_box_smart_playlist_set_conditional (p, _tmp14_);
				_g_free0 (_tmp14_);
				_tmp15_ = sql_heavy_record_fetch_string ((SQLHeavyRecord*) results, 3, &_inner_error_);
				_tmp16_ = _tmp15_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (p);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch14_sql_heavy_error;
					}
					_g_object_unref0 (p);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				_tmp17_ = _tmp16_;
				beat_box_smart_playlist_queries_from_string (p, _tmp17_);
				_g_free0 (_tmp17_);
				gee_abstract_collection_add ((GeeAbstractCollection*) rv, p);
				_g_object_unref0 (p);
			}
		}
		_g_object_unref0 (results);
	}
	_g_object_unref0 (query);
	_g_free0 (script);
	goto __finally14;
	__catch14_sql_heavy_error:
	{
		GError * err;
		err = _inner_error_;
		_inner_error_ = NULL;
		fprintf (stdout, "Could not load song from db: %s\n", err->message);
		_g_error_free0 (err);
	}
	__finally14:
	if (_inner_error_ != NULL) {
		_g_object_unref0 (rv);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return NULL;
	}
	result = rv;
	return result;
}


void beat_box_data_base_manager_save_smart_playlists (BeatBoxDataBaseManager* self, GeeCollection* smarts) {
	SQLHeavyTransaction* _tmp0_ = NULL;
	SQLHeavyTransaction* _tmp1_;
	SQLHeavyTransaction* _tmp2_;
	SQLHeavyQuery* _tmp3_ = NULL;
	SQLHeavyQuery* _tmp4_;
	SQLHeavyQuery* _tmp5_;
	gint _tmp6_;
	GError * _inner_error_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (smarts != NULL);
	sql_heavy_queryable_execute ((SQLHeavyQueryable*) self->priv->_db, "DELETE FROM `smart_playlists`", (gssize) (-1), &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch15_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp0_ = sql_heavy_queryable_begin_transaction ((SQLHeavyQueryable*) self->priv->_db, &_inner_error_);
	_tmp1_ = _tmp0_;
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch15_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp2_ = _tmp1_;
	_g_object_unref0 (self->priv->transaction);
	self->priv->transaction = _tmp2_;
	_tmp3_ = sql_heavy_queryable_prepare ((SQLHeavyQueryable*) self->priv->transaction, "INSERT INTO `smart_playlists` (`name`, `and_or`, `queries`) VALUES (:n" \
"ame, :and_or, :queries);", &_inner_error_);
	_tmp4_ = _tmp3_;
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch15_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp5_ = _tmp4_;
	_g_object_unref0 (self->priv->query);
	self->priv->query = _tmp5_;
	self->priv->index = 0;
	_tmp6_ = gee_collection_get_size (smarts);
	self->priv->item_count = _tmp6_;
	{
		GeeIterator* _tmp7_ = NULL;
		GeeIterator* _s_it;
		_tmp7_ = gee_iterable_iterator ((GeeIterable*) smarts);
		_s_it = _tmp7_;
		while (TRUE) {
			gboolean _tmp8_;
			gpointer _tmp9_ = NULL;
			BeatBoxSmartPlaylist* s;
			gint _tmp10_;
			const gchar* _tmp11_ = NULL;
			const gchar* _tmp12_ = NULL;
			gchar* _tmp13_ = NULL;
			gchar* _tmp14_;
			SQLHeavyQueryResult* _tmp15_ = NULL;
			SQLHeavyQueryResult* _tmp16_;
			_tmp8_ = gee_iterator_next (_s_it);
			if (!_tmp8_) {
				break;
			}
			_tmp9_ = gee_iterator_get (_s_it);
			s = (BeatBoxSmartPlaylist*) _tmp9_;
			_tmp10_ = self->priv->index;
			self->priv->index = _tmp10_ + 1;
			g_signal_emit_by_name (self, "db-progress", NULL, ((gdouble) _tmp10_) / ((gdouble) self->priv->item_count));
			_tmp11_ = beat_box_smart_playlist_get_name (s);
			sql_heavy_query_set_string (self->priv->query, ":name", _tmp11_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (s);
				_g_object_unref0 (_s_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch15_sql_heavy_error;
				}
				_g_object_unref0 (s);
				_g_object_unref0 (_s_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp12_ = beat_box_smart_playlist_get_conditional (s);
			sql_heavy_query_set_string (self->priv->query, ":and_or", _tmp12_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (s);
				_g_object_unref0 (_s_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch15_sql_heavy_error;
				}
				_g_object_unref0 (s);
				_g_object_unref0 (_s_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp13_ = beat_box_smart_playlist_queries_to_string (s);
			_tmp14_ = _tmp13_;
			sql_heavy_query_set_string (self->priv->query, ":queries", _tmp14_, &_inner_error_);
			_g_free0 (_tmp14_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (s);
				_g_object_unref0 (_s_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch15_sql_heavy_error;
				}
				_g_object_unref0 (s);
				_g_object_unref0 (_s_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp15_ = sql_heavy_query_execute (self->priv->query, NULL, &_inner_error_, NULL);
			_tmp16_ = _tmp15_;
			_g_object_unref0 (_tmp16_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (s);
				_g_object_unref0 (_s_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch15_sql_heavy_error;
				}
				_g_object_unref0 (s);
				_g_object_unref0 (_s_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_g_object_unref0 (s);
		}
		_g_object_unref0 (_s_it);
	}
	sql_heavy_transaction_commit (self->priv->transaction, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch15_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	goto __finally15;
	__catch15_sql_heavy_error:
	{
		GError * err;
		err = _inner_error_;
		_inner_error_ = NULL;
		fprintf (stdout, "Could not save smart playlists: %s \n", err->message);
		_g_error_free0 (err);
	}
	__finally15:
	if (_inner_error_ != NULL) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
}


void beat_box_data_base_manager_save_albums (BeatBoxDataBaseManager* self, GeeCollection* albums) {
	SQLHeavyTransaction* _tmp0_ = NULL;
	SQLHeavyTransaction* _tmp1_;
	SQLHeavyTransaction* _tmp2_;
	SQLHeavyQuery* _tmp3_ = NULL;
	SQLHeavyQuery* _tmp4_;
	SQLHeavyQuery* _tmp5_;
	GError * _inner_error_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (albums != NULL);
	sql_heavy_queryable_execute ((SQLHeavyQueryable*) self->priv->_db, "DELETE FROM `albums`", (gssize) (-1), &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch16_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp0_ = sql_heavy_queryable_begin_transaction ((SQLHeavyQueryable*) self->priv->_db, &_inner_error_);
	_tmp1_ = _tmp0_;
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch16_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp2_ = _tmp1_;
	_g_object_unref0 (self->priv->transaction);
	self->priv->transaction = _tmp2_;
	_tmp3_ = sql_heavy_queryable_prepare ((SQLHeavyQueryable*) self->priv->transaction, "INSERT INTO `albums` (`name`, 'artist', `mbid`, `url`, 'release_date'," \
" 'listeners', 'playcount', 'tags', 'url_image') VALUES (:name, :artist" \
", :mbid, :url, :release_date, :listeners, :playcount, :tags, :url_imag" \
"e);", &_inner_error_);
	_tmp4_ = _tmp3_;
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch16_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp5_ = _tmp4_;
	_g_object_unref0 (self->priv->query);
	self->priv->query = _tmp5_;
	{
		GeeIterator* _tmp6_ = NULL;
		GeeIterator* _a_it;
		_tmp6_ = gee_iterable_iterator ((GeeIterable*) albums);
		_a_it = _tmp6_;
		while (TRUE) {
			gboolean _tmp7_;
			gpointer _tmp8_ = NULL;
			LastFMAlbumInfo* a;
			const gchar* _tmp9_ = NULL;
			const gchar* _tmp10_ = NULL;
			const gchar* _tmp11_ = NULL;
			const gchar* _tmp12_ = NULL;
			const gchar* _tmp13_ = NULL;
			gint _tmp14_;
			gint _tmp15_;
			gchar* _tmp16_;
			gchar* tags;
			LastFMImage* _tmp26_ = NULL;
			gchar* _tmp27_ = NULL;
			gchar* _tmp28_;
			SQLHeavyQueryResult* _tmp29_ = NULL;
			SQLHeavyQueryResult* _tmp30_;
			_tmp7_ = gee_iterator_next (_a_it);
			if (!_tmp7_) {
				break;
			}
			_tmp8_ = gee_iterator_get (_a_it);
			a = (LastFMAlbumInfo*) _tmp8_;
			_tmp9_ = last_fm_album_info_get_name (a);
			sql_heavy_query_set_string (self->priv->query, ":name", _tmp9_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch16_sql_heavy_error;
				}
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp10_ = last_fm_album_info_get_artist (a);
			sql_heavy_query_set_string (self->priv->query, ":artist", _tmp10_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch16_sql_heavy_error;
				}
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp11_ = last_fm_album_info_get_mbid (a);
			sql_heavy_query_set_string (self->priv->query, ":mbid", _tmp11_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch16_sql_heavy_error;
				}
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp12_ = last_fm_album_info_get_url (a);
			sql_heavy_query_set_string (self->priv->query, ":url", _tmp12_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch16_sql_heavy_error;
				}
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp13_ = last_fm_album_info_get_releasedate (a);
			sql_heavy_query_set_string (self->priv->query, ":release_date", _tmp13_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch16_sql_heavy_error;
				}
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp14_ = last_fm_album_info_get_listeners (a);
			sql_heavy_query_set_int (self->priv->query, ":listeners", _tmp14_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch16_sql_heavy_error;
				}
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp15_ = last_fm_album_info_get_playcount (a);
			sql_heavy_query_set_int (self->priv->query, ":playcount", _tmp15_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch16_sql_heavy_error;
				}
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp16_ = g_strdup ("");
			tags = _tmp16_;
			{
				GeeArrayList* _tmp17_ = NULL;
				GeeArrayList* _tag_list;
				gint _tmp18_;
				gint _tag_size;
				gint _tag_index;
				_tmp17_ = last_fm_album_info_tags (a);
				_tag_list = _tmp17_;
				_tmp18_ = gee_collection_get_size ((GeeCollection*) _tag_list);
				_tag_size = _tmp18_;
				_tag_index = -1;
				while (TRUE) {
					gpointer _tmp19_ = NULL;
					LastFMTag* tag;
					const gchar* _tmp20_ = NULL;
					gchar* _tmp21_;
					const gchar* _tmp22_ = NULL;
					gchar* _tmp23_;
					gchar* _tmp24_;
					gchar* _tmp25_;
					_tag_index = _tag_index + 1;
					if (!(_tag_index < _tag_size)) {
						break;
					}
					_tmp19_ = gee_abstract_list_get ((GeeAbstractList*) _tag_list, _tag_index);
					tag = (LastFMTag*) _tmp19_;
					_tmp20_ = last_fm_tag_get_tag (tag);
					_tmp21_ = g_strconcat (_tmp20_, "<value_seperator>", NULL);
					_tmp22_ = last_fm_tag_get_url (tag);
					_tmp23_ = g_strconcat (_tmp21_, _tmp22_, NULL);
					_tmp24_ = g_strconcat (_tmp23_, "<tag_seperator>", NULL);
					_tmp25_ = g_strconcat (tags, _tmp24_, NULL);
					_g_free0 (tags);
					tags = _tmp25_;
					_g_free0 (_tmp24_);
					_g_free0 (_tmp23_);
					_g_free0 (_tmp21_);
					_g_object_unref0 (tag);
				}
				_g_object_unref0 (_tag_list);
			}
			sql_heavy_query_set_string (self->priv->query, ":tags", tags, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_free0 (tags);
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch16_sql_heavy_error;
				}
				_g_free0 (tags);
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp26_ = last_fm_album_info_get_url_image (a);
			_tmp27_ = last_fm_image_to_string (_tmp26_);
			_tmp28_ = _tmp27_;
			sql_heavy_query_set_string (self->priv->query, ":url_image", _tmp28_, &_inner_error_);
			_g_free0 (_tmp28_);
			if (_inner_error_ != NULL) {
				_g_free0 (tags);
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch16_sql_heavy_error;
				}
				_g_free0 (tags);
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp29_ = sql_heavy_query_execute (self->priv->query, NULL, &_inner_error_, NULL);
			_tmp30_ = _tmp29_;
			_g_object_unref0 (_tmp30_);
			if (_inner_error_ != NULL) {
				_g_free0 (tags);
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch16_sql_heavy_error;
				}
				_g_free0 (tags);
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_g_free0 (tags);
			_g_object_unref0 (a);
		}
		_g_object_unref0 (_a_it);
	}
	sql_heavy_transaction_commit (self->priv->transaction, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch16_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	goto __finally16;
	__catch16_sql_heavy_error:
	{
		GError * err;
		err = _inner_error_;
		_inner_error_ = NULL;
		fprintf (stdout, "Could not save albums: %s\n", err->message);
		_g_error_free0 (err);
	}
	__finally16:
	if (_inner_error_ != NULL) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
}


GeeCollection* beat_box_data_base_manager_load_albums (BeatBoxDataBaseManager* self) {
	GeeCollection* result = NULL;
	GeeArrayList* _tmp0_ = NULL;
	GeeArrayList* rv;
	gchar* _tmp1_;
	gchar* script;
	SQLHeavyQuery* _tmp2_ = NULL;
	SQLHeavyQuery* query;
	GError * _inner_error_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = gee_array_list_new (LAST_FM_TYPE_ALBUM_INFO, (GBoxedCopyFunc) g_object_ref, g_object_unref, NULL);
	rv = _tmp0_;
	_tmp1_ = g_strdup ("SELECT rowid,* FROM `albums`");
	script = _tmp1_;
	_tmp2_ = sql_heavy_query_new ((SQLHeavyQueryable*) self->priv->_db, script, &_inner_error_);
	query = _tmp2_;
	if (_inner_error_ != NULL) {
		_g_free0 (script);
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch17_sql_heavy_error;
		}
		_g_free0 (script);
		_g_object_unref0 (rv);
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return NULL;
	}
	{
		SQLHeavyQueryResult* _tmp3_ = NULL;
		SQLHeavyQueryResult* results;
		_tmp3_ = sql_heavy_query_execute (query, NULL, &_inner_error_, NULL);
		results = _tmp3_;
		if (_inner_error_ != NULL) {
			_g_object_unref0 (query);
			_g_free0 (script);
			if (_inner_error_->domain == SQL_HEAVY_ERROR) {
				goto __catch17_sql_heavy_error;
			}
			_g_object_unref0 (query);
			_g_free0 (script);
			_g_object_unref0 (rv);
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return NULL;
		}
		{
			gboolean _tmp4_;
			_tmp4_ = TRUE;
			while (TRUE) {
				gboolean _tmp5_;
				LastFMAlbumInfo* _tmp6_ = NULL;
				LastFMAlbumInfo* a;
				gint _tmp7_;
				gint rowid;
				gchar* _tmp8_ = NULL;
				gchar* _tmp9_;
				gchar* _tmp10_;
				gchar* _tmp11_ = NULL;
				gchar* _tmp12_;
				gchar* _tmp13_;
				gchar* _tmp14_ = NULL;
				gchar* _tmp15_;
				gchar* _tmp16_;
				gchar* _tmp17_ = NULL;
				gchar* _tmp18_;
				gchar* _tmp19_;
				gchar* _tmp20_ = NULL;
				gchar* _tmp21_;
				gchar* _tmp22_;
				gint _tmp23_;
				gint _tmp24_;
				gint _tmp25_;
				gint _tmp26_;
				gchar* _tmp27_ = NULL;
				gchar* tag_string;
				gchar** _tmp28_;
				gchar** _tmp29_ = NULL;
				gchar** tag_strings;
				gint tag_strings_length1;
				gint _tag_strings_size_;
				gint index = 0;
				gchar* _tmp34_ = NULL;
				gchar* url_image;
				gboolean _tmp35_ = FALSE;
				if (!_tmp4_) {
					sql_heavy_record_set_next ((SQLHeavyRecordSet*) results, &_inner_error_);
					if (_inner_error_ != NULL) {
						_g_object_unref0 (results);
						_g_object_unref0 (query);
						_g_free0 (script);
						if (_inner_error_->domain == SQL_HEAVY_ERROR) {
							goto __catch17_sql_heavy_error;
						}
						_g_object_unref0 (results);
						_g_object_unref0 (query);
						_g_free0 (script);
						_g_object_unref0 (rv);
						g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
						g_clear_error (&_inner_error_);
						return NULL;
					}
				}
				_tmp4_ = FALSE;
				_tmp5_ = sql_heavy_query_result_get_finished (results);
				if (!(!_tmp5_)) {
					break;
				}
				_tmp6_ = last_fm_album_info_new_basic ();
				a = _tmp6_;
				_tmp7_ = sql_heavy_record_fetch_int ((SQLHeavyRecord*) results, 0, &_inner_error_);
				rowid = _tmp7_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch17_sql_heavy_error;
					}
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				_tmp8_ = sql_heavy_record_fetch_string ((SQLHeavyRecord*) results, 1, &_inner_error_);
				_tmp9_ = _tmp8_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch17_sql_heavy_error;
					}
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				_tmp10_ = _tmp9_;
				last_fm_album_info_set_name (a, _tmp10_);
				_g_free0 (_tmp10_);
				_tmp11_ = sql_heavy_record_fetch_string ((SQLHeavyRecord*) results, 2, &_inner_error_);
				_tmp12_ = _tmp11_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch17_sql_heavy_error;
					}
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				_tmp13_ = _tmp12_;
				last_fm_album_info_set_artist (a, _tmp13_);
				_g_free0 (_tmp13_);
				_tmp14_ = sql_heavy_record_fetch_string ((SQLHeavyRecord*) results, 3, &_inner_error_);
				_tmp15_ = _tmp14_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch17_sql_heavy_error;
					}
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				_tmp16_ = _tmp15_;
				last_fm_album_info_set_mbid (a, _tmp16_);
				_g_free0 (_tmp16_);
				_tmp17_ = sql_heavy_record_fetch_string ((SQLHeavyRecord*) results, 4, &_inner_error_);
				_tmp18_ = _tmp17_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch17_sql_heavy_error;
					}
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				_tmp19_ = _tmp18_;
				last_fm_album_info_set_url (a, _tmp19_);
				_g_free0 (_tmp19_);
				_tmp20_ = sql_heavy_record_fetch_string ((SQLHeavyRecord*) results, 5, &_inner_error_);
				_tmp21_ = _tmp20_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch17_sql_heavy_error;
					}
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				_tmp22_ = _tmp21_;
				last_fm_album_info_set_releasedate (a, _tmp22_);
				_g_free0 (_tmp22_);
				_tmp23_ = sql_heavy_record_fetch_int ((SQLHeavyRecord*) results, 6, &_inner_error_);
				_tmp24_ = _tmp23_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch17_sql_heavy_error;
					}
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				last_fm_album_info_set_listeners (a, _tmp24_);
				_tmp25_ = sql_heavy_record_fetch_int ((SQLHeavyRecord*) results, 7, &_inner_error_);
				_tmp26_ = _tmp25_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch17_sql_heavy_error;
					}
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				last_fm_album_info_set_playcount (a, _tmp26_);
				_tmp27_ = sql_heavy_record_fetch_string ((SQLHeavyRecord*) results, 8, &_inner_error_);
				tag_string = _tmp27_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch17_sql_heavy_error;
					}
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				_tmp29_ = _tmp28_ = g_strsplit (tag_string, "<tag_seperator>", 0);
				tag_strings = _tmp29_;
				tag_strings_length1 = _vala_array_length (_tmp28_);
				_tag_strings_size_ = _vala_array_length (_tmp28_);
				{
					gboolean _tmp30_;
					index = 0;
					_tmp30_ = TRUE;
					while (TRUE) {
						gchar** _tmp31_;
						gchar** _tmp32_ = NULL;
						gchar** tag_values;
						gint tag_values_length1;
						gint _tag_values_size_;
						LastFMTag* _tmp33_ = NULL;
						LastFMTag* t;
						if (!_tmp30_) {
							index = index + 1;
						}
						_tmp30_ = FALSE;
						if (!(index < (tag_strings_length1 - 1))) {
							break;
						}
						_tmp32_ = _tmp31_ = g_strsplit (tag_strings[index], "<value_seperator>", 0);
						tag_values = _tmp32_;
						tag_values_length1 = _vala_array_length (_tmp31_);
						_tag_values_size_ = _vala_array_length (_tmp31_);
						_tmp33_ = last_fm_tag_new_with_string_and_url (tag_values[0], tag_values[1]);
						t = _tmp33_;
						last_fm_album_info_addTag (a, t);
						_g_object_unref0 (t);
						tag_values = (_vala_array_free (tag_values, tag_values_length1, (GDestroyNotify) g_free), NULL);
					}
				}
				_tmp34_ = sql_heavy_record_fetch_string ((SQLHeavyRecord*) results, 9, &_inner_error_);
				url_image = _tmp34_;
				if (_inner_error_ != NULL) {
					tag_strings = (_vala_array_free (tag_strings, tag_strings_length1, (GDestroyNotify) g_free), NULL);
					_g_free0 (tag_string);
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch17_sql_heavy_error;
					}
					tag_strings = (_vala_array_free (tag_strings, tag_strings_length1, (GDestroyNotify) g_free), NULL);
					_g_free0 (tag_string);
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				if (url_image != NULL) {
					_tmp35_ = g_strcmp0 (url_image, "") != 0;
				} else {
					_tmp35_ = FALSE;
				}
				if (_tmp35_) {
					LastFMImage* _tmp36_ = NULL;
					LastFMImage* _tmp37_;
					_tmp36_ = last_fm_image_new_with_import_string (url_image);
					_tmp37_ = _tmp36_;
					last_fm_album_info_set_url_image (a, _tmp37_);
					_g_object_unref0 (_tmp37_);
				} else {
					LastFMImage* _tmp38_ = NULL;
					LastFMImage* _tmp39_;
					_tmp38_ = last_fm_image_new_basic ();
					_tmp39_ = _tmp38_;
					last_fm_album_info_set_url_image (a, _tmp39_);
					_g_object_unref0 (_tmp39_);
				}
				gee_abstract_collection_add ((GeeAbstractCollection*) rv, a);
				_g_free0 (url_image);
				tag_strings = (_vala_array_free (tag_strings, tag_strings_length1, (GDestroyNotify) g_free), NULL);
				_g_free0 (tag_string);
				_g_object_unref0 (a);
			}
		}
		_g_object_unref0 (results);
	}
	_g_object_unref0 (query);
	_g_free0 (script);
	goto __finally17;
	__catch17_sql_heavy_error:
	{
		GError * err;
		err = _inner_error_;
		_inner_error_ = NULL;
		fprintf (stdout, "Could not load albums from db: %s\n", err->message);
		_g_error_free0 (err);
	}
	__finally17:
	if (_inner_error_ != NULL) {
		_g_object_unref0 (rv);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return NULL;
	}
	result = (GeeCollection*) rv;
	return result;
}


GeeCollection* beat_box_data_base_manager_load_artists (BeatBoxDataBaseManager* self) {
	GeeCollection* result = NULL;
	GeeArrayList* _tmp0_ = NULL;
	GeeArrayList* rv;
	gchar* _tmp1_;
	gchar* script;
	SQLHeavyQuery* _tmp2_ = NULL;
	SQLHeavyQuery* query;
	GError * _inner_error_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = gee_array_list_new (LAST_FM_TYPE_ARTIST_INFO, (GBoxedCopyFunc) g_object_ref, g_object_unref, NULL);
	rv = _tmp0_;
	_tmp1_ = g_strdup ("SELECT rowid,* FROM `artists`");
	script = _tmp1_;
	_tmp2_ = sql_heavy_query_new ((SQLHeavyQueryable*) self->priv->_db, script, &_inner_error_);
	query = _tmp2_;
	if (_inner_error_ != NULL) {
		_g_free0 (script);
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch18_sql_heavy_error;
		}
		_g_free0 (script);
		_g_object_unref0 (rv);
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return NULL;
	}
	{
		SQLHeavyQueryResult* _tmp3_ = NULL;
		SQLHeavyQueryResult* results;
		_tmp3_ = sql_heavy_query_execute (query, NULL, &_inner_error_, NULL);
		results = _tmp3_;
		if (_inner_error_ != NULL) {
			_g_object_unref0 (query);
			_g_free0 (script);
			if (_inner_error_->domain == SQL_HEAVY_ERROR) {
				goto __catch18_sql_heavy_error;
			}
			_g_object_unref0 (query);
			_g_free0 (script);
			_g_object_unref0 (rv);
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return NULL;
		}
		{
			gboolean _tmp4_;
			_tmp4_ = TRUE;
			while (TRUE) {
				gboolean _tmp5_;
				LastFMArtistInfo* _tmp6_ = NULL;
				LastFMArtistInfo* a;
				gint _tmp7_;
				gint rowid;
				gchar* _tmp8_ = NULL;
				gchar* _tmp9_;
				gchar* _tmp10_;
				gchar* _tmp11_ = NULL;
				gchar* _tmp12_;
				gchar* _tmp13_;
				gchar* _tmp14_ = NULL;
				gchar* _tmp15_;
				gchar* _tmp16_;
				gint _tmp17_;
				gint _tmp18_;
				gint _tmp19_;
				gint _tmp20_;
				gint _tmp21_;
				gint _tmp22_;
				gchar* _tmp23_ = NULL;
				gchar* _tmp24_;
				gchar* _tmp25_;
				gchar* _tmp26_ = NULL;
				gchar* _tmp27_;
				gchar* _tmp28_;
				gchar* _tmp29_ = NULL;
				gchar* _tmp30_;
				gchar* _tmp31_;
				gchar* _tmp32_ = NULL;
				gchar* tag_string;
				gchar** _tmp33_;
				gchar** _tmp34_ = NULL;
				gchar** tag_strings;
				gint tag_strings_length1;
				gint _tag_strings_size_;
				gint index = 0;
				gchar* _tmp39_ = NULL;
				gchar* sim_string;
				gchar** _tmp40_;
				gchar** _tmp41_ = NULL;
				gchar** sim_strings;
				gint sim_strings_length1;
				gint _sim_strings_size_;
				gchar* _tmp46_ = NULL;
				gchar* url_image;
				gboolean _tmp47_ = FALSE;
				if (!_tmp4_) {
					sql_heavy_record_set_next ((SQLHeavyRecordSet*) results, &_inner_error_);
					if (_inner_error_ != NULL) {
						_g_object_unref0 (results);
						_g_object_unref0 (query);
						_g_free0 (script);
						if (_inner_error_->domain == SQL_HEAVY_ERROR) {
							goto __catch18_sql_heavy_error;
						}
						_g_object_unref0 (results);
						_g_object_unref0 (query);
						_g_free0 (script);
						_g_object_unref0 (rv);
						g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
						g_clear_error (&_inner_error_);
						return NULL;
					}
				}
				_tmp4_ = FALSE;
				_tmp5_ = sql_heavy_query_result_get_finished (results);
				if (!(!_tmp5_)) {
					break;
				}
				_tmp6_ = last_fm_artist_info_new_basic ();
				a = _tmp6_;
				_tmp7_ = sql_heavy_record_fetch_int ((SQLHeavyRecord*) results, 0, &_inner_error_);
				rowid = _tmp7_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch18_sql_heavy_error;
					}
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				_tmp8_ = sql_heavy_record_fetch_string ((SQLHeavyRecord*) results, 1, &_inner_error_);
				_tmp9_ = _tmp8_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch18_sql_heavy_error;
					}
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				_tmp10_ = _tmp9_;
				last_fm_artist_info_set_name (a, _tmp10_);
				_g_free0 (_tmp10_);
				_tmp11_ = sql_heavy_record_fetch_string ((SQLHeavyRecord*) results, 2, &_inner_error_);
				_tmp12_ = _tmp11_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch18_sql_heavy_error;
					}
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				_tmp13_ = _tmp12_;
				last_fm_artist_info_set_mbid (a, _tmp13_);
				_g_free0 (_tmp13_);
				_tmp14_ = sql_heavy_record_fetch_string ((SQLHeavyRecord*) results, 3, &_inner_error_);
				_tmp15_ = _tmp14_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch18_sql_heavy_error;
					}
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				_tmp16_ = _tmp15_;
				last_fm_artist_info_set_url (a, _tmp16_);
				_g_free0 (_tmp16_);
				_tmp17_ = sql_heavy_record_fetch_int ((SQLHeavyRecord*) results, 4, &_inner_error_);
				_tmp18_ = _tmp17_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch18_sql_heavy_error;
					}
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				last_fm_artist_info_set_streamable (a, _tmp18_);
				_tmp19_ = sql_heavy_record_fetch_int ((SQLHeavyRecord*) results, 5, &_inner_error_);
				_tmp20_ = _tmp19_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch18_sql_heavy_error;
					}
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				last_fm_artist_info_set_listeners (a, _tmp20_);
				_tmp21_ = sql_heavy_record_fetch_int ((SQLHeavyRecord*) results, 6, &_inner_error_);
				_tmp22_ = _tmp21_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch18_sql_heavy_error;
					}
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				last_fm_artist_info_set_playcount (a, _tmp22_);
				_tmp23_ = sql_heavy_record_fetch_string ((SQLHeavyRecord*) results, 7, &_inner_error_);
				_tmp24_ = _tmp23_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch18_sql_heavy_error;
					}
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				_tmp25_ = _tmp24_;
				last_fm_artist_info_set_published (a, _tmp25_);
				_g_free0 (_tmp25_);
				_tmp26_ = sql_heavy_record_fetch_string ((SQLHeavyRecord*) results, 8, &_inner_error_);
				_tmp27_ = _tmp26_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch18_sql_heavy_error;
					}
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				_tmp28_ = _tmp27_;
				last_fm_artist_info_set_summary (a, _tmp28_);
				_g_free0 (_tmp28_);
				_tmp29_ = sql_heavy_record_fetch_string ((SQLHeavyRecord*) results, 9, &_inner_error_);
				_tmp30_ = _tmp29_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch18_sql_heavy_error;
					}
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				_tmp31_ = _tmp30_;
				last_fm_artist_info_set_content (a, _tmp31_);
				_g_free0 (_tmp31_);
				_tmp32_ = sql_heavy_record_fetch_string ((SQLHeavyRecord*) results, 10, &_inner_error_);
				tag_string = _tmp32_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch18_sql_heavy_error;
					}
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				_tmp34_ = _tmp33_ = g_strsplit (tag_string, "<tag_seperator>", 0);
				tag_strings = _tmp34_;
				tag_strings_length1 = _vala_array_length (_tmp33_);
				_tag_strings_size_ = _vala_array_length (_tmp33_);
				{
					gboolean _tmp35_;
					index = 0;
					_tmp35_ = TRUE;
					while (TRUE) {
						gchar** _tmp36_;
						gchar** _tmp37_ = NULL;
						gchar** tag_values;
						gint tag_values_length1;
						gint _tag_values_size_;
						LastFMTag* _tmp38_ = NULL;
						LastFMTag* t;
						if (!_tmp35_) {
							index = index + 1;
						}
						_tmp35_ = FALSE;
						if (!(index < (tag_strings_length1 - 1))) {
							break;
						}
						_tmp37_ = _tmp36_ = g_strsplit (tag_strings[index], "<value_seperator>", 0);
						tag_values = _tmp37_;
						tag_values_length1 = _vala_array_length (_tmp36_);
						_tag_values_size_ = _vala_array_length (_tmp36_);
						_tmp38_ = last_fm_tag_new_with_string_and_url (tag_values[0], tag_values[1]);
						t = _tmp38_;
						last_fm_artist_info_addTag (a, t);
						_g_object_unref0 (t);
						tag_values = (_vala_array_free (tag_values, tag_values_length1, (GDestroyNotify) g_free), NULL);
					}
				}
				_tmp39_ = sql_heavy_record_fetch_string ((SQLHeavyRecord*) results, 11, &_inner_error_);
				sim_string = _tmp39_;
				if (_inner_error_ != NULL) {
					tag_strings = (_vala_array_free (tag_strings, tag_strings_length1, (GDestroyNotify) g_free), NULL);
					_g_free0 (tag_string);
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch18_sql_heavy_error;
					}
					tag_strings = (_vala_array_free (tag_strings, tag_strings_length1, (GDestroyNotify) g_free), NULL);
					_g_free0 (tag_string);
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				_tmp41_ = _tmp40_ = g_strsplit (sim_string, "<similar_seperator>", 0);
				sim_strings = _tmp41_;
				sim_strings_length1 = _vala_array_length (_tmp40_);
				_sim_strings_size_ = _vala_array_length (_tmp40_);
				{
					gboolean _tmp42_;
					index = 0;
					_tmp42_ = TRUE;
					while (TRUE) {
						gchar** _tmp43_;
						gchar** _tmp44_ = NULL;
						gchar** sim_values;
						gint sim_values_length1;
						gint _sim_values_size_;
						LastFMArtistInfo* _tmp45_ = NULL;
						LastFMArtistInfo* sim;
						if (!_tmp42_) {
							index = index + 1;
						}
						_tmp42_ = FALSE;
						if (!(index < (sim_strings_length1 - 1))) {
							break;
						}
						_tmp44_ = _tmp43_ = g_strsplit (sim_strings[index], "<value_seperator>", 0);
						sim_values = _tmp44_;
						sim_values_length1 = _vala_array_length (_tmp43_);
						_sim_values_size_ = _vala_array_length (_tmp43_);
						_tmp45_ = last_fm_artist_info_new_with_artist_and_url (sim_values[0], sim_values[1]);
						sim = _tmp45_;
						last_fm_artist_info_addSimilarArtist (a, sim);
						_g_object_unref0 (sim);
						sim_values = (_vala_array_free (sim_values, sim_values_length1, (GDestroyNotify) g_free), NULL);
					}
				}
				_tmp46_ = sql_heavy_record_fetch_string ((SQLHeavyRecord*) results, 12, &_inner_error_);
				url_image = _tmp46_;
				if (_inner_error_ != NULL) {
					sim_strings = (_vala_array_free (sim_strings, sim_strings_length1, (GDestroyNotify) g_free), NULL);
					_g_free0 (sim_string);
					tag_strings = (_vala_array_free (tag_strings, tag_strings_length1, (GDestroyNotify) g_free), NULL);
					_g_free0 (tag_string);
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch18_sql_heavy_error;
					}
					sim_strings = (_vala_array_free (sim_strings, sim_strings_length1, (GDestroyNotify) g_free), NULL);
					_g_free0 (sim_string);
					tag_strings = (_vala_array_free (tag_strings, tag_strings_length1, (GDestroyNotify) g_free), NULL);
					_g_free0 (tag_string);
					_g_object_unref0 (a);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				if (url_image != NULL) {
					_tmp47_ = g_strcmp0 (url_image, "") != 0;
				} else {
					_tmp47_ = FALSE;
				}
				if (_tmp47_) {
					LastFMImage* _tmp48_ = NULL;
					LastFMImage* _tmp49_;
					_tmp48_ = last_fm_image_new_with_import_string (url_image);
					_tmp49_ = _tmp48_;
					last_fm_artist_info_set_url_image (a, _tmp49_);
					_g_object_unref0 (_tmp49_);
				} else {
					LastFMImage* _tmp50_ = NULL;
					LastFMImage* _tmp51_;
					_tmp50_ = last_fm_image_new_basic ();
					_tmp51_ = _tmp50_;
					last_fm_artist_info_set_url_image (a, _tmp51_);
					_g_object_unref0 (_tmp51_);
				}
				gee_abstract_collection_add ((GeeAbstractCollection*) rv, a);
				_g_free0 (url_image);
				sim_strings = (_vala_array_free (sim_strings, sim_strings_length1, (GDestroyNotify) g_free), NULL);
				_g_free0 (sim_string);
				tag_strings = (_vala_array_free (tag_strings, tag_strings_length1, (GDestroyNotify) g_free), NULL);
				_g_free0 (tag_string);
				_g_object_unref0 (a);
			}
		}
		_g_object_unref0 (results);
	}
	_g_object_unref0 (query);
	_g_free0 (script);
	goto __finally18;
	__catch18_sql_heavy_error:
	{
		GError * err;
		err = _inner_error_;
		_inner_error_ = NULL;
		fprintf (stdout, "Could not load artist from db: %s\n", err->message);
		_g_error_free0 (err);
	}
	__finally18:
	if (_inner_error_ != NULL) {
		_g_object_unref0 (rv);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return NULL;
	}
	result = (GeeCollection*) rv;
	return result;
}


void beat_box_data_base_manager_save_artists (BeatBoxDataBaseManager* self, GeeCollection* artists) {
	SQLHeavyTransaction* _tmp0_ = NULL;
	SQLHeavyTransaction* _tmp1_;
	SQLHeavyTransaction* _tmp2_;
	SQLHeavyQuery* _tmp3_ = NULL;
	SQLHeavyQuery* _tmp4_;
	SQLHeavyQuery* _tmp5_;
	GError * _inner_error_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (artists != NULL);
	sql_heavy_queryable_execute ((SQLHeavyQueryable*) self->priv->_db, "DELETE FROM `artists`", (gssize) (-1), &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch19_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp0_ = sql_heavy_queryable_begin_transaction ((SQLHeavyQueryable*) self->priv->_db, &_inner_error_);
	_tmp1_ = _tmp0_;
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch19_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp2_ = _tmp1_;
	_g_object_unref0 (self->priv->transaction);
	self->priv->transaction = _tmp2_;
	_tmp3_ = sql_heavy_queryable_prepare ((SQLHeavyQueryable*) self->priv->transaction, "INSERT INTO `artists` (`name`, `mbid`, `url`, 'streamable', 'listeners" \
"', 'playcount', 'published', 'summary', 'content', 'tags', 'similar', " \
"'url_image') VALUES (:name, :mbid, :url, :streamable, :listeners, :pla" \
"ycount, :published, :summary, :content, :tags, :similar, :url_image);", &_inner_error_);
	_tmp4_ = _tmp3_;
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch19_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp5_ = _tmp4_;
	_g_object_unref0 (self->priv->query);
	self->priv->query = _tmp5_;
	{
		GeeIterator* _tmp6_ = NULL;
		GeeIterator* _a_it;
		_tmp6_ = gee_iterable_iterator ((GeeIterable*) artists);
		_a_it = _tmp6_;
		while (TRUE) {
			gboolean _tmp7_;
			gpointer _tmp8_ = NULL;
			LastFMArtistInfo* a;
			const gchar* _tmp9_ = NULL;
			const gchar* _tmp10_ = NULL;
			const gchar* _tmp11_ = NULL;
			gint _tmp12_;
			gint _tmp13_;
			gint _tmp14_;
			const gchar* _tmp15_ = NULL;
			const gchar* _tmp16_ = NULL;
			const gchar* _tmp17_ = NULL;
			gchar* _tmp18_;
			gchar* tags;
			gchar* _tmp28_;
			gchar* similar;
			LastFMImage* _tmp38_ = NULL;
			gchar* _tmp39_ = NULL;
			gchar* _tmp40_;
			SQLHeavyQueryResult* _tmp41_ = NULL;
			SQLHeavyQueryResult* _tmp42_;
			_tmp7_ = gee_iterator_next (_a_it);
			if (!_tmp7_) {
				break;
			}
			_tmp8_ = gee_iterator_get (_a_it);
			a = (LastFMArtistInfo*) _tmp8_;
			_tmp9_ = last_fm_artist_info_get_name (a);
			sql_heavy_query_set_string (self->priv->query, ":name", _tmp9_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch19_sql_heavy_error;
				}
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp10_ = last_fm_artist_info_get_mbid (a);
			sql_heavy_query_set_string (self->priv->query, ":mbid", _tmp10_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch19_sql_heavy_error;
				}
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp11_ = last_fm_artist_info_get_url (a);
			sql_heavy_query_set_string (self->priv->query, ":url", _tmp11_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch19_sql_heavy_error;
				}
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp12_ = last_fm_artist_info_get_streamable (a);
			sql_heavy_query_set_int (self->priv->query, ":streamable", _tmp12_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch19_sql_heavy_error;
				}
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp13_ = last_fm_artist_info_get_listeners (a);
			sql_heavy_query_set_int (self->priv->query, ":listeners", _tmp13_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch19_sql_heavy_error;
				}
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp14_ = last_fm_artist_info_get_playcount (a);
			sql_heavy_query_set_int (self->priv->query, ":playcount", _tmp14_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch19_sql_heavy_error;
				}
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp15_ = last_fm_artist_info_get_published (a);
			sql_heavy_query_set_string (self->priv->query, ":published", _tmp15_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch19_sql_heavy_error;
				}
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp16_ = last_fm_artist_info_get_summary (a);
			sql_heavy_query_set_string (self->priv->query, ":summary", _tmp16_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch19_sql_heavy_error;
				}
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp17_ = last_fm_artist_info_get_content (a);
			sql_heavy_query_set_string (self->priv->query, ":content", _tmp17_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch19_sql_heavy_error;
				}
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp18_ = g_strdup ("");
			tags = _tmp18_;
			{
				GeeArrayList* _tmp19_ = NULL;
				GeeArrayList* _tag_list;
				gint _tmp20_;
				gint _tag_size;
				gint _tag_index;
				_tmp19_ = last_fm_artist_info_tags (a);
				_tag_list = _tmp19_;
				_tmp20_ = gee_collection_get_size ((GeeCollection*) _tag_list);
				_tag_size = _tmp20_;
				_tag_index = -1;
				while (TRUE) {
					gpointer _tmp21_ = NULL;
					LastFMTag* tag;
					const gchar* _tmp22_ = NULL;
					gchar* _tmp23_;
					const gchar* _tmp24_ = NULL;
					gchar* _tmp25_;
					gchar* _tmp26_;
					gchar* _tmp27_;
					_tag_index = _tag_index + 1;
					if (!(_tag_index < _tag_size)) {
						break;
					}
					_tmp21_ = gee_abstract_list_get ((GeeAbstractList*) _tag_list, _tag_index);
					tag = (LastFMTag*) _tmp21_;
					_tmp22_ = last_fm_tag_get_tag (tag);
					_tmp23_ = g_strconcat (_tmp22_, "<value_seperator>", NULL);
					_tmp24_ = last_fm_tag_get_url (tag);
					_tmp25_ = g_strconcat (_tmp23_, _tmp24_, NULL);
					_tmp26_ = g_strconcat (_tmp25_, "<tag_seperator>", NULL);
					_tmp27_ = g_strconcat (tags, _tmp26_, NULL);
					_g_free0 (tags);
					tags = _tmp27_;
					_g_free0 (_tmp26_);
					_g_free0 (_tmp25_);
					_g_free0 (_tmp23_);
					_g_object_unref0 (tag);
				}
				_g_object_unref0 (_tag_list);
			}
			_tmp28_ = g_strdup ("");
			similar = _tmp28_;
			{
				GeeArrayList* _tmp29_ = NULL;
				GeeArrayList* _sim_list;
				gint _tmp30_;
				gint _sim_size;
				gint _sim_index;
				_tmp29_ = last_fm_artist_info_similarArtists (a);
				_sim_list = _tmp29_;
				_tmp30_ = gee_collection_get_size ((GeeCollection*) _sim_list);
				_sim_size = _tmp30_;
				_sim_index = -1;
				while (TRUE) {
					gpointer _tmp31_ = NULL;
					LastFMArtistInfo* sim;
					const gchar* _tmp32_ = NULL;
					gchar* _tmp33_;
					const gchar* _tmp34_ = NULL;
					gchar* _tmp35_;
					gchar* _tmp36_;
					gchar* _tmp37_;
					_sim_index = _sim_index + 1;
					if (!(_sim_index < _sim_size)) {
						break;
					}
					_tmp31_ = gee_abstract_list_get ((GeeAbstractList*) _sim_list, _sim_index);
					sim = (LastFMArtistInfo*) _tmp31_;
					_tmp32_ = last_fm_artist_info_get_name (sim);
					_tmp33_ = g_strconcat (_tmp32_, "<value_seperator>", NULL);
					_tmp34_ = last_fm_artist_info_get_url (sim);
					_tmp35_ = g_strconcat (_tmp33_, _tmp34_, NULL);
					_tmp36_ = g_strconcat (_tmp35_, "<similar_seperator>", NULL);
					_tmp37_ = g_strconcat (similar, _tmp36_, NULL);
					_g_free0 (similar);
					similar = _tmp37_;
					_g_free0 (_tmp36_);
					_g_free0 (_tmp35_);
					_g_free0 (_tmp33_);
					_g_object_unref0 (sim);
				}
				_g_object_unref0 (_sim_list);
			}
			sql_heavy_query_set_string (self->priv->query, ":tags", tags, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_free0 (similar);
				_g_free0 (tags);
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch19_sql_heavy_error;
				}
				_g_free0 (similar);
				_g_free0 (tags);
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			sql_heavy_query_set_string (self->priv->query, ":similar", similar, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_free0 (similar);
				_g_free0 (tags);
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch19_sql_heavy_error;
				}
				_g_free0 (similar);
				_g_free0 (tags);
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp38_ = last_fm_artist_info_get_url_image (a);
			_tmp39_ = last_fm_image_to_string (_tmp38_);
			_tmp40_ = _tmp39_;
			sql_heavy_query_set_string (self->priv->query, ":url_image", _tmp40_, &_inner_error_);
			_g_free0 (_tmp40_);
			if (_inner_error_ != NULL) {
				_g_free0 (similar);
				_g_free0 (tags);
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch19_sql_heavy_error;
				}
				_g_free0 (similar);
				_g_free0 (tags);
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp41_ = sql_heavy_query_execute (self->priv->query, NULL, &_inner_error_, NULL);
			_tmp42_ = _tmp41_;
			_g_object_unref0 (_tmp42_);
			if (_inner_error_ != NULL) {
				_g_free0 (similar);
				_g_free0 (tags);
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch19_sql_heavy_error;
				}
				_g_free0 (similar);
				_g_free0 (tags);
				_g_object_unref0 (a);
				_g_object_unref0 (_a_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_g_free0 (similar);
			_g_free0 (tags);
			_g_object_unref0 (a);
		}
		_g_object_unref0 (_a_it);
	}
	sql_heavy_transaction_commit (self->priv->transaction, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch19_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	goto __finally19;
	__catch19_sql_heavy_error:
	{
		GError * err;
		err = _inner_error_;
		_inner_error_ = NULL;
		fprintf (stdout, "Could not save artists: %s\n", err->message);
		_g_error_free0 (err);
	}
	__finally19:
	if (_inner_error_ != NULL) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
}


GeeCollection* beat_box_data_base_manager_load_tracks (BeatBoxDataBaseManager* self) {
	GeeCollection* result = NULL;
	GeeArrayList* _tmp0_ = NULL;
	GeeArrayList* rv;
	gchar* _tmp1_;
	gchar* script;
	SQLHeavyQuery* _tmp2_ = NULL;
	SQLHeavyQuery* query;
	GError * _inner_error_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = gee_array_list_new (LAST_FM_TYPE_TRACK_INFO, (GBoxedCopyFunc) g_object_ref, g_object_unref, NULL);
	rv = _tmp0_;
	_tmp1_ = g_strdup ("SELECT rowid,* FROM `tracks`");
	script = _tmp1_;
	_tmp2_ = sql_heavy_query_new ((SQLHeavyQueryable*) self->priv->_db, script, &_inner_error_);
	query = _tmp2_;
	if (_inner_error_ != NULL) {
		_g_free0 (script);
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch20_sql_heavy_error;
		}
		_g_free0 (script);
		_g_object_unref0 (rv);
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return NULL;
	}
	{
		SQLHeavyQueryResult* _tmp3_ = NULL;
		SQLHeavyQueryResult* results;
		_tmp3_ = sql_heavy_query_execute (query, NULL, &_inner_error_, NULL);
		results = _tmp3_;
		if (_inner_error_ != NULL) {
			_g_object_unref0 (query);
			_g_free0 (script);
			if (_inner_error_->domain == SQL_HEAVY_ERROR) {
				goto __catch20_sql_heavy_error;
			}
			_g_object_unref0 (query);
			_g_free0 (script);
			_g_object_unref0 (rv);
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return NULL;
		}
		{
			gboolean _tmp4_;
			_tmp4_ = TRUE;
			while (TRUE) {
				gboolean _tmp5_;
				LastFMTrackInfo* _tmp6_ = NULL;
				LastFMTrackInfo* t;
				gint _tmp7_;
				gint rowid;
				gint _tmp8_;
				gint _tmp9_;
				gchar* _tmp10_ = NULL;
				gchar* _tmp11_;
				gchar* _tmp12_;
				gchar* _tmp13_ = NULL;
				gchar* _tmp14_;
				gchar* _tmp15_;
				gchar* _tmp16_ = NULL;
				gchar* _tmp17_;
				gchar* _tmp18_;
				gint _tmp19_;
				gint _tmp20_;
				gint _tmp21_;
				gint _tmp22_;
				gint _tmp23_;
				gint _tmp24_;
				gint _tmp25_;
				gint _tmp26_;
				gchar* _tmp27_ = NULL;
				gchar* _tmp28_;
				gchar* _tmp29_;
				gchar* _tmp30_ = NULL;
				gchar* _tmp31_;
				gchar* _tmp32_;
				gchar* _tmp33_ = NULL;
				gchar* tag_string;
				gchar** _tmp34_;
				gchar** _tmp35_ = NULL;
				gchar** tag_strings;
				gint tag_strings_length1;
				gint _tag_strings_size_;
				gint index = 0;
				if (!_tmp4_) {
					sql_heavy_record_set_next ((SQLHeavyRecordSet*) results, &_inner_error_);
					if (_inner_error_ != NULL) {
						_g_object_unref0 (results);
						_g_object_unref0 (query);
						_g_free0 (script);
						if (_inner_error_->domain == SQL_HEAVY_ERROR) {
							goto __catch20_sql_heavy_error;
						}
						_g_object_unref0 (results);
						_g_object_unref0 (query);
						_g_free0 (script);
						_g_object_unref0 (rv);
						g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
						g_clear_error (&_inner_error_);
						return NULL;
					}
				}
				_tmp4_ = FALSE;
				_tmp5_ = sql_heavy_query_result_get_finished (results);
				if (!(!_tmp5_)) {
					break;
				}
				_tmp6_ = last_fm_track_info_new_basic ();
				t = _tmp6_;
				_tmp7_ = sql_heavy_record_fetch_int ((SQLHeavyRecord*) results, 0, &_inner_error_);
				rowid = _tmp7_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (t);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch20_sql_heavy_error;
					}
					_g_object_unref0 (t);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				_tmp8_ = sql_heavy_record_fetch_int ((SQLHeavyRecord*) results, 1, &_inner_error_);
				_tmp9_ = _tmp8_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (t);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch20_sql_heavy_error;
					}
					_g_object_unref0 (t);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				last_fm_track_info_set_id (t, _tmp9_);
				_tmp10_ = sql_heavy_record_fetch_string ((SQLHeavyRecord*) results, 2, &_inner_error_);
				_tmp11_ = _tmp10_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (t);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch20_sql_heavy_error;
					}
					_g_object_unref0 (t);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				_tmp12_ = _tmp11_;
				last_fm_track_info_set_name (t, _tmp12_);
				_g_free0 (_tmp12_);
				_tmp13_ = sql_heavy_record_fetch_string ((SQLHeavyRecord*) results, 3, &_inner_error_);
				_tmp14_ = _tmp13_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (t);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch20_sql_heavy_error;
					}
					_g_object_unref0 (t);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				_tmp15_ = _tmp14_;
				last_fm_track_info_set_artist (t, _tmp15_);
				_g_free0 (_tmp15_);
				_tmp16_ = sql_heavy_record_fetch_string ((SQLHeavyRecord*) results, 4, &_inner_error_);
				_tmp17_ = _tmp16_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (t);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch20_sql_heavy_error;
					}
					_g_object_unref0 (t);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				_tmp18_ = _tmp17_;
				last_fm_track_info_set_url (t, _tmp18_);
				_g_free0 (_tmp18_);
				_tmp19_ = sql_heavy_record_fetch_int ((SQLHeavyRecord*) results, 5, &_inner_error_);
				_tmp20_ = _tmp19_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (t);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch20_sql_heavy_error;
					}
					_g_object_unref0 (t);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				last_fm_track_info_set_duration (t, _tmp20_);
				_tmp21_ = sql_heavy_record_fetch_int ((SQLHeavyRecord*) results, 6, &_inner_error_);
				_tmp22_ = _tmp21_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (t);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch20_sql_heavy_error;
					}
					_g_object_unref0 (t);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				last_fm_track_info_set_streamable (t, _tmp22_);
				_tmp23_ = sql_heavy_record_fetch_int ((SQLHeavyRecord*) results, 7, &_inner_error_);
				_tmp24_ = _tmp23_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (t);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch20_sql_heavy_error;
					}
					_g_object_unref0 (t);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				last_fm_track_info_set_listeners (t, _tmp24_);
				_tmp25_ = sql_heavy_record_fetch_int ((SQLHeavyRecord*) results, 8, &_inner_error_);
				_tmp26_ = _tmp25_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (t);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch20_sql_heavy_error;
					}
					_g_object_unref0 (t);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				last_fm_track_info_set_playcount (t, _tmp26_);
				_tmp27_ = sql_heavy_record_fetch_string ((SQLHeavyRecord*) results, 9, &_inner_error_);
				_tmp28_ = _tmp27_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (t);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch20_sql_heavy_error;
					}
					_g_object_unref0 (t);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				_tmp29_ = _tmp28_;
				last_fm_track_info_set_summary (t, _tmp29_);
				_g_free0 (_tmp29_);
				_tmp30_ = sql_heavy_record_fetch_string ((SQLHeavyRecord*) results, 10, &_inner_error_);
				_tmp31_ = _tmp30_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (t);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch20_sql_heavy_error;
					}
					_g_object_unref0 (t);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				_tmp32_ = _tmp31_;
				last_fm_track_info_set_content (t, _tmp32_);
				_g_free0 (_tmp32_);
				_tmp33_ = sql_heavy_record_fetch_string ((SQLHeavyRecord*) results, 11, &_inner_error_);
				tag_string = _tmp33_;
				if (_inner_error_ != NULL) {
					_g_object_unref0 (t);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					if (_inner_error_->domain == SQL_HEAVY_ERROR) {
						goto __catch20_sql_heavy_error;
					}
					_g_object_unref0 (t);
					_g_object_unref0 (results);
					_g_object_unref0 (query);
					_g_free0 (script);
					_g_object_unref0 (rv);
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
				_tmp35_ = _tmp34_ = g_strsplit (tag_string, "<tag_seperator>", 0);
				tag_strings = _tmp35_;
				tag_strings_length1 = _vala_array_length (_tmp34_);
				_tag_strings_size_ = _vala_array_length (_tmp34_);
				{
					gboolean _tmp36_;
					index = 0;
					_tmp36_ = TRUE;
					while (TRUE) {
						gchar** _tmp37_;
						gchar** _tmp38_ = NULL;
						gchar** tag_values;
						gint tag_values_length1;
						gint _tag_values_size_;
						LastFMTag* _tmp39_ = NULL;
						LastFMTag* tag;
						if (!_tmp36_) {
							index = index + 1;
						}
						_tmp36_ = FALSE;
						if (!(index < (tag_strings_length1 - 1))) {
							break;
						}
						_tmp38_ = _tmp37_ = g_strsplit (tag_strings[index], "<value_seperator>", 0);
						tag_values = _tmp38_;
						tag_values_length1 = _vala_array_length (_tmp37_);
						_tag_values_size_ = _vala_array_length (_tmp37_);
						_tmp39_ = last_fm_tag_new_with_string_and_url (tag_values[0], tag_values[1]);
						tag = _tmp39_;
						last_fm_track_info_addTag (t, tag);
						_g_object_unref0 (tag);
						tag_values = (_vala_array_free (tag_values, tag_values_length1, (GDestroyNotify) g_free), NULL);
					}
				}
				gee_abstract_collection_add ((GeeAbstractCollection*) rv, t);
				tag_strings = (_vala_array_free (tag_strings, tag_strings_length1, (GDestroyNotify) g_free), NULL);
				_g_free0 (tag_string);
				_g_object_unref0 (t);
			}
		}
		_g_object_unref0 (results);
	}
	_g_object_unref0 (query);
	_g_free0 (script);
	goto __finally20;
	__catch20_sql_heavy_error:
	{
		GError * err;
		err = _inner_error_;
		_inner_error_ = NULL;
		fprintf (stdout, "Could not load tracks from db: %s\n", err->message);
		_g_error_free0 (err);
	}
	__finally20:
	if (_inner_error_ != NULL) {
		_g_object_unref0 (rv);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return NULL;
	}
	result = (GeeCollection*) rv;
	return result;
}


void beat_box_data_base_manager_save_tracks (BeatBoxDataBaseManager* self, GeeCollection* tracks) {
	SQLHeavyTransaction* _tmp0_ = NULL;
	SQLHeavyTransaction* _tmp1_;
	SQLHeavyTransaction* _tmp2_;
	SQLHeavyQuery* _tmp3_ = NULL;
	SQLHeavyQuery* _tmp4_;
	SQLHeavyQuery* _tmp5_;
	GError * _inner_error_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (tracks != NULL);
	sql_heavy_queryable_execute ((SQLHeavyQueryable*) self->priv->_db, "DELETE FROM `tracks`", (gssize) (-1), &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch21_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp0_ = sql_heavy_queryable_begin_transaction ((SQLHeavyQueryable*) self->priv->_db, &_inner_error_);
	_tmp1_ = _tmp0_;
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch21_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp2_ = _tmp1_;
	_g_object_unref0 (self->priv->transaction);
	self->priv->transaction = _tmp2_;
	_tmp3_ = sql_heavy_queryable_prepare ((SQLHeavyQueryable*) self->priv->transaction, "INSERT INTO `tracks` ('id', `name`, `artist`, `url`, 'duration', 'stre" \
"amable', 'listeners', 'playcount', 'summary', 'content', 'tags') VALUE" \
"S (:id, :name, :artist, :url, :duration, :streamable, :listeners, :pla" \
"ycount, :summary, :content, :tags);", &_inner_error_);
	_tmp4_ = _tmp3_;
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch21_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp5_ = _tmp4_;
	_g_object_unref0 (self->priv->query);
	self->priv->query = _tmp5_;
	{
		GeeIterator* _tmp6_ = NULL;
		GeeIterator* _t_it;
		_tmp6_ = gee_iterable_iterator ((GeeIterable*) tracks);
		_t_it = _tmp6_;
		while (TRUE) {
			gboolean _tmp7_;
			gpointer _tmp8_ = NULL;
			LastFMTrackInfo* t;
			gint _tmp9_;
			const gchar* _tmp10_ = NULL;
			const gchar* _tmp11_ = NULL;
			const gchar* _tmp12_ = NULL;
			gint _tmp13_;
			gint _tmp14_;
			gint _tmp15_;
			gint _tmp16_;
			const gchar* _tmp17_ = NULL;
			const gchar* _tmp18_ = NULL;
			gchar* _tmp19_;
			gchar* tags;
			SQLHeavyQueryResult* _tmp29_ = NULL;
			SQLHeavyQueryResult* _tmp30_;
			_tmp7_ = gee_iterator_next (_t_it);
			if (!_tmp7_) {
				break;
			}
			_tmp8_ = gee_iterator_get (_t_it);
			t = (LastFMTrackInfo*) _tmp8_;
			_tmp9_ = last_fm_track_info_get_id (t);
			sql_heavy_query_set_int (self->priv->query, ":id", _tmp9_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (t);
				_g_object_unref0 (_t_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch21_sql_heavy_error;
				}
				_g_object_unref0 (t);
				_g_object_unref0 (_t_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp10_ = last_fm_track_info_get_name (t);
			sql_heavy_query_set_string (self->priv->query, ":name", _tmp10_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (t);
				_g_object_unref0 (_t_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch21_sql_heavy_error;
				}
				_g_object_unref0 (t);
				_g_object_unref0 (_t_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp11_ = last_fm_track_info_get_artist (t);
			sql_heavy_query_set_string (self->priv->query, ":artist", _tmp11_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (t);
				_g_object_unref0 (_t_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch21_sql_heavy_error;
				}
				_g_object_unref0 (t);
				_g_object_unref0 (_t_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp12_ = last_fm_track_info_get_url (t);
			sql_heavy_query_set_string (self->priv->query, ":url", _tmp12_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (t);
				_g_object_unref0 (_t_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch21_sql_heavy_error;
				}
				_g_object_unref0 (t);
				_g_object_unref0 (_t_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp13_ = last_fm_track_info_get_duration (t);
			sql_heavy_query_set_int (self->priv->query, ":duration", _tmp13_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (t);
				_g_object_unref0 (_t_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch21_sql_heavy_error;
				}
				_g_object_unref0 (t);
				_g_object_unref0 (_t_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp14_ = last_fm_track_info_get_streamable (t);
			sql_heavy_query_set_int (self->priv->query, ":streamable", _tmp14_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (t);
				_g_object_unref0 (_t_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch21_sql_heavy_error;
				}
				_g_object_unref0 (t);
				_g_object_unref0 (_t_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp15_ = last_fm_track_info_get_listeners (t);
			sql_heavy_query_set_int (self->priv->query, ":listeners", _tmp15_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (t);
				_g_object_unref0 (_t_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch21_sql_heavy_error;
				}
				_g_object_unref0 (t);
				_g_object_unref0 (_t_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp16_ = last_fm_track_info_get_playcount (t);
			sql_heavy_query_set_int (self->priv->query, ":playcount", _tmp16_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (t);
				_g_object_unref0 (_t_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch21_sql_heavy_error;
				}
				_g_object_unref0 (t);
				_g_object_unref0 (_t_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp17_ = last_fm_track_info_get_summary (t);
			sql_heavy_query_set_string (self->priv->query, ":summary", _tmp17_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (t);
				_g_object_unref0 (_t_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch21_sql_heavy_error;
				}
				_g_object_unref0 (t);
				_g_object_unref0 (_t_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp18_ = last_fm_track_info_get_content (t);
			sql_heavy_query_set_string (self->priv->query, ":content", _tmp18_, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_object_unref0 (t);
				_g_object_unref0 (_t_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch21_sql_heavy_error;
				}
				_g_object_unref0 (t);
				_g_object_unref0 (_t_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp19_ = g_strdup ("");
			tags = _tmp19_;
			{
				GeeArrayList* _tmp20_ = NULL;
				GeeArrayList* _tag_list;
				gint _tmp21_;
				gint _tag_size;
				gint _tag_index;
				_tmp20_ = last_fm_track_info_tags (t);
				_tag_list = _tmp20_;
				_tmp21_ = gee_collection_get_size ((GeeCollection*) _tag_list);
				_tag_size = _tmp21_;
				_tag_index = -1;
				while (TRUE) {
					gpointer _tmp22_ = NULL;
					LastFMTag* tag;
					const gchar* _tmp23_ = NULL;
					gchar* _tmp24_;
					const gchar* _tmp25_ = NULL;
					gchar* _tmp26_;
					gchar* _tmp27_;
					gchar* _tmp28_;
					_tag_index = _tag_index + 1;
					if (!(_tag_index < _tag_size)) {
						break;
					}
					_tmp22_ = gee_abstract_list_get ((GeeAbstractList*) _tag_list, _tag_index);
					tag = (LastFMTag*) _tmp22_;
					_tmp23_ = last_fm_tag_get_tag (tag);
					_tmp24_ = g_strconcat (_tmp23_, "<value_seperator>", NULL);
					_tmp25_ = last_fm_tag_get_url (tag);
					_tmp26_ = g_strconcat (_tmp24_, _tmp25_, NULL);
					_tmp27_ = g_strconcat (_tmp26_, "<tag_seperator>", NULL);
					_tmp28_ = g_strconcat (tags, _tmp27_, NULL);
					_g_free0 (tags);
					tags = _tmp28_;
					_g_free0 (_tmp27_);
					_g_free0 (_tmp26_);
					_g_free0 (_tmp24_);
					_g_object_unref0 (tag);
				}
				_g_object_unref0 (_tag_list);
			}
			sql_heavy_query_set_string (self->priv->query, ":tags", tags, &_inner_error_);
			if (_inner_error_ != NULL) {
				_g_free0 (tags);
				_g_object_unref0 (t);
				_g_object_unref0 (_t_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch21_sql_heavy_error;
				}
				_g_free0 (tags);
				_g_object_unref0 (t);
				_g_object_unref0 (_t_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp29_ = sql_heavy_query_execute (self->priv->query, NULL, &_inner_error_, NULL);
			_tmp30_ = _tmp29_;
			_g_object_unref0 (_tmp30_);
			if (_inner_error_ != NULL) {
				_g_free0 (tags);
				_g_object_unref0 (t);
				_g_object_unref0 (_t_it);
				if (_inner_error_->domain == SQL_HEAVY_ERROR) {
					goto __catch21_sql_heavy_error;
				}
				_g_free0 (tags);
				_g_object_unref0 (t);
				_g_object_unref0 (_t_it);
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_g_free0 (tags);
			_g_object_unref0 (t);
		}
		_g_object_unref0 (_t_it);
	}
	sql_heavy_transaction_commit (self->priv->transaction, &_inner_error_);
	if (_inner_error_ != NULL) {
		if (_inner_error_->domain == SQL_HEAVY_ERROR) {
			goto __catch21_sql_heavy_error;
		}
		g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	goto __finally21;
	__catch21_sql_heavy_error:
	{
		GError * err;
		err = _inner_error_;
		_inner_error_ = NULL;
		fprintf (stdout, "Could not save tracks: %s\n", err->message);
		_g_error_free0 (err);
	}
	__finally21:
	if (_inner_error_ != NULL) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
}


static void g_cclosure_user_marshal_VOID__STRING_DOUBLE (GClosure * closure, GValue * return_value, guint n_param_values, const GValue * param_values, gpointer invocation_hint, gpointer marshal_data) {
	typedef void (*GMarshalFunc_VOID__STRING_DOUBLE) (gpointer data1, const char* arg_1, gdouble arg_2, gpointer data2);
	register GMarshalFunc_VOID__STRING_DOUBLE callback;
	register GCClosure * cc;
	register gpointer data1, data2;
	cc = (GCClosure *) closure;
	g_return_if_fail (n_param_values == 3);
	if (G_CCLOSURE_SWAP_DATA (closure)) {
		data1 = closure->data;
		data2 = param_values->data[0].v_pointer;
	} else {
		data1 = param_values->data[0].v_pointer;
		data2 = closure->data;
	}
	callback = (GMarshalFunc_VOID__STRING_DOUBLE) (marshal_data ? marshal_data : cc->callback);
	callback (data1, g_value_get_string (param_values + 1), g_value_get_double (param_values + 2), data2);
}


static void beat_box_data_base_manager_class_init (BeatBoxDataBaseManagerClass * klass) {
	beat_box_data_base_manager_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (BeatBoxDataBaseManagerPrivate));
	G_OBJECT_CLASS (klass)->finalize = beat_box_data_base_manager_finalize;
	g_signal_new ("db_progress", BEAT_BOX_TYPE_DATA_BASE_MANAGER, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_user_marshal_VOID__STRING_DOUBLE, G_TYPE_NONE, 2, G_TYPE_STRING, G_TYPE_DOUBLE);
}


static void beat_box_data_base_manager_instance_init (BeatBoxDataBaseManager * self) {
	self->priv = BEAT_BOX_DATA_BASE_MANAGER_GET_PRIVATE (self);
}


static void beat_box_data_base_manager_finalize (GObject* obj) {
	BeatBoxDataBaseManager * self;
	self = BEAT_BOX_DATA_BASE_MANAGER (obj);
	_g_object_unref0 (self->priv->_db);
	_g_object_unref0 (self->priv->transaction);
	_g_object_unref0 (self->priv->query);
	G_OBJECT_CLASS (beat_box_data_base_manager_parent_class)->finalize (obj);
}


GType beat_box_data_base_manager_get_type (void) {
	static volatile gsize beat_box_data_base_manager_type_id__volatile = 0;
	if (g_once_init_enter (&beat_box_data_base_manager_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (BeatBoxDataBaseManagerClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) beat_box_data_base_manager_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (BeatBoxDataBaseManager), 0, (GInstanceInitFunc) beat_box_data_base_manager_instance_init, NULL };
		GType beat_box_data_base_manager_type_id;
		beat_box_data_base_manager_type_id = g_type_register_static (G_TYPE_OBJECT, "BeatBoxDataBaseManager", &g_define_type_info, 0);
		g_once_init_leave (&beat_box_data_base_manager_type_id__volatile, beat_box_data_base_manager_type_id);
	}
	return beat_box_data_base_manager_type_id__volatile;
}


static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	if ((array != NULL) && (destroy_func != NULL)) {
		int i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}


static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	_vala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}


static gint _vala_array_length (gpointer array) {
	int length;
	length = 0;
	if (array) {
		while (((gpointer*) array)[length]) {
			length++;
		}
	}
	return length;
}



