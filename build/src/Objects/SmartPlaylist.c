/* SmartPlaylist.c generated by valac 0.11.6, the Vala compiler
 * generated from SmartPlaylist.vala, do not modify */


#include <glib.h>
#include <glib-object.h>
#include <stdlib.h>
#include <string.h>
#include <gee.h>
#include <gtk/gtk.h>
#include <stdio.h>


#define BEAT_BOX_TYPE_SMART_PLAYLIST (beat_box_smart_playlist_get_type ())
#define BEAT_BOX_SMART_PLAYLIST(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BEAT_BOX_TYPE_SMART_PLAYLIST, BeatBoxSmartPlaylist))
#define BEAT_BOX_SMART_PLAYLIST_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BEAT_BOX_TYPE_SMART_PLAYLIST, BeatBoxSmartPlaylistClass))
#define BEAT_BOX_IS_SMART_PLAYLIST(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BEAT_BOX_TYPE_SMART_PLAYLIST))
#define BEAT_BOX_IS_SMART_PLAYLIST_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BEAT_BOX_TYPE_SMART_PLAYLIST))
#define BEAT_BOX_SMART_PLAYLIST_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BEAT_BOX_TYPE_SMART_PLAYLIST, BeatBoxSmartPlaylistClass))

typedef struct _BeatBoxSmartPlaylist BeatBoxSmartPlaylist;
typedef struct _BeatBoxSmartPlaylistClass BeatBoxSmartPlaylistClass;
typedef struct _BeatBoxSmartPlaylistPrivate BeatBoxSmartPlaylistPrivate;

#define BEAT_BOX_TYPE_TREE_VIEW_SETUP (beat_box_tree_view_setup_get_type ())
#define BEAT_BOX_TREE_VIEW_SETUP(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BEAT_BOX_TYPE_TREE_VIEW_SETUP, BeatBoxTreeViewSetup))
#define BEAT_BOX_TREE_VIEW_SETUP_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BEAT_BOX_TYPE_TREE_VIEW_SETUP, BeatBoxTreeViewSetupClass))
#define BEAT_BOX_IS_TREE_VIEW_SETUP(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BEAT_BOX_TYPE_TREE_VIEW_SETUP))
#define BEAT_BOX_IS_TREE_VIEW_SETUP_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BEAT_BOX_TYPE_TREE_VIEW_SETUP))
#define BEAT_BOX_TREE_VIEW_SETUP_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BEAT_BOX_TYPE_TREE_VIEW_SETUP, BeatBoxTreeViewSetupClass))

typedef struct _BeatBoxTreeViewSetup BeatBoxTreeViewSetup;
typedef struct _BeatBoxTreeViewSetupClass BeatBoxTreeViewSetupClass;

#define BEAT_BOX_TYPE_SMART_QUERY (beat_box_smart_query_get_type ())
#define BEAT_BOX_SMART_QUERY(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BEAT_BOX_TYPE_SMART_QUERY, BeatBoxSmartQuery))
#define BEAT_BOX_SMART_QUERY_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BEAT_BOX_TYPE_SMART_QUERY, BeatBoxSmartQueryClass))
#define BEAT_BOX_IS_SMART_QUERY(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BEAT_BOX_TYPE_SMART_QUERY))
#define BEAT_BOX_IS_SMART_QUERY_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BEAT_BOX_TYPE_SMART_QUERY))
#define BEAT_BOX_SMART_QUERY_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BEAT_BOX_TYPE_SMART_QUERY, BeatBoxSmartQueryClass))

typedef struct _BeatBoxSmartQuery BeatBoxSmartQuery;
typedef struct _BeatBoxSmartQueryClass BeatBoxSmartQueryClass;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))

#define BEAT_BOX_TYPE_LIBRARY_MANAGER (beat_box_library_manager_get_type ())
#define BEAT_BOX_LIBRARY_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BEAT_BOX_TYPE_LIBRARY_MANAGER, BeatBoxLibraryManager))
#define BEAT_BOX_LIBRARY_MANAGER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BEAT_BOX_TYPE_LIBRARY_MANAGER, BeatBoxLibraryManagerClass))
#define BEAT_BOX_IS_LIBRARY_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BEAT_BOX_TYPE_LIBRARY_MANAGER))
#define BEAT_BOX_IS_LIBRARY_MANAGER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BEAT_BOX_TYPE_LIBRARY_MANAGER))
#define BEAT_BOX_LIBRARY_MANAGER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BEAT_BOX_TYPE_LIBRARY_MANAGER, BeatBoxLibraryManagerClass))

typedef struct _BeatBoxLibraryManager BeatBoxLibraryManager;
typedef struct _BeatBoxLibraryManagerClass BeatBoxLibraryManagerClass;

#define BEAT_BOX_TYPE_SONG (beat_box_song_get_type ())
#define BEAT_BOX_SONG(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BEAT_BOX_TYPE_SONG, BeatBoxSong))
#define BEAT_BOX_SONG_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BEAT_BOX_TYPE_SONG, BeatBoxSongClass))
#define BEAT_BOX_IS_SONG(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BEAT_BOX_TYPE_SONG))
#define BEAT_BOX_IS_SONG_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BEAT_BOX_TYPE_SONG))
#define BEAT_BOX_SONG_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BEAT_BOX_TYPE_SONG, BeatBoxSongClass))

typedef struct _BeatBoxSong BeatBoxSong;
typedef struct _BeatBoxSongClass BeatBoxSongClass;
#define _g_date_time_unref0(var) ((var == NULL) ? NULL : (var = (g_date_time_unref (var), NULL)))

struct _BeatBoxSmartPlaylist {
	GObject parent_instance;
	BeatBoxSmartPlaylistPrivate * priv;
	BeatBoxTreeViewSetup* tvs;
	gint query_count;
};

struct _BeatBoxSmartPlaylistClass {
	GObjectClass parent_class;
};

struct _BeatBoxSmartPlaylistPrivate {
	gint _rowid;
	gchar* _name;
	gchar* _conditional;
	GeeArrayList* _queries;
	gboolean _limit;
	gint _limit_amount;
};


static gpointer beat_box_smart_playlist_parent_class = NULL;

GType beat_box_smart_playlist_get_type (void) G_GNUC_CONST;
GType beat_box_tree_view_setup_get_type (void) G_GNUC_CONST;
GType beat_box_smart_query_get_type (void) G_GNUC_CONST;
#define BEAT_BOX_SMART_PLAYLIST_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), BEAT_BOX_TYPE_SMART_PLAYLIST, BeatBoxSmartPlaylistPrivate))
enum  {
	BEAT_BOX_SMART_PLAYLIST_DUMMY_PROPERTY,
	BEAT_BOX_SMART_PLAYLIST_ROWID,
	BEAT_BOX_SMART_PLAYLIST_NAME,
	BEAT_BOX_SMART_PLAYLIST_CONDITIONAL,
	BEAT_BOX_SMART_PLAYLIST_LIMIT,
	BEAT_BOX_SMART_PLAYLIST_LIMIT_AMOUNT
};
BeatBoxSmartPlaylist* beat_box_smart_playlist_new (void);
BeatBoxSmartPlaylist* beat_box_smart_playlist_construct (GType object_type);
BeatBoxTreeViewSetup* beat_box_tree_view_setup_new (const gchar* sort_col, GtkSortType sort_dir);
BeatBoxTreeViewSetup* beat_box_tree_view_setup_construct (GType object_type, const gchar* sort_col, GtkSortType sort_dir);
void beat_box_smart_playlist_clearQueries (BeatBoxSmartPlaylist* self);
GeeArrayList* beat_box_smart_playlist_queries (BeatBoxSmartPlaylist* self);
void beat_box_smart_playlist_addQuery (BeatBoxSmartPlaylist* self, BeatBoxSmartQuery* s);
void beat_box_smart_playlist_queries_from_string (BeatBoxSmartPlaylist* self, const gchar* q);
BeatBoxSmartQuery* beat_box_smart_query_new (void);
BeatBoxSmartQuery* beat_box_smart_query_construct (GType object_type);
void beat_box_smart_query_set_field (BeatBoxSmartQuery* self, const gchar* value);
void beat_box_smart_query_set_comparator (BeatBoxSmartQuery* self, const gchar* value);
void beat_box_smart_query_set_value (BeatBoxSmartQuery* self, const gchar* value);
gchar* beat_box_smart_playlist_queries_to_string (BeatBoxSmartPlaylist* self);
const gchar* beat_box_smart_query_get_field (BeatBoxSmartQuery* self);
const gchar* beat_box_smart_query_get_comparator (BeatBoxSmartQuery* self);
const gchar* beat_box_smart_query_get_value (BeatBoxSmartQuery* self);
GType beat_box_library_manager_get_type (void) G_GNUC_CONST;
GeeLinkedList* beat_box_smart_playlist_analyze (BeatBoxSmartPlaylist* self, BeatBoxLibraryManager* lm);
GType beat_box_song_get_type (void) G_GNUC_CONST;
GeeCollection* beat_box_library_manager_songs (BeatBoxLibraryManager* self);
gboolean beat_box_smart_playlist_song_matches_query (BeatBoxSmartPlaylist* self, BeatBoxSmartQuery* q, BeatBoxSong* s);
const gchar* beat_box_smart_playlist_get_conditional (BeatBoxSmartPlaylist* self);
gint beat_box_song_get_rowid (BeatBoxSong* self);
const gchar* beat_box_song_get_album (BeatBoxSong* self);
const gchar* beat_box_song_get_artist (BeatBoxSong* self);
const gchar* beat_box_song_get_comment (BeatBoxSong* self);
const gchar* beat_box_song_get_genre (BeatBoxSong* self);
const gchar* beat_box_song_get_title (BeatBoxSong* self);
gint beat_box_song_get_bitrate (BeatBoxSong* self);
gint beat_box_song_get_play_count (BeatBoxSong* self);
gint beat_box_song_get_skip_count (BeatBoxSong* self);
gint beat_box_song_get_year (BeatBoxSong* self);
gint beat_box_song_get_length (BeatBoxSong* self);
gint beat_box_song_get_rating (BeatBoxSong* self);
gint beat_box_song_get_date_added (BeatBoxSong* self);
gint beat_box_song_get_last_played (BeatBoxSong* self);
gint beat_box_smart_playlist_get_rowid (BeatBoxSmartPlaylist* self);
void beat_box_smart_playlist_set_rowid (BeatBoxSmartPlaylist* self, gint value);
const gchar* beat_box_smart_playlist_get_name (BeatBoxSmartPlaylist* self);
void beat_box_smart_playlist_set_name (BeatBoxSmartPlaylist* self, const gchar* value);
void beat_box_smart_playlist_set_conditional (BeatBoxSmartPlaylist* self, const gchar* value);
gboolean beat_box_smart_playlist_get_limit (BeatBoxSmartPlaylist* self);
void beat_box_smart_playlist_set_limit (BeatBoxSmartPlaylist* self, gboolean value);
gint beat_box_smart_playlist_get_limit_amount (BeatBoxSmartPlaylist* self);
void beat_box_smart_playlist_set_limit_amount (BeatBoxSmartPlaylist* self, gint value);
static void beat_box_smart_playlist_finalize (GObject* obj);
static void _vala_beat_box_smart_playlist_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec);
static void _vala_beat_box_smart_playlist_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec);
static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func);
static gint _vala_array_length (gpointer array);


BeatBoxSmartPlaylist* beat_box_smart_playlist_construct (GType object_type) {
	BeatBoxSmartPlaylist * self = NULL;
	gchar* _tmp0_;
	gchar* _tmp1_;
	BeatBoxTreeViewSetup* _tmp2_ = NULL;
	BeatBoxTreeViewSetup* _tmp3_;
	gchar* _tmp4_;
	gchar* _tmp5_;
	GeeArrayList* _tmp6_ = NULL;
	GeeArrayList* _tmp7_;
	self = (BeatBoxSmartPlaylist*) g_object_new (object_type, NULL);
	_tmp0_ = g_strdup ("");
	_tmp1_ = _tmp0_;
	_g_free0 (self->priv->_name);
	self->priv->_name = _tmp1_;
	_tmp2_ = beat_box_tree_view_setup_new ("#", GTK_SORT_ASCENDING);
	_tmp3_ = _tmp2_;
	_g_object_unref0 (self->tvs);
	self->tvs = _tmp3_;
	_tmp4_ = g_strdup ("all");
	_tmp5_ = _tmp4_;
	_g_free0 (self->priv->_conditional);
	self->priv->_conditional = _tmp5_;
	self->query_count = 0;
	_tmp6_ = gee_array_list_new (BEAT_BOX_TYPE_SMART_QUERY, (GBoxedCopyFunc) g_object_ref, g_object_unref, NULL);
	_tmp7_ = _tmp6_;
	_g_object_unref0 (self->priv->_queries);
	self->priv->_queries = _tmp7_;
	self->priv->_limit = FALSE;
	self->priv->_limit_amount = 50;
	return self;
}


BeatBoxSmartPlaylist* beat_box_smart_playlist_new (void) {
	return beat_box_smart_playlist_construct (BEAT_BOX_TYPE_SMART_PLAYLIST);
}


void beat_box_smart_playlist_clearQueries (BeatBoxSmartPlaylist* self) {
	g_return_if_fail (self != NULL);
	self->query_count = 0;
	gee_abstract_collection_clear ((GeeAbstractCollection*) self->priv->_queries);
}


static gpointer _g_object_ref0 (gpointer self) {
	return self ? g_object_ref (self) : NULL;
}


GeeArrayList* beat_box_smart_playlist_queries (BeatBoxSmartPlaylist* self) {
	GeeArrayList* result = NULL;
	GeeArrayList* _tmp0_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = _g_object_ref0 (self->priv->_queries);
	result = _tmp0_;
	return result;
}


void beat_box_smart_playlist_addQuery (BeatBoxSmartPlaylist* self, BeatBoxSmartQuery* s) {
	g_return_if_fail (self != NULL);
	g_return_if_fail (s != NULL);
	self->query_count++;
	gee_abstract_collection_add ((GeeAbstractCollection*) self->priv->_queries, s);
}


/** temp_playlist should be in format of #,#,#,#,#, **/
void beat_box_smart_playlist_queries_from_string (BeatBoxSmartPlaylist* self, const gchar* q) {
	gchar** _tmp0_;
	gchar** _tmp1_ = NULL;
	gchar** queries_in_string;
	gint queries_in_string_length1;
	gint _queries_in_string_size_;
	gint index = 0;
	g_return_if_fail (self != NULL);
	g_return_if_fail (q != NULL);
	_tmp1_ = _tmp0_ = g_strsplit (q, "<query_seperator>", 0);
	queries_in_string = _tmp1_;
	queries_in_string_length1 = _vala_array_length (_tmp0_);
	_queries_in_string_size_ = _vala_array_length (_tmp0_);
	{
		gboolean _tmp2_;
		index = 0;
		_tmp2_ = TRUE;
		while (TRUE) {
			gchar** _tmp3_;
			gchar** _tmp4_ = NULL;
			gchar** pieces_of_query;
			gint pieces_of_query_length1;
			gint _pieces_of_query_size_;
			BeatBoxSmartQuery* _tmp5_ = NULL;
			BeatBoxSmartQuery* sq;
			if (!_tmp2_) {
				index++;
			}
			_tmp2_ = FALSE;
			if (!(index < (queries_in_string_length1 - 1))) {
				break;
			}
			_tmp4_ = _tmp3_ = g_strsplit (queries_in_string[index], "<value_seperator>", 0);
			pieces_of_query = _tmp4_;
			pieces_of_query_length1 = _vala_array_length (_tmp3_);
			_pieces_of_query_size_ = _vala_array_length (_tmp3_);
			_tmp5_ = beat_box_smart_query_new ();
			sq = _tmp5_;
			beat_box_smart_query_set_field (sq, pieces_of_query[0]);
			beat_box_smart_query_set_comparator (sq, pieces_of_query[1]);
			beat_box_smart_query_set_value (sq, pieces_of_query[2]);
			beat_box_smart_playlist_addQuery (self, sq);
			_g_object_unref0 (sq);
			pieces_of_query = (_vala_array_free (pieces_of_query, pieces_of_query_length1, (GDestroyNotify) g_free), NULL);
		}
	}
	queries_in_string = (_vala_array_free (queries_in_string, queries_in_string_length1, (GDestroyNotify) g_free), NULL);
}


gchar* beat_box_smart_playlist_queries_to_string (BeatBoxSmartPlaylist* self) {
	gchar* result = NULL;
	gchar* _tmp0_;
	gchar* rv;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = g_strdup ("");
	rv = _tmp0_;
	{
		GeeArrayList* _tmp1_ = NULL;
		GeeArrayList* _q_list;
		gint _tmp2_;
		gint _q_size;
		gint _q_index;
		_tmp1_ = beat_box_smart_playlist_queries (self);
		_q_list = _tmp1_;
		_tmp2_ = gee_collection_get_size ((GeeCollection*) _q_list);
		_q_size = _tmp2_;
		_q_index = -1;
		while (TRUE) {
			gpointer _tmp3_ = NULL;
			BeatBoxSmartQuery* q;
			const gchar* _tmp4_ = NULL;
			gchar* _tmp5_;
			const gchar* _tmp6_ = NULL;
			gchar* _tmp7_;
			gchar* _tmp8_;
			const gchar* _tmp9_ = NULL;
			gchar* _tmp10_;
			gchar* _tmp11_;
			gchar* _tmp12_;
			_q_index = _q_index + 1;
			if (!(_q_index < _q_size)) {
				break;
			}
			_tmp3_ = gee_abstract_list_get ((GeeAbstractList*) _q_list, _q_index);
			q = (BeatBoxSmartQuery*) _tmp3_;
			_tmp4_ = beat_box_smart_query_get_field (q);
			_tmp5_ = g_strconcat (_tmp4_, "<value_seperator>", NULL);
			_tmp6_ = beat_box_smart_query_get_comparator (q);
			_tmp7_ = g_strconcat (_tmp5_, _tmp6_, NULL);
			_tmp8_ = g_strconcat (_tmp7_, "<value_seperator>", NULL);
			_tmp9_ = beat_box_smart_query_get_value (q);
			_tmp10_ = g_strconcat (_tmp8_, _tmp9_, NULL);
			_tmp11_ = g_strconcat (_tmp10_, "<query_seperator>", NULL);
			_tmp12_ = g_strconcat (rv, _tmp11_, NULL);
			_g_free0 (rv);
			rv = _tmp12_;
			_g_free0 (_tmp11_);
			_g_free0 (_tmp10_);
			_g_free0 (_tmp8_);
			_g_free0 (_tmp7_);
			_g_free0 (_tmp5_);
			_g_object_unref0 (q);
		}
		_g_object_unref0 (_q_list);
	}
	result = rv;
	return result;
}


GeeLinkedList* beat_box_smart_playlist_analyze (BeatBoxSmartPlaylist* self, BeatBoxLibraryManager* lm) {
	GeeLinkedList* result = NULL;
	GeeLinkedList* _tmp0_ = NULL;
	GeeLinkedList* rv;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (lm != NULL, NULL);
	_tmp0_ = gee_linked_list_new (G_TYPE_INT, NULL, NULL, NULL);
	rv = _tmp0_;
	{
		GeeCollection* _tmp1_ = NULL;
		GeeCollection* _tmp2_;
		GeeIterator* _tmp3_ = NULL;
		GeeIterator* _tmp4_;
		GeeIterator* _s_it;
		_tmp1_ = beat_box_library_manager_songs (lm);
		_tmp2_ = _tmp1_;
		_tmp3_ = gee_iterable_iterator ((GeeIterable*) _tmp2_);
		_s_it = (_tmp4_ = _tmp3_, _g_object_unref0 (_tmp2_), _tmp4_);
		while (TRUE) {
			gboolean _tmp5_;
			gpointer _tmp6_ = NULL;
			BeatBoxSong* s;
			gint match_count;
			gboolean _tmp11_ = FALSE;
			gboolean _tmp12_ = FALSE;
			const gchar* _tmp13_ = NULL;
			gboolean _tmp18_ = FALSE;
			_tmp5_ = gee_iterator_next (_s_it);
			if (!_tmp5_) {
				break;
			}
			_tmp6_ = gee_iterator_get (_s_it);
			s = (BeatBoxSong*) _tmp6_;
			match_count = 0;
			{
				GeeArrayList* _tmp7_;
				GeeArrayList* _q_list;
				gint _tmp8_;
				gint _q_size;
				gint _q_index;
				_tmp7_ = _g_object_ref0 (self->priv->_queries);
				_q_list = _tmp7_;
				_tmp8_ = gee_collection_get_size ((GeeCollection*) _q_list);
				_q_size = _tmp8_;
				_q_index = -1;
				while (TRUE) {
					gpointer _tmp9_ = NULL;
					BeatBoxSmartQuery* q;
					gboolean _tmp10_;
					_q_index = _q_index + 1;
					if (!(_q_index < _q_size)) {
						break;
					}
					_tmp9_ = gee_abstract_list_get ((GeeAbstractList*) _q_list, _q_index);
					q = (BeatBoxSmartQuery*) _tmp9_;
					_tmp10_ = beat_box_smart_playlist_song_matches_query (self, q, s);
					if (_tmp10_) {
						match_count++;
					}
					_g_object_unref0 (q);
				}
				_g_object_unref0 (_q_list);
			}
			_tmp13_ = beat_box_smart_playlist_get_conditional (self);
			if (g_strcmp0 (_tmp13_, "all") == 0) {
				gint _tmp14_;
				_tmp14_ = gee_collection_get_size ((GeeCollection*) self->priv->_queries);
				_tmp12_ = match_count == _tmp14_;
			} else {
				_tmp12_ = FALSE;
			}
			if (_tmp12_) {
				_tmp11_ = TRUE;
			} else {
				gboolean _tmp15_ = FALSE;
				const gchar* _tmp16_ = NULL;
				_tmp16_ = beat_box_smart_playlist_get_conditional (self);
				if (g_strcmp0 (_tmp16_, "any") == 0) {
					_tmp15_ = match_count >= 1;
				} else {
					_tmp15_ = FALSE;
				}
				_tmp11_ = _tmp15_;
			}
			if (_tmp11_) {
				gint _tmp17_;
				_tmp17_ = beat_box_song_get_rowid (s);
				gee_abstract_collection_add ((GeeAbstractCollection*) rv, GINT_TO_POINTER (_tmp17_));
			}
			if (self->priv->_limit) {
				gint _tmp19_;
				_tmp19_ = gee_collection_get_size ((GeeCollection*) rv);
				_tmp18_ = self->priv->_limit_amount <= _tmp19_;
			} else {
				_tmp18_ = FALSE;
			}
			if (_tmp18_) {
				result = rv;
				_g_object_unref0 (s);
				_g_object_unref0 (_s_it);
				return result;
			}
			_g_object_unref0 (s);
		}
		_g_object_unref0 (_s_it);
	}
	result = rv;
	return result;
}


static gboolean string_contains (const gchar* self, const gchar* needle) {
	gboolean result = FALSE;
	gchar* _tmp0_ = NULL;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (needle != NULL, FALSE);
	_tmp0_ = strstr ((gchar*) self, (gchar*) needle);
	result = _tmp0_ != NULL;
	return result;
}


gboolean beat_box_smart_playlist_song_matches_query (BeatBoxSmartPlaylist* self, BeatBoxSmartQuery* q, BeatBoxSong* s) {
	gboolean result = FALSE;
	const gchar* _tmp0_ = NULL;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (q != NULL, FALSE);
	g_return_val_if_fail (s != NULL, FALSE);
	_tmp0_ = beat_box_smart_query_get_field (q);
	if (g_strcmp0 (_tmp0_, "Album") == 0) {
		const gchar* _tmp1_ = NULL;
		_tmp1_ = beat_box_smart_query_get_comparator (q);
		if (g_strcmp0 (_tmp1_, "is") == 0) {
			const gchar* _tmp2_ = NULL;
			const gchar* _tmp3_ = NULL;
			_tmp2_ = beat_box_smart_query_get_value (q);
			_tmp3_ = beat_box_song_get_album (s);
			result = g_strcmp0 (_tmp2_, _tmp3_) == 0;
			return result;
		} else {
			const gchar* _tmp4_ = NULL;
			_tmp4_ = beat_box_smart_query_get_comparator (q);
			if (g_strcmp0 (_tmp4_, "contains") == 0) {
				const gchar* _tmp5_ = NULL;
				gchar* _tmp6_ = NULL;
				gchar* _tmp7_;
				const gchar* _tmp8_ = NULL;
				gchar* _tmp9_ = NULL;
				gchar* _tmp10_;
				gboolean _tmp11_;
				gboolean _tmp12_;
				_tmp5_ = beat_box_song_get_album (s);
				_tmp6_ = g_utf8_strdown (_tmp5_, (gssize) (-1));
				_tmp7_ = _tmp6_;
				_tmp8_ = beat_box_smart_query_get_value (q);
				_tmp9_ = g_utf8_strdown (_tmp8_, (gssize) (-1));
				_tmp10_ = _tmp9_;
				_tmp11_ = string_contains (_tmp7_, _tmp10_);
				result = (_tmp12_ = _tmp11_, _g_free0 (_tmp10_), _g_free0 (_tmp7_), _tmp12_);
				return result;
			} else {
				const gchar* _tmp13_ = NULL;
				_tmp13_ = beat_box_smart_query_get_comparator (q);
				if (g_strcmp0 (_tmp13_, "does not contain") == 0) {
					const gchar* _tmp14_ = NULL;
					gchar* _tmp15_ = NULL;
					gchar* _tmp16_;
					const gchar* _tmp17_ = NULL;
					gchar* _tmp18_ = NULL;
					gchar* _tmp19_;
					gboolean _tmp20_;
					gboolean _tmp21_;
					_tmp14_ = beat_box_song_get_album (s);
					_tmp15_ = g_utf8_strdown (_tmp14_, (gssize) (-1));
					_tmp16_ = _tmp15_;
					_tmp17_ = beat_box_smart_query_get_value (q);
					_tmp18_ = g_utf8_strdown (_tmp17_, (gssize) (-1));
					_tmp19_ = _tmp18_;
					_tmp20_ = string_contains (_tmp16_, _tmp19_);
					result = (_tmp21_ = !_tmp20_, _g_free0 (_tmp19_), _g_free0 (_tmp16_), _tmp21_);
					return result;
				}
			}
		}
	} else {
		const gchar* _tmp22_ = NULL;
		_tmp22_ = beat_box_smart_query_get_field (q);
		if (g_strcmp0 (_tmp22_, "Artist") == 0) {
			const gchar* _tmp23_ = NULL;
			_tmp23_ = beat_box_smart_query_get_comparator (q);
			if (g_strcmp0 (_tmp23_, "is") == 0) {
				const gchar* _tmp24_ = NULL;
				const gchar* _tmp25_ = NULL;
				_tmp24_ = beat_box_smart_query_get_value (q);
				_tmp25_ = beat_box_song_get_artist (s);
				result = g_strcmp0 (_tmp24_, _tmp25_) == 0;
				return result;
			} else {
				const gchar* _tmp26_ = NULL;
				_tmp26_ = beat_box_smart_query_get_comparator (q);
				if (g_strcmp0 (_tmp26_, "contains") == 0) {
					const gchar* _tmp27_ = NULL;
					gchar* _tmp28_ = NULL;
					gchar* _tmp29_;
					const gchar* _tmp30_ = NULL;
					gchar* _tmp31_ = NULL;
					gchar* _tmp32_;
					gboolean _tmp33_;
					gboolean _tmp34_;
					_tmp27_ = beat_box_song_get_artist (s);
					_tmp28_ = g_utf8_strdown (_tmp27_, (gssize) (-1));
					_tmp29_ = _tmp28_;
					_tmp30_ = beat_box_smart_query_get_value (q);
					_tmp31_ = g_utf8_strdown (_tmp30_, (gssize) (-1));
					_tmp32_ = _tmp31_;
					_tmp33_ = string_contains (_tmp29_, _tmp32_);
					result = (_tmp34_ = _tmp33_, _g_free0 (_tmp32_), _g_free0 (_tmp29_), _tmp34_);
					return result;
				} else {
					const gchar* _tmp35_ = NULL;
					_tmp35_ = beat_box_smart_query_get_comparator (q);
					if (g_strcmp0 (_tmp35_, "does not contain") == 0) {
						const gchar* _tmp36_ = NULL;
						gchar* _tmp37_ = NULL;
						gchar* _tmp38_;
						const gchar* _tmp39_ = NULL;
						gchar* _tmp40_ = NULL;
						gchar* _tmp41_;
						gboolean _tmp42_;
						gboolean _tmp43_;
						_tmp36_ = beat_box_song_get_artist (s);
						_tmp37_ = g_utf8_strdown (_tmp36_, (gssize) (-1));
						_tmp38_ = _tmp37_;
						_tmp39_ = beat_box_smart_query_get_value (q);
						_tmp40_ = g_utf8_strdown (_tmp39_, (gssize) (-1));
						_tmp41_ = _tmp40_;
						_tmp42_ = string_contains (_tmp38_, _tmp41_);
						result = (_tmp43_ = !_tmp42_, _g_free0 (_tmp41_), _g_free0 (_tmp38_), _tmp43_);
						return result;
					}
				}
			}
		} else {
			const gchar* _tmp44_ = NULL;
			_tmp44_ = beat_box_smart_query_get_field (q);
			if (g_strcmp0 (_tmp44_, "Comment") == 0) {
				const gchar* _tmp45_ = NULL;
				_tmp45_ = beat_box_smart_query_get_comparator (q);
				if (g_strcmp0 (_tmp45_, "is") == 0) {
					const gchar* _tmp46_ = NULL;
					const gchar* _tmp47_ = NULL;
					_tmp46_ = beat_box_smart_query_get_value (q);
					_tmp47_ = beat_box_song_get_comment (s);
					result = g_strcmp0 (_tmp46_, _tmp47_) == 0;
					return result;
				} else {
					const gchar* _tmp48_ = NULL;
					_tmp48_ = beat_box_smart_query_get_comparator (q);
					if (g_strcmp0 (_tmp48_, "contains") == 0) {
						const gchar* _tmp49_ = NULL;
						gchar* _tmp50_ = NULL;
						gchar* _tmp51_;
						const gchar* _tmp52_ = NULL;
						gchar* _tmp53_ = NULL;
						gchar* _tmp54_;
						gboolean _tmp55_;
						gboolean _tmp56_;
						_tmp49_ = beat_box_song_get_comment (s);
						_tmp50_ = g_utf8_strdown (_tmp49_, (gssize) (-1));
						_tmp51_ = _tmp50_;
						_tmp52_ = beat_box_smart_query_get_value (q);
						_tmp53_ = g_utf8_strdown (_tmp52_, (gssize) (-1));
						_tmp54_ = _tmp53_;
						_tmp55_ = string_contains (_tmp51_, _tmp54_);
						result = (_tmp56_ = _tmp55_, _g_free0 (_tmp54_), _g_free0 (_tmp51_), _tmp56_);
						return result;
					} else {
						const gchar* _tmp57_ = NULL;
						_tmp57_ = beat_box_smart_query_get_comparator (q);
						if (g_strcmp0 (_tmp57_, "does not contain") == 0) {
							const gchar* _tmp58_ = NULL;
							gchar* _tmp59_ = NULL;
							gchar* _tmp60_;
							const gchar* _tmp61_ = NULL;
							gchar* _tmp62_ = NULL;
							gchar* _tmp63_;
							gboolean _tmp64_;
							gboolean _tmp65_;
							_tmp58_ = beat_box_song_get_comment (s);
							_tmp59_ = g_utf8_strdown (_tmp58_, (gssize) (-1));
							_tmp60_ = _tmp59_;
							_tmp61_ = beat_box_smart_query_get_value (q);
							_tmp62_ = g_utf8_strdown (_tmp61_, (gssize) (-1));
							_tmp63_ = _tmp62_;
							_tmp64_ = string_contains (_tmp60_, _tmp63_);
							result = (_tmp65_ = !_tmp64_, _g_free0 (_tmp63_), _g_free0 (_tmp60_), _tmp65_);
							return result;
						}
					}
				}
			} else {
				const gchar* _tmp66_ = NULL;
				_tmp66_ = beat_box_smart_query_get_field (q);
				if (g_strcmp0 (_tmp66_, "Genre") == 0) {
					const gchar* _tmp67_ = NULL;
					_tmp67_ = beat_box_smart_query_get_comparator (q);
					if (g_strcmp0 (_tmp67_, "is") == 0) {
						const gchar* _tmp68_ = NULL;
						const gchar* _tmp69_ = NULL;
						_tmp68_ = beat_box_smart_query_get_value (q);
						_tmp69_ = beat_box_song_get_genre (s);
						result = g_strcmp0 (_tmp68_, _tmp69_) == 0;
						return result;
					} else {
						const gchar* _tmp70_ = NULL;
						_tmp70_ = beat_box_smart_query_get_comparator (q);
						if (g_strcmp0 (_tmp70_, "contains") == 0) {
							const gchar* _tmp71_ = NULL;
							gchar* _tmp72_ = NULL;
							gchar* _tmp73_;
							const gchar* _tmp74_ = NULL;
							gchar* _tmp75_ = NULL;
							gchar* _tmp76_;
							gboolean _tmp77_;
							gboolean _tmp78_;
							_tmp71_ = beat_box_song_get_genre (s);
							_tmp72_ = g_utf8_strdown (_tmp71_, (gssize) (-1));
							_tmp73_ = _tmp72_;
							_tmp74_ = beat_box_smart_query_get_value (q);
							_tmp75_ = g_utf8_strdown (_tmp74_, (gssize) (-1));
							_tmp76_ = _tmp75_;
							_tmp77_ = string_contains (_tmp73_, _tmp76_);
							result = (_tmp78_ = _tmp77_, _g_free0 (_tmp76_), _g_free0 (_tmp73_), _tmp78_);
							return result;
						} else {
							const gchar* _tmp79_ = NULL;
							_tmp79_ = beat_box_smart_query_get_comparator (q);
							if (g_strcmp0 (_tmp79_, "does not contain") == 0) {
								const gchar* _tmp80_ = NULL;
								gchar* _tmp81_ = NULL;
								gchar* _tmp82_;
								const gchar* _tmp83_ = NULL;
								gchar* _tmp84_ = NULL;
								gchar* _tmp85_;
								gboolean _tmp86_;
								gboolean _tmp87_;
								_tmp80_ = beat_box_song_get_genre (s);
								_tmp81_ = g_utf8_strdown (_tmp80_, (gssize) (-1));
								_tmp82_ = _tmp81_;
								_tmp83_ = beat_box_smart_query_get_value (q);
								_tmp84_ = g_utf8_strdown (_tmp83_, (gssize) (-1));
								_tmp85_ = _tmp84_;
								_tmp86_ = string_contains (_tmp82_, _tmp85_);
								result = (_tmp87_ = !_tmp86_, _g_free0 (_tmp85_), _g_free0 (_tmp82_), _tmp87_);
								return result;
							}
						}
					}
				} else {
					const gchar* _tmp88_ = NULL;
					_tmp88_ = beat_box_smart_query_get_field (q);
					if (g_strcmp0 (_tmp88_, "Title") == 0) {
						const gchar* _tmp89_ = NULL;
						_tmp89_ = beat_box_smart_query_get_comparator (q);
						if (g_strcmp0 (_tmp89_, "is") == 0) {
							const gchar* _tmp90_ = NULL;
							const gchar* _tmp91_ = NULL;
							_tmp90_ = beat_box_smart_query_get_value (q);
							_tmp91_ = beat_box_song_get_title (s);
							result = g_strcmp0 (_tmp90_, _tmp91_) == 0;
							return result;
						} else {
							const gchar* _tmp92_ = NULL;
							_tmp92_ = beat_box_smart_query_get_comparator (q);
							if (g_strcmp0 (_tmp92_, "contains") == 0) {
								const gchar* _tmp93_ = NULL;
								gchar* _tmp94_ = NULL;
								gchar* _tmp95_;
								const gchar* _tmp96_ = NULL;
								gchar* _tmp97_ = NULL;
								gchar* _tmp98_;
								gboolean _tmp99_;
								gboolean _tmp100_;
								_tmp93_ = beat_box_song_get_title (s);
								_tmp94_ = g_utf8_strdown (_tmp93_, (gssize) (-1));
								_tmp95_ = _tmp94_;
								_tmp96_ = beat_box_smart_query_get_value (q);
								_tmp97_ = g_utf8_strdown (_tmp96_, (gssize) (-1));
								_tmp98_ = _tmp97_;
								_tmp99_ = string_contains (_tmp95_, _tmp98_);
								result = (_tmp100_ = _tmp99_, _g_free0 (_tmp98_), _g_free0 (_tmp95_), _tmp100_);
								return result;
							} else {
								const gchar* _tmp101_ = NULL;
								_tmp101_ = beat_box_smart_query_get_comparator (q);
								if (g_strcmp0 (_tmp101_, "does not contain") == 0) {
									const gchar* _tmp102_ = NULL;
									gchar* _tmp103_ = NULL;
									gchar* _tmp104_;
									const gchar* _tmp105_ = NULL;
									gchar* _tmp106_ = NULL;
									gchar* _tmp107_;
									gboolean _tmp108_;
									gboolean _tmp109_;
									_tmp102_ = beat_box_song_get_title (s);
									_tmp103_ = g_utf8_strdown (_tmp102_, (gssize) (-1));
									_tmp104_ = _tmp103_;
									_tmp105_ = beat_box_smart_query_get_value (q);
									_tmp106_ = g_utf8_strdown (_tmp105_, (gssize) (-1));
									_tmp107_ = _tmp106_;
									_tmp108_ = string_contains (_tmp104_, _tmp107_);
									result = (_tmp109_ = !_tmp108_, _g_free0 (_tmp107_), _g_free0 (_tmp104_), _tmp109_);
									return result;
								}
							}
						}
					} else {
						const gchar* _tmp110_ = NULL;
						_tmp110_ = beat_box_smart_query_get_field (q);
						if (g_strcmp0 (_tmp110_, "Bitrate") == 0) {
							const gchar* _tmp111_ = NULL;
							_tmp111_ = beat_box_smart_query_get_comparator (q);
							if (g_strcmp0 (_tmp111_, "is exactly") == 0) {
								const gchar* _tmp112_ = NULL;
								gint _tmp113_;
								gint _tmp114_;
								_tmp112_ = beat_box_smart_query_get_value (q);
								_tmp113_ = atoi (_tmp112_);
								_tmp114_ = beat_box_song_get_bitrate (s);
								result = _tmp113_ == _tmp114_;
								return result;
							} else {
								const gchar* _tmp115_ = NULL;
								_tmp115_ = beat_box_smart_query_get_comparator (q);
								if (g_strcmp0 (_tmp115_, "is at most") == 0) {
									gint _tmp116_;
									const gchar* _tmp117_ = NULL;
									gint _tmp118_;
									_tmp116_ = beat_box_song_get_bitrate (s);
									_tmp117_ = beat_box_smart_query_get_value (q);
									_tmp118_ = atoi (_tmp117_);
									result = _tmp116_ <= _tmp118_;
									return result;
								} else {
									const gchar* _tmp119_ = NULL;
									_tmp119_ = beat_box_smart_query_get_comparator (q);
									if (g_strcmp0 (_tmp119_, "is at least") == 0) {
										gint _tmp120_;
										const gchar* _tmp121_ = NULL;
										gint _tmp122_;
										_tmp120_ = beat_box_song_get_bitrate (s);
										_tmp121_ = beat_box_smart_query_get_value (q);
										_tmp122_ = atoi (_tmp121_);
										result = _tmp120_ >= _tmp122_;
										return result;
									}
								}
							}
						} else {
							const gchar* _tmp123_ = NULL;
							_tmp123_ = beat_box_smart_query_get_field (q);
							if (g_strcmp0 (_tmp123_, "Playcount") == 0) {
								const gchar* _tmp124_ = NULL;
								_tmp124_ = beat_box_smart_query_get_comparator (q);
								if (g_strcmp0 (_tmp124_, "is exactly") == 0) {
									const gchar* _tmp125_ = NULL;
									gint _tmp126_;
									gint _tmp127_;
									_tmp125_ = beat_box_smart_query_get_value (q);
									_tmp126_ = atoi (_tmp125_);
									_tmp127_ = beat_box_song_get_play_count (s);
									result = _tmp126_ == _tmp127_;
									return result;
								} else {
									const gchar* _tmp128_ = NULL;
									_tmp128_ = beat_box_smart_query_get_comparator (q);
									if (g_strcmp0 (_tmp128_, "is at most") == 0) {
										gint _tmp129_;
										const gchar* _tmp130_ = NULL;
										gint _tmp131_;
										_tmp129_ = beat_box_song_get_play_count (s);
										_tmp130_ = beat_box_smart_query_get_value (q);
										_tmp131_ = atoi (_tmp130_);
										result = _tmp129_ <= _tmp131_;
										return result;
									} else {
										const gchar* _tmp132_ = NULL;
										_tmp132_ = beat_box_smart_query_get_comparator (q);
										if (g_strcmp0 (_tmp132_, "is at least") == 0) {
											gint _tmp133_;
											const gchar* _tmp134_ = NULL;
											gint _tmp135_;
											_tmp133_ = beat_box_song_get_play_count (s);
											_tmp134_ = beat_box_smart_query_get_value (q);
											_tmp135_ = atoi (_tmp134_);
											result = _tmp133_ >= _tmp135_;
											return result;
										}
									}
								}
							} else {
								const gchar* _tmp136_ = NULL;
								_tmp136_ = beat_box_smart_query_get_field (q);
								if (g_strcmp0 (_tmp136_, "Skipcount") == 0) {
									const gchar* _tmp137_ = NULL;
									_tmp137_ = beat_box_smart_query_get_comparator (q);
									if (g_strcmp0 (_tmp137_, "is exactly") == 0) {
										const gchar* _tmp138_ = NULL;
										gint _tmp139_;
										gint _tmp140_;
										_tmp138_ = beat_box_smart_query_get_value (q);
										_tmp139_ = atoi (_tmp138_);
										_tmp140_ = beat_box_song_get_skip_count (s);
										result = _tmp139_ == _tmp140_;
										return result;
									} else {
										const gchar* _tmp141_ = NULL;
										_tmp141_ = beat_box_smart_query_get_comparator (q);
										if (g_strcmp0 (_tmp141_, "is at most") == 0) {
											gint _tmp142_;
											const gchar* _tmp143_ = NULL;
											gint _tmp144_;
											_tmp142_ = beat_box_song_get_skip_count (s);
											_tmp143_ = beat_box_smart_query_get_value (q);
											_tmp144_ = atoi (_tmp143_);
											result = _tmp142_ <= _tmp144_;
											return result;
										} else {
											const gchar* _tmp145_ = NULL;
											_tmp145_ = beat_box_smart_query_get_comparator (q);
											if (g_strcmp0 (_tmp145_, "is at least") == 0) {
												gint _tmp146_;
												const gchar* _tmp147_ = NULL;
												gint _tmp148_;
												_tmp146_ = beat_box_song_get_skip_count (s);
												_tmp147_ = beat_box_smart_query_get_value (q);
												_tmp148_ = atoi (_tmp147_);
												result = _tmp146_ >= _tmp148_;
												return result;
											}
										}
									}
								} else {
									const gchar* _tmp149_ = NULL;
									_tmp149_ = beat_box_smart_query_get_field (q);
									if (g_strcmp0 (_tmp149_, "Year") == 0) {
										const gchar* _tmp150_ = NULL;
										_tmp150_ = beat_box_smart_query_get_comparator (q);
										if (g_strcmp0 (_tmp150_, "is exactly") == 0) {
											const gchar* _tmp151_ = NULL;
											gint _tmp152_;
											gint _tmp153_;
											_tmp151_ = beat_box_smart_query_get_value (q);
											_tmp152_ = atoi (_tmp151_);
											_tmp153_ = beat_box_song_get_year (s);
											result = _tmp152_ == _tmp153_;
											return result;
										} else {
											const gchar* _tmp154_ = NULL;
											_tmp154_ = beat_box_smart_query_get_comparator (q);
											if (g_strcmp0 (_tmp154_, "is at most") == 0) {
												gint _tmp155_;
												const gchar* _tmp156_ = NULL;
												gint _tmp157_;
												_tmp155_ = beat_box_song_get_year (s);
												_tmp156_ = beat_box_smart_query_get_value (q);
												_tmp157_ = atoi (_tmp156_);
												result = _tmp155_ <= _tmp157_;
												return result;
											} else {
												const gchar* _tmp158_ = NULL;
												_tmp158_ = beat_box_smart_query_get_comparator (q);
												if (g_strcmp0 (_tmp158_, "is at least") == 0) {
													gint _tmp159_;
													const gchar* _tmp160_ = NULL;
													gint _tmp161_;
													_tmp159_ = beat_box_song_get_year (s);
													_tmp160_ = beat_box_smart_query_get_value (q);
													_tmp161_ = atoi (_tmp160_);
													result = _tmp159_ >= _tmp161_;
													return result;
												}
											}
										}
									} else {
										const gchar* _tmp162_ = NULL;
										_tmp162_ = beat_box_smart_query_get_field (q);
										if (g_strcmp0 (_tmp162_, "Length") == 0) {
											const gchar* _tmp163_ = NULL;
											_tmp163_ = beat_box_smart_query_get_comparator (q);
											if (g_strcmp0 (_tmp163_, "is exactly") == 0) {
												const gchar* _tmp164_ = NULL;
												gint _tmp165_;
												gint _tmp166_;
												_tmp164_ = beat_box_smart_query_get_value (q);
												_tmp165_ = atoi (_tmp164_);
												_tmp166_ = beat_box_song_get_length (s);
												result = _tmp165_ == _tmp166_;
												return result;
											} else {
												const gchar* _tmp167_ = NULL;
												_tmp167_ = beat_box_smart_query_get_comparator (q);
												if (g_strcmp0 (_tmp167_, "is at most") == 0) {
													gint _tmp168_;
													const gchar* _tmp169_ = NULL;
													gint _tmp170_;
													_tmp168_ = beat_box_song_get_length (s);
													_tmp169_ = beat_box_smart_query_get_value (q);
													_tmp170_ = atoi (_tmp169_);
													result = _tmp168_ <= _tmp170_;
													return result;
												} else {
													const gchar* _tmp171_ = NULL;
													_tmp171_ = beat_box_smart_query_get_comparator (q);
													if (g_strcmp0 (_tmp171_, "is at least") == 0) {
														gint _tmp172_;
														const gchar* _tmp173_ = NULL;
														gint _tmp174_;
														_tmp172_ = beat_box_song_get_length (s);
														_tmp173_ = beat_box_smart_query_get_value (q);
														_tmp174_ = atoi (_tmp173_);
														result = _tmp172_ >= _tmp174_;
														return result;
													}
												}
											}
										} else {
											const gchar* _tmp175_ = NULL;
											_tmp175_ = beat_box_smart_query_get_field (q);
											if (g_strcmp0 (_tmp175_, "Rating") == 0) {
												const gchar* _tmp176_ = NULL;
												_tmp176_ = beat_box_smart_query_get_comparator (q);
												if (g_strcmp0 (_tmp176_, "is exactly") == 0) {
													const gchar* _tmp177_ = NULL;
													gint _tmp178_;
													gint _tmp179_;
													_tmp177_ = beat_box_smart_query_get_value (q);
													_tmp178_ = atoi (_tmp177_);
													_tmp179_ = beat_box_song_get_rating (s);
													result = _tmp178_ == _tmp179_;
													return result;
												} else {
													const gchar* _tmp180_ = NULL;
													_tmp180_ = beat_box_smart_query_get_comparator (q);
													if (g_strcmp0 (_tmp180_, "is at most") == 0) {
														gint _tmp181_;
														const gchar* _tmp182_ = NULL;
														gint _tmp183_;
														_tmp181_ = beat_box_song_get_rating (s);
														_tmp182_ = beat_box_smart_query_get_value (q);
														_tmp183_ = atoi (_tmp182_);
														result = _tmp181_ <= _tmp183_;
														return result;
													} else {
														const gchar* _tmp184_ = NULL;
														_tmp184_ = beat_box_smart_query_get_comparator (q);
														if (g_strcmp0 (_tmp184_, "is at least") == 0) {
															gint _tmp185_;
															const gchar* _tmp186_ = NULL;
															gint _tmp187_;
															_tmp185_ = beat_box_song_get_rating (s);
															_tmp186_ = beat_box_smart_query_get_value (q);
															_tmp187_ = atoi (_tmp186_);
															result = _tmp185_ >= _tmp187_;
															return result;
														}
													}
												}
											} else {
												const gchar* _tmp188_ = NULL;
												_tmp188_ = beat_box_smart_query_get_field (q);
												if (g_strcmp0 (_tmp188_, "Date Added") == 0) {
													GDateTime* _tmp189_ = NULL;
													GDateTime* now;
													gint _tmp190_;
													GDateTime* _tmp191_ = NULL;
													GDateTime* played;
													const gchar* _tmp192_ = NULL;
													gint _tmp193_;
													GDateTime* _tmp194_ = NULL;
													GDateTime* _tmp195_;
													const gchar* _tmp196_ = NULL;
													_tmp189_ = g_date_time_new_now_local ();
													now = _tmp189_;
													_tmp190_ = beat_box_song_get_date_added (s);
													_tmp191_ = g_date_time_new_from_unix_local ((gint64) _tmp190_);
													played = _tmp191_;
													_tmp192_ = beat_box_smart_query_get_value (q);
													_tmp193_ = atoi (_tmp192_);
													_tmp194_ = g_date_time_add_days (played, _tmp193_);
													_tmp195_ = _tmp194_;
													_g_date_time_unref0 (played);
													played = _tmp195_;
													_tmp196_ = beat_box_smart_query_get_comparator (q);
													if (g_strcmp0 (_tmp196_, "is exactly") == 0) {
														gboolean _tmp197_ = FALSE;
														gint _tmp198_;
														gint _tmp199_;
														_tmp198_ = g_date_time_get_day_of_year (now);
														_tmp199_ = g_date_time_get_day_of_year (played);
														if (_tmp198_ == _tmp199_) {
															gint _tmp200_;
															gint _tmp201_;
															_tmp200_ = g_date_time_get_year (now);
															_tmp201_ = g_date_time_get_year (played);
															_tmp197_ = _tmp200_ == _tmp201_;
														} else {
															_tmp197_ = FALSE;
														}
														result = _tmp197_;
														_g_date_time_unref0 (played);
														_g_date_time_unref0 (now);
														return result;
													} else {
														const gchar* _tmp202_ = NULL;
														_tmp202_ = beat_box_smart_query_get_comparator (q);
														if (g_strcmp0 (_tmp202_, "is within") == 0) {
															gint _tmp203_;
															_tmp203_ = g_date_time_compare (played, now);
															result = _tmp203_ > 0;
															_g_date_time_unref0 (played);
															_g_date_time_unref0 (now);
															return result;
														} else {
															const gchar* _tmp204_ = NULL;
															_tmp204_ = beat_box_smart_query_get_comparator (q);
															if (g_strcmp0 (_tmp204_, "is before") == 0) {
																gint _tmp205_;
																_tmp205_ = g_date_time_compare (now, played);
																result = _tmp205_ > 0;
																_g_date_time_unref0 (played);
																_g_date_time_unref0 (now);
																return result;
															}
														}
													}
													_g_date_time_unref0 (played);
													_g_date_time_unref0 (now);
												} else {
													const gchar* _tmp206_ = NULL;
													_tmp206_ = beat_box_smart_query_get_field (q);
													if (g_strcmp0 (_tmp206_, "Last Played") == 0) {
														gint _tmp207_;
														GDateTime* _tmp208_ = NULL;
														GDateTime* now;
														gint _tmp209_;
														GDateTime* _tmp210_ = NULL;
														GDateTime* played;
														const gchar* _tmp211_ = NULL;
														gint _tmp212_;
														GDateTime* _tmp213_ = NULL;
														GDateTime* _tmp214_;
														const gchar* _tmp215_ = NULL;
														_tmp207_ = beat_box_song_get_last_played (s);
														if (_tmp207_ == 0) {
															result = FALSE;
															return result;
														}
														_tmp208_ = g_date_time_new_now_local ();
														now = _tmp208_;
														_tmp209_ = beat_box_song_get_last_played (s);
														_tmp210_ = g_date_time_new_from_unix_local ((gint64) _tmp209_);
														played = _tmp210_;
														_tmp211_ = beat_box_smart_query_get_value (q);
														_tmp212_ = atoi (_tmp211_);
														_tmp213_ = g_date_time_add_days (played, _tmp212_);
														_tmp214_ = _tmp213_;
														_g_date_time_unref0 (played);
														played = _tmp214_;
														_tmp215_ = beat_box_smart_query_get_comparator (q);
														if (g_strcmp0 (_tmp215_, "is exactly") == 0) {
															gboolean _tmp216_ = FALSE;
															gint _tmp217_;
															gint _tmp218_;
															_tmp217_ = g_date_time_get_day_of_year (now);
															_tmp218_ = g_date_time_get_day_of_year (played);
															if (_tmp217_ == _tmp218_) {
																gint _tmp219_;
																gint _tmp220_;
																_tmp219_ = g_date_time_get_year (now);
																_tmp220_ = g_date_time_get_year (played);
																_tmp216_ = _tmp219_ == _tmp220_;
															} else {
																_tmp216_ = FALSE;
															}
															result = _tmp216_;
															_g_date_time_unref0 (played);
															_g_date_time_unref0 (now);
															return result;
														} else {
															const gchar* _tmp221_ = NULL;
															_tmp221_ = beat_box_smart_query_get_comparator (q);
															if (g_strcmp0 (_tmp221_, "is within") == 0) {
																gint _tmp222_;
																_tmp222_ = g_date_time_compare (played, now);
																result = _tmp222_ > 0;
																_g_date_time_unref0 (played);
																_g_date_time_unref0 (now);
																return result;
															} else {
																const gchar* _tmp223_ = NULL;
																_tmp223_ = beat_box_smart_query_get_comparator (q);
																if (g_strcmp0 (_tmp223_, "is before") == 0) {
																	gint _tmp224_;
																	_tmp224_ = g_date_time_compare (now, played);
																	result = _tmp224_ > 0;
																	_g_date_time_unref0 (played);
																	_g_date_time_unref0 (now);
																	return result;
																}
															}
														}
														_g_date_time_unref0 (played);
														_g_date_time_unref0 (now);
													}
												}
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
	result = FALSE;
	return result;
}


gint beat_box_smart_playlist_get_rowid (BeatBoxSmartPlaylist* self) {
	gint result;
	g_return_val_if_fail (self != NULL, 0);
	result = self->priv->_rowid;
	return result;
}


void beat_box_smart_playlist_set_rowid (BeatBoxSmartPlaylist* self, gint value) {
	g_return_if_fail (self != NULL);
	self->priv->_rowid = value;
	g_object_notify ((GObject *) self, "rowid");
}


const gchar* beat_box_smart_playlist_get_name (BeatBoxSmartPlaylist* self) {
	const gchar* result;
	g_return_val_if_fail (self != NULL, NULL);
	result = self->priv->_name;
	return result;
}


void beat_box_smart_playlist_set_name (BeatBoxSmartPlaylist* self, const gchar* value) {
	gchar* _tmp0_;
	gchar* _tmp1_;
	g_return_if_fail (self != NULL);
	_tmp0_ = g_strdup (value);
	_tmp1_ = _tmp0_;
	_g_free0 (self->priv->_name);
	self->priv->_name = _tmp1_;
	g_object_notify ((GObject *) self, "name");
}


const gchar* beat_box_smart_playlist_get_conditional (BeatBoxSmartPlaylist* self) {
	const gchar* result;
	g_return_val_if_fail (self != NULL, NULL);
	result = self->priv->_conditional;
	return result;
}


void beat_box_smart_playlist_set_conditional (BeatBoxSmartPlaylist* self, const gchar* value) {
	gboolean _tmp0_ = FALSE;
	g_return_if_fail (self != NULL);
	if (g_strcmp0 (value, "all") == 0) {
		_tmp0_ = TRUE;
	} else {
		_tmp0_ = g_strcmp0 (value, "any") == 0;
	}
	if (_tmp0_) {
		gchar* _tmp1_;
		gchar* _tmp2_;
		_tmp1_ = g_strdup (value);
		_tmp2_ = _tmp1_;
		_g_free0 (self->priv->_conditional);
		self->priv->_conditional = _tmp2_;
	} else {
		fprintf (stderr, "Invalid conditional for smart playlist. Must be \"all\" or \"any\". Su" \
"pplied: %s \n", value);
	}
	g_object_notify ((GObject *) self, "conditional");
}


gboolean beat_box_smart_playlist_get_limit (BeatBoxSmartPlaylist* self) {
	gboolean result;
	g_return_val_if_fail (self != NULL, FALSE);
	result = self->priv->_limit;
	return result;
}


void beat_box_smart_playlist_set_limit (BeatBoxSmartPlaylist* self, gboolean value) {
	g_return_if_fail (self != NULL);
	self->priv->_limit = value;
	g_object_notify ((GObject *) self, "limit");
}


gint beat_box_smart_playlist_get_limit_amount (BeatBoxSmartPlaylist* self) {
	gint result;
	g_return_val_if_fail (self != NULL, 0);
	result = self->priv->_limit_amount;
	return result;
}


void beat_box_smart_playlist_set_limit_amount (BeatBoxSmartPlaylist* self, gint value) {
	g_return_if_fail (self != NULL);
	self->priv->_limit_amount = value;
	g_object_notify ((GObject *) self, "limit-amount");
}


static void beat_box_smart_playlist_class_init (BeatBoxSmartPlaylistClass * klass) {
	beat_box_smart_playlist_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (BeatBoxSmartPlaylistPrivate));
	G_OBJECT_CLASS (klass)->get_property = _vala_beat_box_smart_playlist_get_property;
	G_OBJECT_CLASS (klass)->set_property = _vala_beat_box_smart_playlist_set_property;
	G_OBJECT_CLASS (klass)->finalize = beat_box_smart_playlist_finalize;
	g_object_class_install_property (G_OBJECT_CLASS (klass), BEAT_BOX_SMART_PLAYLIST_ROWID, g_param_spec_int ("rowid", "rowid", "rowid", G_MININT, G_MAXINT, 0, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), BEAT_BOX_SMART_PLAYLIST_NAME, g_param_spec_string ("name", "name", "name", NULL, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), BEAT_BOX_SMART_PLAYLIST_CONDITIONAL, g_param_spec_string ("conditional", "conditional", "conditional", NULL, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), BEAT_BOX_SMART_PLAYLIST_LIMIT, g_param_spec_boolean ("limit", "limit", "limit", FALSE, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), BEAT_BOX_SMART_PLAYLIST_LIMIT_AMOUNT, g_param_spec_int ("limit-amount", "limit-amount", "limit-amount", G_MININT, G_MAXINT, 0, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
}


static void beat_box_smart_playlist_instance_init (BeatBoxSmartPlaylist * self) {
	self->priv = BEAT_BOX_SMART_PLAYLIST_GET_PRIVATE (self);
}


static void beat_box_smart_playlist_finalize (GObject* obj) {
	BeatBoxSmartPlaylist * self;
	self = BEAT_BOX_SMART_PLAYLIST (obj);
	_g_object_unref0 (self->tvs);
	_g_free0 (self->priv->_name);
	_g_free0 (self->priv->_conditional);
	_g_object_unref0 (self->priv->_queries);
	G_OBJECT_CLASS (beat_box_smart_playlist_parent_class)->finalize (obj);
}


GType beat_box_smart_playlist_get_type (void) {
	static volatile gsize beat_box_smart_playlist_type_id__volatile = 0;
	if (g_once_init_enter (&beat_box_smart_playlist_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (BeatBoxSmartPlaylistClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) beat_box_smart_playlist_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (BeatBoxSmartPlaylist), 0, (GInstanceInitFunc) beat_box_smart_playlist_instance_init, NULL };
		GType beat_box_smart_playlist_type_id;
		beat_box_smart_playlist_type_id = g_type_register_static (G_TYPE_OBJECT, "BeatBoxSmartPlaylist", &g_define_type_info, 0);
		g_once_init_leave (&beat_box_smart_playlist_type_id__volatile, beat_box_smart_playlist_type_id);
	}
	return beat_box_smart_playlist_type_id__volatile;
}


static void _vala_beat_box_smart_playlist_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec) {
	BeatBoxSmartPlaylist * self;
	self = BEAT_BOX_SMART_PLAYLIST (object);
	switch (property_id) {
		case BEAT_BOX_SMART_PLAYLIST_ROWID:
		g_value_set_int (value, beat_box_smart_playlist_get_rowid (self));
		break;
		case BEAT_BOX_SMART_PLAYLIST_NAME:
		g_value_set_string (value, beat_box_smart_playlist_get_name (self));
		break;
		case BEAT_BOX_SMART_PLAYLIST_CONDITIONAL:
		g_value_set_string (value, beat_box_smart_playlist_get_conditional (self));
		break;
		case BEAT_BOX_SMART_PLAYLIST_LIMIT:
		g_value_set_boolean (value, beat_box_smart_playlist_get_limit (self));
		break;
		case BEAT_BOX_SMART_PLAYLIST_LIMIT_AMOUNT:
		g_value_set_int (value, beat_box_smart_playlist_get_limit_amount (self));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}


static void _vala_beat_box_smart_playlist_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec) {
	BeatBoxSmartPlaylist * self;
	self = BEAT_BOX_SMART_PLAYLIST (object);
	switch (property_id) {
		case BEAT_BOX_SMART_PLAYLIST_ROWID:
		beat_box_smart_playlist_set_rowid (self, g_value_get_int (value));
		break;
		case BEAT_BOX_SMART_PLAYLIST_NAME:
		beat_box_smart_playlist_set_name (self, g_value_get_string (value));
		break;
		case BEAT_BOX_SMART_PLAYLIST_CONDITIONAL:
		beat_box_smart_playlist_set_conditional (self, g_value_get_string (value));
		break;
		case BEAT_BOX_SMART_PLAYLIST_LIMIT:
		beat_box_smart_playlist_set_limit (self, g_value_get_boolean (value));
		break;
		case BEAT_BOX_SMART_PLAYLIST_LIMIT_AMOUNT:
		beat_box_smart_playlist_set_limit_amount (self, g_value_get_int (value));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}


static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	if ((array != NULL) && (destroy_func != NULL)) {
		int i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}


static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	_vala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}


static gint _vala_array_length (gpointer array) {
	int length;
	length = 0;
	if (array) {
		while (((gpointer*) array)[length]) {
			length++;
		}
	}
	return length;
}



